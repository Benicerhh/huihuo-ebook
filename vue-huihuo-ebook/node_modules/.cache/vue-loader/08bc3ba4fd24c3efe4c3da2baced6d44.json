{"remainingRequest":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\src\\views\\store\\StoreDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\src\\views\\store\\StoreDetail.vue","mtime":1588584644662},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBEZXRhaWxUaXRsZSBmcm9tICcuLi8uLi9jb21wb25lbnRzL2RldGFpbC9EZXRhaWxUaXRsZScKaW1wb3J0IEJvb2tJbmZvIGZyb20gJy4uLy4uL2NvbXBvbmVudHMvZGV0YWlsL0Jvb2tJbmZvJwppbXBvcnQgU2Nyb2xsIGZyb20gJy4uLy4uL2NvbXBvbmVudHMvY29tbW9uL1Njcm9sbCcKaW1wb3J0IFRvYXN0IGZyb20gJy4uLy4uL2NvbXBvbmVudHMvY29tbW9uL1RvYXN0JwppbXBvcnQgeyBkZXRhaWwgfSBmcm9tICcuLi8uLi9hcGkvc3RvcmUnCmltcG9ydCB7IHB4MnJlbSwgcmVhbFB4IH0gZnJvbSAnLi4vLi4vdXRpbHMvdXRpbHMnCi8vaW1wb3J0IHsgZ2V0TG9jYWxGb3JhZ2UgfSBmcm9tICcuLi8uLi91dGlscy8nCmltcG9ydCB7IHJlbW92ZUZyb21Cb29rU2hlbGYsIGFkZFRvU2hlbGYgfSBmcm9tICcuLi8uLi91dGlscy9zdG9yZScKaW1wb3J0IHsgc3RvcmVTaGVsZk1peGluIH0gZnJvbSAnLi4vLi4vdXRpbHMvbWl4aW4nCmltcG9ydCB7IGdldEJvb2tTaGVsZiwgc2F2ZUJvb2tTaGVsZiB9IGZyb20gJy4uLy4uL3V0aWxzL2xvY2FsU3RvcmFnZScKaW1wb3J0IEVwdWIgZnJvbSAnZXB1YmpzJwoKZ2xvYmFsLmVQdWIgPSBFcHViCgpleHBvcnQgZGVmYXVsdCB7CiAgbWl4aW5zOiBbc3RvcmVTaGVsZk1peGluXSwKICBjb21wb25lbnRzOiB7CiAgICBEZXRhaWxUaXRsZSwKICAgIFNjcm9sbCwKICAgIEJvb2tJbmZvLAogICAgVG9hc3QKICB9LAogIGNvbXB1dGVkOiB7CiAgICAvLyDojrflj5bnlLXlrZDkuabmkZjopoEKICAgIGRlc2MoKSB7CiAgICAgIGlmICh0aGlzLmRlc2NyaXB0aW9uKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuZGVzY3JpcHRpb24uc3Vic3RyaW5nKDAsIDEwMCkKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gJycKICAgICAgfQogICAgfSwKICAgIC8vIOWwhueUteWtkOS5puebruW9lei9rOS4uuS4gOe7tOaVsOe7hAogICAgZmxhdE5hdmlnYXRpb24oKSB7CiAgICAgIGlmICh0aGlzLm5hdmlnYXRpb24pIHsKICAgICAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseSgKICAgICAgICAgIFtdLAogICAgICAgICAgQXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseSgKICAgICAgICAgICAgW10sCiAgICAgICAgICAgIHRoaXMuZG9GbGF0TmF2aWdhdGlvbih0aGlzLm5hdmlnYXRpb24udG9jKQogICAgICAgICAgKQogICAgICAgICkKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gW10KICAgICAgfQogICAgfSwKICAgIC8vIOiOt+WPlueUteWtkOS5puivreenjQogICAgbGFuZygpIHsKICAgICAgcmV0dXJuIHRoaXMubWV0YWRhdGEgPyB0aGlzLm1ldGFkYXRhLmxhbmd1YWdlIDogJy0nCiAgICB9LAogICAgLy8g6I635Y+W55S15a2Q5LmmaXNibgogICAgaXNibigpIHsKICAgICAgcmV0dXJuIHRoaXMubWV0YWRhdGEgPyB0aGlzLm1ldGFkYXRhLmlkZW50aWZpZXIgOiAnLScKICAgIH0sCiAgICAvLyDojrflj5bnlLXlrZDkuablh7rniYjnpL4KICAgIHB1Ymxpc2hlcigpIHsKICAgICAgcmV0dXJuIHRoaXMubWV0YWRhdGEgPyB0aGlzLm1ldGFkYXRhLnB1Ymxpc2hlciA6ICctJwogICAgfSwKICAgIC8vIOiOt+WPlueUteWtkOS5puS5puWQjQogICAgdGl0bGUoKSB7CiAgICAgIHJldHVybiB0aGlzLm1ldGFkYXRhID8gdGhpcy5tZXRhZGF0YS50aXRsZSA6ICcnCiAgICB9LAogICAgLy8g6I635Y+W55S15a2Q5Lmm5L2c6ICFCiAgICBhdXRob3IoKSB7CiAgICAgIHJldHVybiB0aGlzLm1ldGFkYXRhID8gdGhpcy5tZXRhZGF0YS5jcmVhdG9yIDogJycKICAgIH0sCiAgICAvLyDliKTmlq3lvZPliY3nmoTnlLXlrZDkuabmmK/lkKblrZjlnKjkuo7kuabmnrYKICAgIGluQm9va1NoZWxmKCkgewogICAgICBpZiAodGhpcy5ib29rSXRlbSAmJiB0aGlzLnNoZWxmTGlzdCkgewogICAgICAgIC8vIOWumuS5ieS4gOS4quiHquaJp+ihjOWHveaVsO+8jOWwhuS5puaetui9rOS4uuS4gOe7tOaVsOe7hOe7k+aehO+8jOW5tuS4lOWPquS/neeVmXR5cGXkuLox55qE5pWw5o2u77yIdHlwZT0x55qE5Li655S15a2Q5Lmm77yJCiAgICAgICAgY29uc3QgZmxhdFNoZWxmID0gKGZ1bmN0aW9uIGZsYXR0ZW4oYXJyKSB7CiAgICAgICAgICByZXR1cm4gW10uY29uY2F0KAogICAgICAgICAgICAuLi5hcnIubWFwKHYgPT4gKHYuaXRlbUxpc3QgPyBbdiwgLi4uZmxhdHRlbih2Lml0ZW1MaXN0KV0gOiB2KSkKICAgICAgICAgICkKICAgICAgICB9KSh0aGlzLnNoZWxmTGlzdCkuZmlsdGVyKGl0ZW0gPT4gaXRlbS50eXBlID09PSAxKQogICAgICAgIC8vIOafpeaJvuW9k+WJjeeUteWtkOS5puaYr+WQpuWtmOWcqOS6juS5puaetgogICAgICAgIGNvbnN0IGJvb2sgPSBmbGF0U2hlbGYuZmlsdGVyKAogICAgICAgICAgaXRlbSA9PiBpdGVtLmZpbGVOYW1lID09PSB0aGlzLmJvb2tJdGVtLmZpbGVOYW1lCiAgICAgICAgKQogICAgICAgIHJldHVybiBib29rICYmIGJvb2subGVuZ3RoID4gMAogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBmYWxzZQogICAgICB9CiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYm9va0l0ZW06IG51bGwsCiAgICAgIGJvb2s6IG51bGwsCiAgICAgIG1ldGFkYXRhOiBudWxsLAogICAgICB0cmlhbFJlYWQ6IG51bGwsCiAgICAgIGNvdmVyOiBudWxsLAogICAgICBuYXZpZ2F0aW9uOiBudWxsLAogICAgICBkaXNwbGF5ZWQ6IGZhbHNlLAogICAgICBhdWRpbzogbnVsbCwKICAgICAgcmFuZG9tTG9jYXRpb246IG51bGwsCiAgICAgIGRlc2NyaXB0aW9uOiBudWxsLAogICAgICB0b2FzdFRleHQ6ICcnLAogICAgICB0cmlhbFRleHQ6IG51bGwsCiAgICAgIGNhdGVnb3J5VGV4dDogbnVsbCwKICAgICAgb3BmOiBudWxsCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBhZGRPclJlbW92ZVNoZWxmKCkgewogICAgICAvLyDlpoLmnpznlLXlrZDkuablrZjlnKjkuo7kuabmnrbvvIzliJnku47kuabmnrbkuK3np7vpmaTnlLXlrZDkuaYKICAgICAgaWYgKHRoaXMuaW5Cb29rU2hlbGYpIHsKICAgICAgICB0aGlzLnNldFNoZWxmTGlzdChyZW1vdmVGcm9tQm9va1NoZWxmKHRoaXMuYm9va0l0ZW0pKS50aGVuKCgpID0+IHsKICAgICAgICAgIC8vIOWwhuS5puaetuaVsOaNruS/neWtmOWIsExvY2FsU3RvcmFnZQogICAgICAgICAgc2F2ZUJvb2tTaGVsZih0aGlzLnNoZWxmTGlzdCkKICAgICAgICB9KQogICAgICB9IGVsc2UgewogICAgICAgIC8vIOWmguaenOeUteWtkOS5puS4jeWtmOWcqOS6juS5puaetu+8jOWImea3u+WKoOeUteWtkOS5puWIsOS5puaetgogICAgICAgIGFkZFRvU2hlbGYodGhpcy5ib29rSXRlbSkKICAgICAgICB0aGlzLnNldFNoZWxmTGlzdChnZXRCb29rU2hlbGYoKSkKICAgICAgfQogICAgfSwKICAgIC8vIOWxleekulRvYXN05by556qXCiAgICBzaG93VG9hc3QodGV4dCkgewogICAgICB0aGlzLnRvYXN0VGV4dCA9IHRleHQKICAgICAgdGhpcy4kcmVmcy50b2FzdC5zaG93KCkKICAgIH0sCiAgICAvLyDpmIXor7vnlLXlrZDkuaYKICAgIHJlYWRCb29rKCkgewogICAgICAvLyDot7PovazliLDpmIXor7vlmajpobXpnaIKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIHBhdGg6IGAvZWJvb2svJHt0aGlzLmJvb2tJdGVtLmNhdGVnb3J5VGV4dH18JHt0aGlzLmZpbGVOYW1lfWAKICAgICAgfSkKICAgIH0sCiAgICAvLyDlkKzkuaYKICAgIHRyaWFsTGlzdGVuaW5nKCkgewogICAgICAvLyDlpoLmnpznlLXlrZDkuablt7Lnu4/nvJPlrZjvvIzku45JbmRleGVkRELkuK3or7vlj5bnlLXlrZDkuaYKICAgICAgLypnZXRMb2NhbEZvcmFnZSh0aGlzLmJvb2tJdGVtLmZpbGVOYW1lLCAoZXJyLCBibG9iKSA9PiB7CiAgICAgICAgICAgICAgaWYgKCFlcnIgJiYgYmxvYiAmJiBibG9iIGluc3RhbmNlb2YgQmxvYikgewogICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgICAgICBwYXRoOiAnL3N0b3JlL3NwZWFraW5nJywKICAgICAgICAgICAgICAgICAgcXVlcnk6IHsKICAgICAgICAgICAgICAgICAgICBmaWxlTmFtZTogdGhpcy5ib29rSXRlbS5maWxlTmFtZQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAvLyDlpoLmnpzmsqHmnInnvJPlrZjvvIznm7TmjqXot7PovazliLDlkKzkuabpobXpnaIKICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgICAgcGF0aDogJy9zdG9yZS9zcGVha2luZycsCiAgICAgICAgICAgICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICAgICAgICAgICAgZmlsZU5hbWU6IHRoaXMuYm9va0l0ZW0uZmlsZU5hbWUsCiAgICAgICAgICAgICAgICAgICAgb3BmOiB0aGlzLm9wZgogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAgIAogICAgICAgICAgKi8KICAgIH0sCiAgICAvLyDpgJrov4fnq6DoioLpmIXor7vnlLXlrZDkuaYKICAgIHJlYWQoaXRlbSkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgcGF0aDogYC9lYm9vay8ke3RoaXMuY2F0ZWdvcnlUZXh0fXwke3RoaXMuZmlsZU5hbWV9YCwKICAgICAgICBxdWVyeTogewogICAgICAgICAgaHJlZjogaXRlbS5ocmVmCiAgICAgICAgfQogICAgICB9KQogICAgfSwKICAgIC8vIOeUteWtkOS5puebruW9lee8qei/m+agt+W8jwogICAgaXRlbVN0eWxlKGl0ZW0pIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBtYXJnaW5MZWZ0OiAoaXRlbS5kZWVwIC0gMSkgKiBweDJyZW0oMjApICsgJ3JlbScKICAgICAgfQogICAgfSwKICAgIC8vIOWwhuebruW9leS7juWkmue7tOi9rOS4uuS4gOe7tAogICAgZG9GbGF0TmF2aWdhdGlvbihjb250ZW50LCBkZWVwID0gMSkgewogICAgICBjb25zdCBhcnIgPSBbXQogICAgICBjb250ZW50LmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgaXRlbS5kZWVwID0gZGVlcAogICAgICAgIGFyci5wdXNoKGl0ZW0pCiAgICAgICAgaWYgKGl0ZW0uc3ViaXRlbXMgJiYgaXRlbS5zdWJpdGVtcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICBhcnIucHVzaCh0aGlzLmRvRmxhdE5hdmlnYXRpb24oaXRlbS5zdWJpdGVtcywgZGVlcCArIDEpKQogICAgICAgIH0KICAgICAgfSkKICAgICAgcmV0dXJuIGFycgogICAgfSwKICAgIC8vIOmAmui/h29wZuS4i+i9veeUteWtkOS5pu+8iOWunueOsOmAkOeroOS4i+i9ve+8jOaPkOS+m+eUteWtkOS5puiuv+mXruaAp+iDve+8iQogICAgZG93bmxvYWRCb29rKCkgewogICAgICAvLyDmi7zmjqVvcGbmlofku7bot6/lvoQKICAgICAgY29uc3Qgb3BmID0gYCR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9FUFVCX1VSTH0vJHt0aGlzLmJvb2tJdGVtLmNhdGVnb3J5VGV4dH0vJHt0aGlzLmJvb2tJdGVtLmZpbGVOYW1lfS9PRUJQUy9wYWNrYWdlLm9wZmAKICAgICAgdGhpcy5wYXJzZUJvb2sob3BmKQogICAgfSwKICAgIC8vIOino+aekOeUteWtkOS5pgogICAgcGFyc2VCb29rKHVybCkgewogICAgICAvLyDpgJrov4fnlLXlrZDkuabmiJZvcGbmlofku7bnmoR1cmznlJ/miJBCb29r5a+56LGhCiAgICAgIHRoaXMuYm9vayA9IG5ldyBFcHViKHVybCkKICAgICAgLy8g6I635Y+W55S15a2Q5Lmm55qEbWV0YWRhdGHkv6Hmga8KICAgICAgdGhpcy5ib29rLmxvYWRlZC5tZXRhZGF0YS50aGVuKG1ldGFkYXRhID0+IHsKICAgICAgICB0aGlzLm1ldGFkYXRhID0gbWV0YWRhdGEKICAgICAgfSkKICAgICAgLy8g6I635Y+W55S15a2Q5Lmm55qE55uu5b2V5L+h5oGvCiAgICAgIHRoaXMuYm9vay5sb2FkZWQubmF2aWdhdGlvbi50aGVuKG5hdiA9PiB7CiAgICAgICAgdGhpcy5uYXZpZ2F0aW9uID0gbmF2CiAgICAgICAgLy8g6YCa6L+H56ys5LqM56ug55qE55uu5b2V77yI56ys5LiA56ug6YCa5bi45piv5bCB6Z2i77yM5omA5Lul6I635Y+W56ys5LqM56ug77yJCiAgICAgICAgaWYgKHRoaXMubmF2aWdhdGlvbi50b2MgJiYgdGhpcy5uYXZpZ2F0aW9uLnRvYy5sZW5ndGggPiAxKSB7CiAgICAgICAgICAvLyDlsIbnrKzkuoznq6Dov5vooYzmuLLmn5PvvIjmuLLmn5PnmoTlhoXlrrnpmpDol4/lnKjlsY/luZXlpJbvvIznlKjmiLfmmK/nnIvkuI3op4HnmoTvvIkKICAgICAgICAgIGNvbnN0IGNhbmRpc3BsYXkgPSB0aGlzLmRpc3BsYXkodGhpcy5uYXZpZ2F0aW9uLnRvY1sxXS5ocmVmKQogICAgICAgICAgaWYgKGNhbmRpc3BsYXkpIHsKICAgICAgICAgICAgY2FuZGlzcGxheS50aGVuKHNlY3Rpb24gPT4gewogICAgICAgICAgICAgIGlmICh0aGlzLiRyZWZzLnNjcm9sbCkgewogICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5zY3JvbGwucmVmcmVzaCgpCiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHRoaXMuZGlzcGxheWVkID0gdHJ1ZQogICAgICAgICAgICAgIC8vIOa4suafk+aIkOWKn+WQjumAmui/h3NlY3Rpb27ojrflj5ZIVE1M5paH5pys77yM5bCGSFRNTOagh+etvui/m+ihjOabv+aNou+8jOaPkOWPlue6r+aWh+acrOS/oeaBrwogICAgICAgICAgICAgIGNvbnN0IHJlZyA9IG5ldyBSZWdFeHAoJzwuKz8+JywgJ2cnKQogICAgICAgICAgICAgIGNvbnN0IHRleHQgPSBzZWN0aW9uLm91dHB1dC5yZXBsYWNlKHJlZywgJycpLnJlcGxhY2UoL1xzXHMvZywgJycpCiAgICAgICAgICAgICAgLy8g5bCG57qv5paH5pys5L+h5oGv5L+d5a2Y5YiwZGVzY3JpcHRpb27lj5jph4/kuK3vvIznlKjkuo7ov5vooYzmkZjopoHkv6Hmga/lsZXnpLoKICAgICAgICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gdGV4dAogICAgICAgICAgICB9KQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSkKICAgIH0sCiAgICAvLyDnlLXlrZDkuabor6bmg4XpobXliJ3lp4vljJYKICAgIGluaXQoKSB7CiAgICAgIC8vIOiOt+WPlueUteWtkOS5puS5puWQjQogICAgICB0aGlzLmZpbGVOYW1lID0gdGhpcy4kcm91dGUucXVlcnkuZmlsZU5hbWUKICAgICAgLy8g6I635Y+W55S15a2Q5Lmm5YiG57G7CiAgICAgIHRoaXMuY2F0ZWdvcnlUZXh0ID0gdGhpcy4kcm91dGUucXVlcnkuY2F0ZWdvcnkKICAgICAgaWYgKHRoaXMuZmlsZU5hbWUpIHsKICAgICAgICAvLyDor7fmsYJBUEnvvIzojrflj5bnlLXlrZDkuabor6bmg4XmlbDmja4KICAgICAgICBkZXRhaWwoewogICAgICAgICAgZmlsZU5hbWU6IHRoaXMuZmlsZU5hbWUKICAgICAgICB9KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIGlmICgKICAgICAgICAgICAgcmVzcG9uc2Uuc3RhdHVzID09PSAyMDAgJiYKICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5lcnJvcl9jb2RlID09PSAwICYmCiAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEuZGF0YQogICAgICAgICAgKSB7CiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSByZXNwb25zZS5kYXRhLmRhdGEKICAgICAgICAgICAgLy8g5L+d5a2Y55S15a2Q5Lmm6K+m5oOF5pWw5o2uCiAgICAgICAgICAgIHRoaXMuYm9va0l0ZW0gPSBkYXRhCiAgICAgICAgICAgIC8vIOiOt+WPluWwgemdouaVsOaNrgogICAgICAgICAgICB0aGlzLmNvdmVyID0gdGhpcy5ib29rSXRlbS5jb3ZlcgogICAgICAgICAgICAvLyDojrflj5Zyb290RmlsZeaVsOaNrgogICAgICAgICAgICBsZXQgcm9vdEZpbGUgPSBkYXRhLnJvb3RGaWxlCiAgICAgICAgICAgIGlmIChyb290RmlsZS5zdGFydHNXaXRoKCcvJykpIHsKICAgICAgICAgICAgICByb290RmlsZSA9IHJvb3RGaWxlLnN1YnN0cmluZygxLCByb290RmlsZS5sZW5ndGgpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8g5qC55o2ucm9vdEZpbGXmi7zmjqXlh7pvcGbmlofku7bot6/lvoQKICAgICAgICAgICAgdGhpcy5vcGYgPSBgJHtwcm9jZXNzLmVudi5WVUVfQVBQX0VQVUJfT1BGX1VSTH0vJHt0aGlzLmZpbGVOYW1lfS8ke3Jvb3RGaWxlfWAKICAgICAgICAgICAgLy8g6Kej5p6Q55S15a2Q5LmmCiAgICAgICAgICAgIHRoaXMucGFyc2VCb29rKHRoaXMub3BmKQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8g6K+35rGC5aSx6LSl5pe25omT5Y2w6ZSZ6K+v5o+Q56S6CiAgICAgICAgICAgIHRoaXMuc2hvd1RvYXN0KHJlc3BvbnNlLmRhdGEubXNnKQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgIH0KICAgIH0sCiAgICBiYWNrKCkgewogICAgICB0aGlzLiRyb3V0ZXIuZ28oLTEpCiAgICB9LAogICAgLy8g5qC55o2u5Lyg5YWl55qE55uu5b2V5L+h5oGv77yM5riy5p+T55S15a2Q5LmmCiAgICBkaXNwbGF5KGxvY2F0aW9uKSB7CiAgICAgIGlmICh0aGlzLiRyZWZzLnByZXZpZXcpIHsKICAgICAgICBpZiAoIXRoaXMucmVuZGl0aW9uKSB7CiAgICAgICAgICB0aGlzLnJlbmRpdGlvbiA9IHRoaXMuYm9vay5yZW5kZXJUbygncHJldmlldycsIHsKICAgICAgICAgICAgd2lkdGg6IHdpbmRvdy5pbm5lcldpZHRoID4gNjQwID8gNjQwIDogd2luZG93LmlubmVyV2lkdGgsCiAgICAgICAgICAgIGhlaWdodDogd2luZG93LmlubmVySGVpZ2h0LAogICAgICAgICAgICBtZXRob2Q6ICdkZWZhdWx0JwogICAgICAgICAgfSkKICAgICAgICB9CiAgICAgICAgaWYgKCFsb2NhdGlvbikgewogICAgICAgICAgcmV0dXJuIHRoaXMucmVuZGl0aW9uLmRpc3BsYXkoKQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5yZW5kaXRpb24uZGlzcGxheShsb2NhdGlvbikKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICAvLyDlpITnkIbnlKjmiLfmu5rliqjkuovku7bvvIznoa7lrprmoIfpopjpmLTlvbHnmoTmmL7npLrnirbmgIEKICAgIG9uU2Nyb2xsKG9mZnNldFkpIHsKICAgICAgaWYgKG9mZnNldFkgPiByZWFsUHgoNDIpKSB7CiAgICAgICAgdGhpcy4kcmVmcy50aXRsZS5zaG93U2hhZG93KCkKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRyZWZzLnRpdGxlLmhpZGVTaGFkb3coKQogICAgICB9CiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5pbml0KCkKICAgIGlmICghdGhpcy5zaGVsZkxpc3QgfHwgdGhpcy5zaGVsZkxpc3QubGVuZ3RoID09PSAwKSB7CiAgICAgIHRoaXMuZ2V0U2hlbGZMaXN0KCkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["StoreDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"StoreDetail.vue","sourceRoot":"src/views/store","sourcesContent":["<!-- 电子书详情组件 -->\r\n<template>\r\n  <div class=\"book-detail\">\r\n    <detail-title @back=\"back\" :showShelf=\"true\" ref=\"title\"></detail-title>\r\n    <scroll\r\n      class=\"content-wrapper\"\r\n      :top=\"42\"\r\n      :bottom=\"52\"\r\n      @onScroll=\"onScroll\"\r\n      ref=\"scroll\"\r\n    >\r\n      <book-info :cover=\"cover\" :title=\"title\" :author=\"author\" :desc=\"desc\"></book-info>\r\n      <div class=\"book-detail-content-wrapper\">\r\n        <div class=\"book-detail-content-title\">{{$t('detail.copyright')}}</div>\r\n        <div class=\"book-detail-content-list-wrapper\">\r\n          <div class=\"book-detail-content-row\">\r\n            <div class=\"book-detail-content-label\">{{$t('detail.publisher')}}</div>\r\n            <div class=\"book-detail-content-text\">{{publisher}}</div>\r\n          </div>\r\n          <div class=\"book-detail-content-row\">\r\n            <div class=\"book-detail-content-label\">{{$t('detail.category')}}</div>\r\n            <div class=\"book-detail-content-text\">{{categoryText}}</div>\r\n          </div>\r\n          <div class=\"book-detail-content-row\">\r\n            <div class=\"book-detail-content-label\">{{$t('detail.lang')}}</div>\r\n            <div class=\"book-detail-content-text\">{{lang}}</div>\r\n          </div>\r\n          <div class=\"book-detail-content-row\">\r\n            <div class=\"book-detail-content-label\">{{$t('detail.ISBN')}}</div>\r\n            <div class=\"book-detail-content-text\">{{isbn}}</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"book-detail-content-wrapper\">\r\n        <div class=\"book-detail-content-title\">{{$t('detail.navigation')}}</div>\r\n        <div class=\"book-detail-content-list-wrapper\">\r\n          <div class=\"loading-text-wrapper\" v-if=\"!this.navigation\">\r\n            <span class=\"loading-text\">{{$t('detail.loading')}}</span>\r\n          </div>\r\n          <div class=\"book-detail-content-item-wrapper\">\r\n            <div\r\n              class=\"book-detail-content-item\"\r\n              v-for=\"(item, index) in flatNavigation\"\r\n              :key=\"index\"\r\n              @click=\"read(item)\"\r\n            >\r\n              <div\r\n                class=\"book-detail-content-navigation-text\"\r\n                :class=\"{'is-sub': item.deep> 1}\"\r\n                :style=\"itemStyle(item)\"\r\n                v-if=\"item.label\"\r\n              >{{item.label}}</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"book-detail-content-wrapper\">\r\n        <div class=\"book-detail-content-title\">{{$t('detail.trial')}}</div>\r\n        <div class=\"book-detail-content-list-wrapper\">\r\n          <div class=\"loading-text-wrapper\" v-if=\"!this.displayed\">\r\n            <span class=\"loading-text\">{{$t('detail.loading')}}</span>\r\n          </div>\r\n        </div>\r\n        <div id=\"preview\" v-show=\"this.displayed\" ref=\"preview\"></div>\r\n      </div>\r\n    </scroll>\r\n    <div class=\"bottom-wrapper\">\r\n      <div\r\n        class=\"bottom-btn\"\r\n        @click.stop.prevent=\"readBook()\"\r\n      >{{$t('detail.read')}}</div>\r\n      <div\r\n        class=\"bottom-btn\"\r\n        @click.stop.prevent=\"trialListening()\"\r\n      >{{$t('detail.listen')}}</div>\r\n      <div class=\"bottom-btn\" @click.stop.prevent=\"addOrRemoveShelf()\">\r\n        <span class=\"icon-check\" v-if=\"inBookShelf\"></span>\r\n        {{inBookShelf ? $t('detail.isAddedToShelf') : $t('detail.addOrRemoveShelf')}}\r\n      </div>\r\n    </div>\r\n    <toast :text=\"toastText\" ref=\"toast\"></toast>\r\n  </div>\r\n</template>\r\n\r\n<script type=\"text/ecmascript-6\">\r\n  import DetailTitle from '../../components/detail/DetailTitle'\r\n  import BookInfo from '../../components/detail/BookInfo'\r\n  import Scroll from '../../components/common/Scroll'\r\n  import Toast from '../../components/common/Toast'\r\n  import { detail } from '../../api/store'\r\n  import { px2rem, realPx } from '../../utils/utils'\r\n  //import { getLocalForage } from '../../utils/'\r\n  import { removeFromBookShelf, addToShelf } from '../../utils/store'\r\n  import { storeShelfMixin } from '../../utils/mixin'\r\n  import { getBookShelf, saveBookShelf } from '../../utils/localStorage'\r\n  import Epub from 'epubjs'\r\n\r\n  global.ePub = Epub\r\n\r\n  export default {\r\n    mixins: [storeShelfMixin],\r\n    components: {\r\n      DetailTitle,\r\n      Scroll,\r\n      BookInfo,\r\n      Toast\r\n    },\r\n    computed: {\r\n      // 获取电子书摘要\r\n      desc() {\r\n        if (this.description) {\r\n          return this.description.substring(0, 100)\r\n        } else {\r\n          return ''\r\n        }\r\n      },\r\n      // 将电子书目录转为一维数组\r\n      flatNavigation() {\r\n        if (this.navigation) {\r\n          return Array.prototype.concat.apply(\r\n            [],\r\n            Array.prototype.concat.apply(\r\n              [],\r\n              this.doFlatNavigation(this.navigation.toc)\r\n            )\r\n          )\r\n        } else {\r\n          return []\r\n        }\r\n      },\r\n      // 获取电子书语种\r\n      lang() {\r\n        return this.metadata ? this.metadata.language : '-'\r\n      },\r\n      // 获取电子书isbn\r\n      isbn() {\r\n        return this.metadata ? this.metadata.identifier : '-'\r\n      },\r\n      // 获取电子书出版社\r\n      publisher() {\r\n        return this.metadata ? this.metadata.publisher : '-'\r\n      },\r\n      // 获取电子书书名\r\n      title() {\r\n        return this.metadata ? this.metadata.title : ''\r\n      },\r\n      // 获取电子书作者\r\n      author() {\r\n        return this.metadata ? this.metadata.creator : ''\r\n      },\r\n      // 判断当前的电子书是否存在于书架\r\n      inBookShelf() {\r\n        if (this.bookItem && this.shelfList) {\r\n          // 定义一个自执行函数，将书架转为一维数组结构，并且只保留type为1的数据（type=1的为电子书）\r\n          const flatShelf = (function flatten(arr) {\r\n            return [].concat(\r\n              ...arr.map(v => (v.itemList ? [v, ...flatten(v.itemList)] : v))\r\n            )\r\n          })(this.shelfList).filter(item => item.type === 1)\r\n          // 查找当前电子书是否存在于书架\r\n          const book = flatShelf.filter(\r\n            item => item.fileName === this.bookItem.fileName\r\n          )\r\n          return book && book.length > 0\r\n        } else {\r\n          return false\r\n        }\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        bookItem: null,\r\n        book: null,\r\n        metadata: null,\r\n        trialRead: null,\r\n        cover: null,\r\n        navigation: null,\r\n        displayed: false,\r\n        audio: null,\r\n        randomLocation: null,\r\n        description: null,\r\n        toastText: '',\r\n        trialText: null,\r\n        categoryText: null,\r\n        opf: null\r\n      }\r\n    },\r\n    methods: {\r\n      addOrRemoveShelf() {\r\n        // 如果电子书存在于书架，则从书架中移除电子书\r\n        if (this.inBookShelf) {\r\n          this.setShelfList(removeFromBookShelf(this.bookItem)).then(() => {\r\n            // 将书架数据保存到LocalStorage\r\n            saveBookShelf(this.shelfList)\r\n          })\r\n        } else {\r\n          // 如果电子书不存在于书架，则添加电子书到书架\r\n          addToShelf(this.bookItem)\r\n          this.setShelfList(getBookShelf())\r\n        }\r\n      },\r\n      // 展示Toast弹窗\r\n      showToast(text) {\r\n        this.toastText = text\r\n        this.$refs.toast.show()\r\n      },\r\n      // 阅读电子书\r\n      readBook() {\r\n        // 跳转到阅读器页面\r\n        this.$router.push({\r\n          path: `/ebook/${this.bookItem.categoryText}|${this.fileName}`\r\n        })\r\n      },\r\n      // 听书\r\n      trialListening() {\r\n        // 如果电子书已经缓存，从IndexedDB中读取电子书\r\n        /*getLocalForage(this.bookItem.fileName, (err, blob) => {\r\n                if (!err && blob && blob instanceof Blob) {\r\n                  this.$router.push({\r\n                    path: '/store/speaking',\r\n                    query: {\r\n                      fileName: this.bookItem.fileName\r\n                    }\r\n                  })\r\n                } else {\r\n                  // 如果没有缓存，直接跳转到听书页面\r\n                  this.$router.push({\r\n                    path: '/store/speaking',\r\n                    query: {\r\n                      fileName: this.bookItem.fileName,\r\n                      opf: this.opf\r\n                    }\r\n                  })\r\n                }\r\n              })\r\n            \r\n            */\r\n      },\r\n      // 通过章节阅读电子书\r\n      read(item) {\r\n        this.$router.push({\r\n          path: `/ebook/${this.categoryText}|${this.fileName}`,\r\n          query: {\r\n            href: item.href\r\n          }\r\n        })\r\n      },\r\n      // 电子书目录缩进样式\r\n      itemStyle(item) {\r\n        return {\r\n          marginLeft: (item.deep - 1) * px2rem(20) + 'rem'\r\n        }\r\n      },\r\n      // 将目录从多维转为一维\r\n      doFlatNavigation(content, deep = 1) {\r\n        const arr = []\r\n        content.forEach(item => {\r\n          item.deep = deep\r\n          arr.push(item)\r\n          if (item.subitems && item.subitems.length > 0) {\r\n            arr.push(this.doFlatNavigation(item.subitems, deep + 1))\r\n          }\r\n        })\r\n        return arr\r\n      },\r\n      // 通过opf下载电子书（实现逐章下载，提供电子书访问性能）\r\n      downloadBook() {\r\n        // 拼接opf文件路径\r\n        const opf = `${process.env.VUE_APP_EPUB_URL}/${this.bookItem.categoryText}/${this.bookItem.fileName}/OEBPS/package.opf`\r\n        this.parseBook(opf)\r\n      },\r\n      // 解析电子书\r\n      parseBook(url) {\r\n        // 通过电子书或opf文件的url生成Book对象\r\n        this.book = new Epub(url)\r\n        // 获取电子书的metadata信息\r\n        this.book.loaded.metadata.then(metadata => {\r\n          this.metadata = metadata\r\n        })\r\n        // 获取电子书的目录信息\r\n        this.book.loaded.navigation.then(nav => {\r\n          this.navigation = nav\r\n          // 通过第二章的目录（第一章通常是封面，所以获取第二章）\r\n          if (this.navigation.toc && this.navigation.toc.length > 1) {\r\n            // 将第二章进行渲染（渲染的内容隐藏在屏幕外，用户是看不见的）\r\n            const candisplay = this.display(this.navigation.toc[1].href)\r\n            if (candisplay) {\r\n              candisplay.then(section => {\r\n                if (this.$refs.scroll) {\r\n                  this.$refs.scroll.refresh()\r\n                }\r\n                this.displayed = true\r\n                // 渲染成功后通过section获取HTML文本，将HTML标签进行替换，提取纯文本信息\r\n                const reg = new RegExp('<.+?>', 'g')\r\n                const text = section.output.replace(reg, '').replace(/\\s\\s/g, '')\r\n                // 将纯文本信息保存到description变量中，用于进行摘要信息展示\r\n                this.description = text\r\n              })\r\n            }\r\n          }\r\n        })\r\n      },\r\n      // 电子书详情页初始化\r\n      init() {\r\n        // 获取电子书书名\r\n        this.fileName = this.$route.query.fileName\r\n        // 获取电子书分类\r\n        this.categoryText = this.$route.query.category\r\n        if (this.fileName) {\r\n          // 请求API，获取电子书详情数据\r\n          detail({\r\n            fileName: this.fileName\r\n          }).then(response => {\r\n            if (\r\n              response.status === 200 &&\r\n              response.data.error_code === 0 &&\r\n              response.data.data\r\n            ) {\r\n              const data = response.data.data\r\n              // 保存电子书详情数据\r\n              this.bookItem = data\r\n              // 获取封面数据\r\n              this.cover = this.bookItem.cover\r\n              // 获取rootFile数据\r\n              let rootFile = data.rootFile\r\n              if (rootFile.startsWith('/')) {\r\n                rootFile = rootFile.substring(1, rootFile.length)\r\n              }\r\n              // 根据rootFile拼接出opf文件路径\r\n              this.opf = `${process.env.VUE_APP_EPUB_OPF_URL}/${this.fileName}/${rootFile}`\r\n              // 解析电子书\r\n              this.parseBook(this.opf)\r\n            } else {\r\n              // 请求失败时打印错误提示\r\n              this.showToast(response.data.msg)\r\n            }\r\n          })\r\n        }\r\n      },\r\n      back() {\r\n        this.$router.go(-1)\r\n      },\r\n      // 根据传入的目录信息，渲染电子书\r\n      display(location) {\r\n        if (this.$refs.preview) {\r\n          if (!this.rendition) {\r\n            this.rendition = this.book.renderTo('preview', {\r\n              width: window.innerWidth > 640 ? 640 : window.innerWidth,\r\n              height: window.innerHeight,\r\n              method: 'default'\r\n            })\r\n          }\r\n          if (!location) {\r\n            return this.rendition.display()\r\n          } else {\r\n            return this.rendition.display(location)\r\n          }\r\n        }\r\n      },\r\n      // 处理用户滚动事件，确定标题阴影的显示状态\r\n      onScroll(offsetY) {\r\n        if (offsetY > realPx(42)) {\r\n          this.$refs.title.showShadow()\r\n        } else {\r\n          this.$refs.title.hideShadow()\r\n        }\r\n      }\r\n    },\r\n    mounted() {\r\n      this.init()\r\n      if (!this.shelfList || this.shelfList.length === 0) {\r\n        this.getShelfList()\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\" rel=\"stylesheet/scss\" scoped>\r\n  @import '../../assets/styles/global';\r\n\r\n  .book-detail {\r\n    width: 100%;\r\n    background: white;\r\n    .content-wrapper {\r\n      width: 100%;\r\n      .book-detail-content-wrapper {\r\n        width: 100%;\r\n        border-bottom: px2rem(1) solid #eee;\r\n        box-sizing: border-box;\r\n        .book-detail-content-title {\r\n          font-size: px2rem(20);\r\n          font-weight: bold;\r\n          padding: px2rem(20) px2rem(15) px2rem(10) px2rem(15);\r\n          box-sizing: border-box;\r\n        }\r\n        .book-detail-content-list-wrapper {\r\n          padding: px2rem(10) px2rem(15);\r\n          box-sizing: border-box;\r\n          .loading-text-wrapper {\r\n            width: 100%;\r\n            .loading-text {\r\n              font-size: px2rem(14);\r\n              color: #666;\r\n            }\r\n          }\r\n          .book-detail-content-row {\r\n            display: flex;\r\n            box-sizing: border-box;\r\n            margin-bottom: px2rem(10);\r\n            .book-detail-content-label {\r\n              flex: 0 0 px2rem(70);\r\n              font-size: px2rem(14);\r\n              color: #666;\r\n            }\r\n            .book-detail-content-text {\r\n              flex: 1;\r\n              font-size: px2rem(14);\r\n              color: #333;\r\n            }\r\n          }\r\n          #preview {\r\n          }\r\n          .book-detail-content-item-wrapper {\r\n            .book-detail-content-item {\r\n              padding: px2rem(15) 0;\r\n              font-size: px2rem(14);\r\n              line-height: px2rem(16);\r\n              color: #666;\r\n              border-bottom: px2rem(1) solid #eee;\r\n              &:last-child {\r\n                border-bottom: none;\r\n              }\r\n              .book-detail-content-navigation-text {\r\n                width: 100%;\r\n                @include ellipsis;\r\n                &.is-sub {\r\n                  color: #666;\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n      .audio-wrapper {\r\n        width: 100%;\r\n        padding: px2rem(15);\r\n        box-sizing: border-box;\r\n        #audio {\r\n          width: 100%;\r\n        }\r\n      }\r\n    }\r\n    .bottom-wrapper {\r\n      position: fixed;\r\n      bottom: 0;\r\n      left: 0;\r\n      z-index: 120;\r\n      display: flex;\r\n      width: 100%;\r\n      height: px2rem(52);\r\n      box-shadow: 0 px2rem(-2) px2rem(2) rgba(0, 0, 0, 0.1);\r\n      .bottom-btn {\r\n        flex: 1;\r\n        color: $color-blue;\r\n        font-weight: bold;\r\n        font-size: px2rem(14);\r\n        @include center;\r\n        &:active {\r\n          color: $color-blue-transparent;\r\n        }\r\n        .icon-check {\r\n          margin-right: px2rem(5);\r\n        }\r\n      }\r\n      &.hide-shadow {\r\n        box-shadow: none;\r\n      }\r\n    }\r\n  }\r\n</style>"]}]}