{"remainingRequest":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\src\\components\\home\\FlapCard.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\src\\components\\home\\FlapCard.vue","mtime":1588474929131},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGhvbWVNaXhpbiB9IGZyb20gJy4uLy4uL3V0aWxzL21peGluJwppbXBvcnQgeyBmbGFwQ2FyZExpc3QsIGNhdGVnb3J5VGV4dCB9IGZyb20gJy4uLy4uL3V0aWxzL3N0b3JlJwpleHBvcnQgZGVmYXVsdCB7CiAgbWl4aW5zOiBbaG9tZU1peGluXSwKICBwcm9wczogewogICAgZGF0YTogT2JqZWN0CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZmxhcENhcmRMaXN0LAogICAgICBmcm9udDogMCwKICAgICAgYmFjazogMSwKICAgICAgaW50ZXJ2YWw6IDMwLAogICAgICBydW5GbGFwQ2FyZEFuaW1hdGlvbjogZmFsc2UsCiAgICAgIHJ1blBvaW50QW5pbWF0aW9uOiBmYWxzZSwKICAgICAgcnVuQm9va0NhcmRBbmltYXRpb246IGZhbHNlLAogICAgICBwb2ludExpc3Q6IFtdCiAgICB9CiAgfSwKICB3YXRjaDogewogICAgZmxhcENhcmRWaXNpYmxlKHYpIHsKICAgICAgaWYgKHYpIHsKICAgICAgICB0aGlzLnJ1bkFuaW1hdGlvbigpCiAgICAgIH0KICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDE4OyBpKyspIHsKICAgICAgdGhpcy5wb2ludExpc3QucHVzaChgcG9pbnQke2l9YCkKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHJ1bkFuaW1hdGlvbigpIHsKICAgICAgdGhpcy5ydW5GbGFwQ2FyZEFuaW1hdGlvbiA9IHRydWUKICAgICAgdGhpcy5zdGFydCA9IHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIHRoaXMuc3RyYXJ0RmxhcENhcmRBbmltYXRpb24oKQogICAgICAgIHRoaXMuc3RhcnRQb2ludEFuaW1hdGlvbigpCiAgICAgIH0sIDMwMCkKICAgICAgdGhpcy5zdG9wID0gc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgdGhpcy5zdG9wQW5pbWF0aW9uKCkKICAgICAgICB0aGlzLnJ1bkJvb2tDYXJkQW5pbWF0aW9uID0gdHJ1ZQogICAgICB9LCAyNTAwKQogICAgfSwKICAgIHN0YXJ0UG9pbnRBbmltYXRpb24oKSB7CiAgICAgIHRoaXMucnVuUG9pbnRBbmltYXRpb24gPSB0cnVlCiAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIHRoaXMucnVuUG9pbnRBbmltYXRpb24gPSBmYWxzZQogICAgICB9LCA3NTApCiAgICB9LAogICAgY2xvc2UoKSB7CiAgICAgIHRoaXMuc2V0RmxhcENhcmRWaXNpYmxlKGZhbHNlKQogICAgICB0aGlzLnN0b3BBbmltYXRpb24oKQogICAgICBpZiAodGhpcy5zdGFydCkgewogICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5zdGFydCkKICAgICAgfQogICAgICBpZiAodGhpcy5zdG9wKSB7CiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnN0b3ApCiAgICAgIH0KICAgIH0sCiAgICBzZW1pQ2lyY2xlU3R5bGUoaXRlbSwgaXNsZWZ0KSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgYmFja2dyb3VuZENvbG9yOiBgcmdiKCR7aXRlbS5yfSwke2l0ZW0uZ30sJHtpdGVtLmJ9KWAsCiAgICAgICAgYmFja2dyb3VuZFNpemU6IGl0ZW0uYmFja2dyb3VuZFNpemUsCiAgICAgICAgYmFja2dyb3VuZEltYWdlOiBpc2xlZnQgPT09ICdsZWZ0JyA/IGl0ZW0uaW1nTGVmdCA6IGl0ZW0uaW1nUmlnaHQKICAgICAgfQogICAgfSwKICAgIHJvdGF0ZShpbmRleCwgdHlwZSkgewogICAgICAvL3R5cGU65q2j6Z2i55qE5ZyGb3Llj43pnaLnmoTlnIYKICAgICAgY29uc3QgaXRlbSA9IHRoaXMuZmxhcENhcmRMaXN0W2luZGV4XQogICAgICBsZXQgZG9tCiAgICAgIGlmICh0eXBlID09PSAnZnJvbnQnKSB7CiAgICAgICAgZG9tID0gdGhpcy4kcmVmcy5yaWdodFtpbmRleF0KICAgICAgfSBlbHNlIHsKICAgICAgICBkb20gPSB0aGlzLiRyZWZzLmxlZnRbaW5kZXhdCiAgICAgIH0KICAgICAgZG9tLnN0eWxlLnRyYW5zZm9ybSA9IGByb3RhdGVZKCR7aXRlbS5yb3RhdGVEZWdyZWV9ZGVnKWAKICAgICAgZG9tLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGByZ2IoJHtpdGVtLnJ9LCR7aXRlbS5fZ30sJHtpdGVtLmJ9KWAKICAgICAgLy9fZ+eUqOadpeaUueWPmOminOiJsu+8jGfnlKjmnaXov5jljp/popzoibIKICAgIH0sCiAgICBuZXh0KCkgewogICAgICBjb25zdCBmcm9udEZsYXBDYXJkID0gdGhpcy5mbGFwQ2FyZExpc3RbdGhpcy5mcm9udF0KICAgICAgY29uc3QgYmFja0ZsYXBDYXJkID0gdGhpcy5mbGFwQ2FyZExpc3RbdGhpcy5iYWNrXQogICAgICBmcm9udEZsYXBDYXJkLnJvdGF0ZURlZ3JlZSA9IDAKICAgICAgYmFja0ZsYXBDYXJkLnJvdGF0ZURlZ3JlZSA9IDAKICAgICAgZnJvbnRGbGFwQ2FyZC5fZyA9IGZyb250RmxhcENhcmQuZwogICAgICBiYWNrRmxhcENhcmQuX2cgPSBiYWNrRmxhcENhcmQuZwogICAgICB0aGlzLnJvdGF0ZSh0aGlzLmZyb250LCAnZnJvbnQnKQogICAgICB0aGlzLnJvdGF0ZSh0aGlzLmJhY2ssICdiYWNrJykKICAgICAgdGhpcy5mcm9udCsrCiAgICAgIHRoaXMuYmFjaysrCiAgICAgIGNvbnN0IGxlbiA9IHRoaXMuZmxhcENhcmRMaXN0Lmxlbmd0aAogICAgICBpZiAodGhpcy5mcm9udCA+PSBsZW4pIHsKICAgICAgICB0aGlzLmZyb250ID0gMAogICAgICB9CiAgICAgIGlmICh0aGlzLmJhY2sgPj0gbGVuKSB7CiAgICAgICAgdGhpcy5iYWNrID0gMAogICAgICB9CiAgICAgIC8vIOWKqOaAgeiuvue9rnpJbmRleAogICAgICAvLyAxMDAgLT4gOTYKICAgICAgLy8gOTkgLT4gMTAwCiAgICAgIC8vIDk4IC0+IDk5CiAgICAgIC8vIDk3IC0+IDk4CiAgICAgIC8vIDk2IC0+IDk3CiAgICAgIC8vICgwIC0gMSArIDUpICUgNSA9IDQKICAgICAgLy8gKDEgLSAxICsgNSkgJSA1ID0gMAogICAgICB0aGlzLmZsYXBDYXJkTGlzdC5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4gewogICAgICAgIGl0ZW0uekluZGV4ID0gMTAwIC0gKChpbmRleCAtIHRoaXMuZnJvbnQgKyBsZW4pICUgbGVuKQogICAgICB9KQogICAgICB0aGlzLnByZXBhcmUoKQogICAgfSwKICAgIGZsYXBDYXJkUm90YXRlKCkgewogICAgICBjb25zdCBmcm9udEZsYXBDYXJkID0gdGhpcy5mbGFwQ2FyZExpc3RbdGhpcy5mcm9udF0KICAgICAgY29uc3QgYmFja0ZsYXBDYXJkID0gdGhpcy5mbGFwQ2FyZExpc3RbdGhpcy5iYWNrXQogICAgICBmcm9udEZsYXBDYXJkLnJvdGF0ZURlZ3JlZSArPSAxMAogICAgICBmcm9udEZsYXBDYXJkLl9nIC09IDUKICAgICAgYmFja0ZsYXBDYXJkLnJvdGF0ZURlZ3JlZSAtPSAxMAogICAgICBpZiAoYmFja0ZsYXBDYXJkLnJvdGF0ZURlZ3JlZSA8PSA5MCkgewogICAgICAgIGJhY2tGbGFwQ2FyZC5fZyArPSA1CiAgICAgIH0KICAgICAgaWYgKAogICAgICAgIGZyb250RmxhcENhcmQucm90YXRlRGVncmVlID09PSA5MCAmJgogICAgICAgIGJhY2tGbGFwQ2FyZC5yb3RhdGVEZWdyZWUgPT09IDkwCiAgICAgICkgewogICAgICAgIGJhY2tGbGFwQ2FyZC56SW5kZXggKz0gMgogICAgICB9CiAgICAgIHRoaXMucm90YXRlKHRoaXMuZnJvbnQsICdmcm9udCcpCiAgICAgIHRoaXMucm90YXRlKHRoaXMuYmFjaywgJ2JhY2snKQogICAgICBpZiAoCiAgICAgICAgZnJvbnRGbGFwQ2FyZC5yb3RhdGVEZWdyZWUgPT09IDE4MCAmJgogICAgICAgIGJhY2tGbGFwQ2FyZC5yb3RhdGVEZWdyZWUgPT09IDAKICAgICAgKSB7CiAgICAgICAgdGhpcy5uZXh0KCkKICAgICAgfQogICAgfSwKICAgIHByZXBhcmUoKSB7CiAgICAgIGNvbnN0IGJhY2tGbGFwQ2FyZCA9IHRoaXMuZmxhcENhcmRMaXN0W3RoaXMuYmFja10KICAgICAgYmFja0ZsYXBDYXJkLnJvdGF0ZURlZ3JlZSA9IDE4MAogICAgICBiYWNrRmxhcENhcmQuX2cgPSBiYWNrRmxhcENhcmQuZyAtIDUgKiA5CiAgICAgIHRoaXMucm90YXRlKHRoaXMuYmFjaywgJ2JhY2snKQogICAgfSwKICAgIHN0cmFydEZsYXBDYXJkQW5pbWF0aW9uKCkgewogICAgICB0aGlzLnByZXBhcmUoKQogICAgICB0aGlzLnRhc2sgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgdGhpcy5mbGFwQ2FyZFJvdGF0ZSgpCiAgICAgIH0sIHRoaXMuaW50ZXJ2YWwpCiAgICB9LAogICAgc3RvcEFuaW1hdGlvbigpIHsKICAgICAgdGhpcy5ydW5GbGFwQ2FyZEFuaW1hdGlvbiA9IGZhbHNlCiAgICAgIGlmICh0aGlzLnRhc2spIHsKICAgICAgICBjbGVhckludGVydmFsKHRoaXMudGFzaykKICAgICAgfQogICAgICB0aGlzLnJlc2V0KCkKICAgIH0sCiAgICByZXNldCgpIHsKICAgICAgdGhpcy5mcm9udCA9IDAKICAgICAgdGhpcy5iYWNrID0gMQogICAgICB0aGlzLmZsYXBDYXJkTGlzdC5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4gewogICAgICAgIGl0ZW0uekluZGV4ID0gMTAwIC0gaW5kZXgKICAgICAgICBpdGVtLl9nID0gaXRlbS5nCiAgICAgICAgaXRlbS5yb3RhdGVEZWdyZWUgPSAwCiAgICAgICAgdGhpcy5yb3RhdGUoaW5kZXgsICdmcm9udCcpCiAgICAgICAgdGhpcy5yb3RhdGUoaW5kZXgsICdiYWNrJykKICAgICAgfSkKICAgICAgdGhpcy5ydW5GbGFwQ2FyZEFuaW1hdGlvbiA9IGZhbHNlCiAgICAgIHRoaXMucnVuUG9pbnRBbmltYXRpb24gPSBmYWxzZQogICAgICB0aGlzLnJ1bkJvb2tDYXJkQW5pbWF0aW9uID0gZmFsc2UKICAgIH0sCiAgICBjYXRlZ29yeVRleHQoKSB7CiAgICAgIGlmICh0aGlzLmRhdGEpIHsKICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmRhdGEuY292ZXIpCiAgICAgICAgY2F0ZWdvcnlUZXh0KHRoaXMuZGF0YS5jYXRlZ29yeSwgdGhpcykKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gJycKICAgICAgfQogICAgfQogIH0sCiAgbW91bnRlZCgpIHt9Cn0K"},{"version":3,"sources":["FlapCard.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"FlapCard.vue","sourceRoot":"src/components/home","sourcesContent":["<template>\r\n  <div class=\"flap-card-wrapper\" v-show=\"flapCardVisible\">\r\n    <div\r\n      class=\"flap-card-bg\"\r\n      :class=\"{ animation: runFlapCardAnimation }\"\r\n      v-show=\"runFlapCardAnimation\"\r\n    >\r\n      <div\r\n        class=\"flap-card\"\r\n        v-for=\"(item, index) in flapCardList\"\r\n        :key=\"index\"\r\n        :style=\"{ zIndex: item.zIndex }\"\r\n      >\r\n        <div class=\"flap-card-circle\">\r\n          <div\r\n            class=\"flap-card-semi-circle flap-card-semi-circle-left\"\r\n            :style=\"semiCircleStyle(item, 'left')\"\r\n            ref=\"left\"\r\n          ></div>\r\n          <div\r\n            class=\"flap-card-semi-circle flap-card-semi-circle-right\"\r\n            :style=\"semiCircleStyle(item, 'right')\"\r\n            ref=\"right\"\r\n          ></div>\r\n        </div>\r\n      </div>\r\n      <div class=\"point-wrapper\">\r\n        <div\r\n          class=\"point\"\r\n          v-for=\"(item, index) in pointList\"\r\n          :key=\"index\"\r\n          :class=\"{ animation: runPointAnimation }\"\r\n        ></div>\r\n      </div>\r\n    </div>\r\n    <div\r\n      class=\"book-card\"\r\n      :class=\"{ animation: runBookCardAnimation }\"\r\n      v-show=\"runBookCardAnimation\"\r\n    >\r\n      <div class=\"book-card-wrapper\">\r\n        <div class=\"img-wrapper\">\r\n          <img class=\"img\" :src=\"data ? data.cover : ''\" />\r\n        </div>\r\n        <div class=\"content-wrapper\">\r\n          <div class=\"content-title\">{{ data ? data.title : \"\" }}</div>\r\n          <div\r\n            class=\"content-author sub-title-medium\"\r\n          >{{ data ? data.author : \"\" }}</div>\r\n          <div class=\"content-category\">{{ categoryText() }}</div>\r\n        </div>\r\n        <div\r\n          class=\"read-btn\"\r\n          @click.stop=\"showBookDetail(data)\"\r\n        >{{ $t(\"home.readNow\") }}</div>\r\n      </div>\r\n    </div>\r\n    <div class=\"close-button-wrapper\" @click=\"close\">\r\n      <span class=\"icon-close\"></span>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n  import { homeMixin } from '../../utils/mixin'\r\n  import { flapCardList, categoryText } from '../../utils/store'\r\n  export default {\r\n    mixins: [homeMixin],\r\n    props: {\r\n      data: Object\r\n    },\r\n    data() {\r\n      return {\r\n        flapCardList,\r\n        front: 0,\r\n        back: 1,\r\n        interval: 30,\r\n        runFlapCardAnimation: false,\r\n        runPointAnimation: false,\r\n        runBookCardAnimation: false,\r\n        pointList: []\r\n      }\r\n    },\r\n    watch: {\r\n      flapCardVisible(v) {\r\n        if (v) {\r\n          this.runAnimation()\r\n        }\r\n      }\r\n    },\r\n    created() {\r\n      for (let i = 0; i < 18; i++) {\r\n        this.pointList.push(`point${i}`)\r\n      }\r\n    },\r\n    methods: {\r\n      runAnimation() {\r\n        this.runFlapCardAnimation = true\r\n        this.start = setTimeout(() => {\r\n          this.strartFlapCardAnimation()\r\n          this.startPointAnimation()\r\n        }, 300)\r\n        this.stop = setTimeout(() => {\r\n          this.stopAnimation()\r\n          this.runBookCardAnimation = true\r\n        }, 2500)\r\n      },\r\n      startPointAnimation() {\r\n        this.runPointAnimation = true\r\n        setTimeout(() => {\r\n          this.runPointAnimation = false\r\n        }, 750)\r\n      },\r\n      close() {\r\n        this.setFlapCardVisible(false)\r\n        this.stopAnimation()\r\n        if (this.start) {\r\n          clearInterval(this.start)\r\n        }\r\n        if (this.stop) {\r\n          clearInterval(this.stop)\r\n        }\r\n      },\r\n      semiCircleStyle(item, isleft) {\r\n        return {\r\n          backgroundColor: `rgb(${item.r},${item.g},${item.b})`,\r\n          backgroundSize: item.backgroundSize,\r\n          backgroundImage: isleft === 'left' ? item.imgLeft : item.imgRight\r\n        }\r\n      },\r\n      rotate(index, type) {\r\n        //type:正面的圆or反面的圆\r\n        const item = this.flapCardList[index]\r\n        let dom\r\n        if (type === 'front') {\r\n          dom = this.$refs.right[index]\r\n        } else {\r\n          dom = this.$refs.left[index]\r\n        }\r\n        dom.style.transform = `rotateY(${item.rotateDegree}deg)`\r\n        dom.style.backgroundColor = `rgb(${item.r},${item._g},${item.b})`\r\n        //_g用来改变颜色，g用来还原颜色\r\n      },\r\n      next() {\r\n        const frontFlapCard = this.flapCardList[this.front]\r\n        const backFlapCard = this.flapCardList[this.back]\r\n        frontFlapCard.rotateDegree = 0\r\n        backFlapCard.rotateDegree = 0\r\n        frontFlapCard._g = frontFlapCard.g\r\n        backFlapCard._g = backFlapCard.g\r\n        this.rotate(this.front, 'front')\r\n        this.rotate(this.back, 'back')\r\n        this.front++\r\n        this.back++\r\n        const len = this.flapCardList.length\r\n        if (this.front >= len) {\r\n          this.front = 0\r\n        }\r\n        if (this.back >= len) {\r\n          this.back = 0\r\n        }\r\n        // 动态设置zIndex\r\n        // 100 -> 96\r\n        // 99 -> 100\r\n        // 98 -> 99\r\n        // 97 -> 98\r\n        // 96 -> 97\r\n        // (0 - 1 + 5) % 5 = 4\r\n        // (1 - 1 + 5) % 5 = 0\r\n        this.flapCardList.forEach((item, index) => {\r\n          item.zIndex = 100 - ((index - this.front + len) % len)\r\n        })\r\n        this.prepare()\r\n      },\r\n      flapCardRotate() {\r\n        const frontFlapCard = this.flapCardList[this.front]\r\n        const backFlapCard = this.flapCardList[this.back]\r\n        frontFlapCard.rotateDegree += 10\r\n        frontFlapCard._g -= 5\r\n        backFlapCard.rotateDegree -= 10\r\n        if (backFlapCard.rotateDegree <= 90) {\r\n          backFlapCard._g += 5\r\n        }\r\n        if (\r\n          frontFlapCard.rotateDegree === 90 &&\r\n          backFlapCard.rotateDegree === 90\r\n        ) {\r\n          backFlapCard.zIndex += 2\r\n        }\r\n        this.rotate(this.front, 'front')\r\n        this.rotate(this.back, 'back')\r\n        if (\r\n          frontFlapCard.rotateDegree === 180 &&\r\n          backFlapCard.rotateDegree === 0\r\n        ) {\r\n          this.next()\r\n        }\r\n      },\r\n      prepare() {\r\n        const backFlapCard = this.flapCardList[this.back]\r\n        backFlapCard.rotateDegree = 180\r\n        backFlapCard._g = backFlapCard.g - 5 * 9\r\n        this.rotate(this.back, 'back')\r\n      },\r\n      strartFlapCardAnimation() {\r\n        this.prepare()\r\n        this.task = setInterval(() => {\r\n          this.flapCardRotate()\r\n        }, this.interval)\r\n      },\r\n      stopAnimation() {\r\n        this.runFlapCardAnimation = false\r\n        if (this.task) {\r\n          clearInterval(this.task)\r\n        }\r\n        this.reset()\r\n      },\r\n      reset() {\r\n        this.front = 0\r\n        this.back = 1\r\n        this.flapCardList.forEach((item, index) => {\r\n          item.zIndex = 100 - index\r\n          item._g = item.g\r\n          item.rotateDegree = 0\r\n          this.rotate(index, 'front')\r\n          this.rotate(index, 'back')\r\n        })\r\n        this.runFlapCardAnimation = false\r\n        this.runPointAnimation = false\r\n        this.runBookCardAnimation = false\r\n      },\r\n      categoryText() {\r\n        if (this.data) {\r\n          console.log(this.data.cover)\r\n          categoryText(this.data.category, this)\r\n        } else {\r\n          return ''\r\n        }\r\n      }\r\n    },\r\n    mounted() {}\r\n  }\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n  @import '../../assets/styles/global.scss';\r\n  @import '../../assets/styles/flapCard.scss';\r\n\r\n  .flap-card-wrapper {\r\n    @include absCenter;\r\n    background: rgba(0, 0, 0, 0.6);\r\n    z-index: 300;\r\n    height: 100%;\r\n    width: 100%;\r\n    @include center;\r\n    .flap-card-bg {\r\n      width: px2rem(64);\r\n      height: px2rem(64);\r\n      border-radius: px2rem(5);\r\n      background: white;\r\n      position: relative;\r\n      transform: scale(0);\r\n      opacity: 0;\r\n      &.animation {\r\n        animation: flap-card-move 0.3s ease-in both;\r\n      }\r\n      @keyframes flap-card-move {\r\n        0% {\r\n          transform: scale(0);\r\n          opacity: 0;\r\n        }\r\n        50% {\r\n          transform: scale(1.2);\r\n          opacity: 1;\r\n        }\r\n        75% {\r\n          transform: scale(0.9);\r\n          opacity: 1;\r\n        }\r\n        100% {\r\n          transform: scale(1);\r\n          opacity: 1;\r\n        }\r\n      }\r\n      .point-wrapper {\r\n        @include absCenter;\r\n        z-index: 400;\r\n        .point {\r\n          border-radius: 50%;\r\n          @include absCenter;\r\n          &.animation {\r\n            @for $i from 1 to length($moves) {\r\n              &:nth-child(#{$i}) {\r\n                @include move($i);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n      .flap-card {\r\n        width: px2rem(48);\r\n        height: px2rem(48);\r\n        @include absCenter;\r\n        .flap-card-circle {\r\n          height: 100%;\r\n          width: 100%;\r\n          display: flex;\r\n          .flap-card-semi-circle {\r\n            flex: 0 0 50%;\r\n            height: 100%;\r\n            width: 50%;\r\n            background-repeat: no-repeat;\r\n            backface-visibility: hidden;\r\n          }\r\n          .flap-card-semi-circle-left {\r\n            border-radius: px2rem(24) 0 0 px2rem(24);\r\n            background-position: center right;\r\n            transform-origin: right;\r\n          }\r\n          .flap-card-semi-circle-right {\r\n            border-radius: 0 px2rem(24) px2rem(24) 0;\r\n            background-position: center left;\r\n            transform-origin: left;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    .book-card {\r\n      position: relative;\r\n      width: 65%;\r\n      max-width: px2rem(400);\r\n      box-sizing: border-box;\r\n      border-radius: px2rem(15);\r\n      background: white;\r\n      &.animation {\r\n        animation: scale 0.3s ease-in both;\r\n        @keyframes scale {\r\n          0% {\r\n            transform: scale(0);\r\n            opacity: 0;\r\n          }\r\n          100% {\r\n            transform: scale(1);\r\n            opacity: 1;\r\n          }\r\n        }\r\n      }\r\n      .book-card-wrapper {\r\n        width: 100%;\r\n        height: 100%;\r\n        margin-bottom: px2rem(35);\r\n        @include columnTop;\r\n        .img-wrapper {\r\n          width: 100%;\r\n          margin-top: px2rem(20);\r\n          @include center;\r\n          .img {\r\n            width: px2rem(90);\r\n            height: px2rem(130);\r\n          }\r\n        }\r\n        .content-wrapper {\r\n          padding: 0 px2rem(20);\r\n          margin-top: px2rem(20);\r\n          .content-title {\r\n            color: #333;\r\n            font-weight: bold;\r\n            font-size: px2rem(16);\r\n            line-height: px2rem(20);\r\n            max-height: px2rem(40);\r\n            text-align: center;\r\n            @include ellipsis2(2);\r\n          }\r\n          .content-author {\r\n            margin-top: px2rem(10);\r\n            font-size: px2rem(14);\r\n            text-align: center;\r\n          }\r\n          .content-category {\r\n            color: #999;\r\n            font-size: px2rem(14);\r\n            margin-top: px2rem(10);\r\n            text-align: center;\r\n          }\r\n        }\r\n        .read-btn {\r\n          position: absolute;\r\n          bottom: 0;\r\n          left: 0;\r\n          z-index: 1100;\r\n          width: 100%;\r\n          border-radius: 0 0 px2rem(15) px2rem(15);\r\n          padding: px2rem(12) 0;\r\n          text-align: center;\r\n          color: white;\r\n          font-size: px2rem(14);\r\n          background: $color-blue;\r\n        }\r\n      }\r\n    }\r\n    .close-button-wrapper {\r\n      position: absolute;\r\n      right: 0;\r\n      bottom: px2rem(30);\r\n      z-index: 320;\r\n      width: 100%;\r\n      @include center;\r\n      .icon-close {\r\n        width: px2rem(45);\r\n        height: px2rem(45);\r\n        font-size: px2rem(25);\r\n        border-radius: 50%;\r\n        background: #333;\r\n        color: white;\r\n        @include center;\r\n      }\r\n    }\r\n  }\r\n</style>\r\n"]}]}