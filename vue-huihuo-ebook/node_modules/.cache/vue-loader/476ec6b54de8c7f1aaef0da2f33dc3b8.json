{"remainingRequest":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\src\\components\\shelf\\ShelfGroupDialog.vue?vue&type=style&index=0&id=d9998f14&lang=scss&rel=stylesheet%2Fscss&scoped=true&","dependencies":[{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\src\\components\\shelf\\ShelfGroupDialog.vue","mtime":1588736485906},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCkBpbXBvcnQgJy4uLy4uL2Fzc2V0cy9zdHlsZXMvZ2xvYmFsJzsKCi5kaWFsb2ctbGlzdC13cmFwcGVyIHsKICB3aWR0aDogMTAwJTsKICBwYWRkaW5nOiAwIHB4MnJlbSgyMCk7CiAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICBmb250LXNpemU6IHB4MnJlbSgxNCk7CiAgQGluY2x1ZGUgc2Nyb2xsOwogIC5kaWFsb2ctbGlzdC1pdGVtIHsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBwYWRkaW5nOiBweDJyZW0oMTUpIDA7CiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgY29sb3I6ICM2NjY7CiAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICAmLmlzLWFkZCB7CiAgICAgIGNvbG9yOiAkY29sb3ItYmx1ZTsKICAgICAgJjphY3RpdmUgewogICAgICAgIGNvbG9yOiAkY29sb3ItYmx1ZS10cmFuc3BhcmVudDsKICAgICAgfQogICAgfQogICAgJjphY3RpdmUgewogICAgICBjb2xvcjogcmdiYSgxMDIsIDEwMiwgMTAyLCAwLjUpOwogICAgfQogICAgLmRpYWxvZy1saXN0LWl0ZW0tdGV4dCB7CiAgICAgIGZsZXg6IDE7CiAgICB9CiAgICAuZGlhbG9nLWxpc3QtaWNvbi13cmFwcGVyIHsKICAgICAgLy9mbGV4OiAwIDAgcHgycmVtKDMwKTsKICAgICAgY29sb3I6ICRjb2xvci1ibHVlOwogICAgICAvL0BpbmNsdWRlIHJpZ2h0OwogICAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICAgIHJpZ2h0OiBweDJyZW0oNSk7CiAgICB9CiAgfQp9CgouZGlhbG9nLW5ldy1ncm91cC13cmFwcGVyIHsKICB3aWR0aDogMTAwJTsKICBwYWRkaW5nOiAwIHB4MnJlbSgyMCk7CiAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICAuZGlhbG9nLWlucHV0LXRpdGxlLXdyYXBwZXIgewogICAgZm9udC1zaXplOiBweDJyZW0oMTApOwogICAgbWFyZ2luLXRvcDogcHgycmVtKDIwKTsKICB9CiAgLmRpYWxvZy1pbnB1dC13cmFwcGVyIHsKICAgIHdpZHRoOiAxMDAlOwogICAgcGFkZGluZzogMCAwIHB4MnJlbSgzMCkgMDsKICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICAuZGlhbG9nLWlucHV0LWlubmVyLXdyYXBwZXIgewogICAgICBkaXNwbGF5OiBmbGV4OwogICAgICB3aWR0aDogMTAwJTsKICAgICAgcGFkZGluZzogcHgycmVtKDEwKSAwOwogICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgICBib3JkZXItYm90dG9tOiBweDJyZW0oMSkgc29saWQgI2VlZTsKICAgICAgZm9udC1zaXplOiBweDJyZW0oMTQpOwogICAgICBjb2xvcjogIzY2NjsKICAgICAgLmRpYWxvZy1pbnB1dCB7CiAgICAgICAgZmxleDogMTsKICAgICAgICBib3JkZXI6IG5vbmU7CiAgICAgICAgJjpmb2N1cyB7CiAgICAgICAgICBvdXRsaW5lOiBub25lOwogICAgICAgIH0KICAgICAgfQogICAgICAuZGlhbG9nLWlucHV0LWNsZWFyLXdyYXBwZXIgewogICAgICAgIGZsZXg6IDAgMCBweDJyZW0oMzApOwogICAgICAgIGNvbG9yOiAjY2NjOwogICAgICAgIEBpbmNsdWRlIGNlbnRlcjsKICAgICAgICAmOmFjdGl2ZSB7CiAgICAgICAgICBjb2xvcjogIzk5OTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9Cn0KCi5ncm91cC1kaWFsb2ctYnRuLXdyYXBwZXIgewogIHdpZHRoOiAxMDAlOwogIEBpbmNsdWRlIGNlbnRlcjsKfQoKLmRpYWxvZy1idG4gewogIGZsZXg6IDE7CiAgJi5pcy1lbXB0eSB7CiAgICBjb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjUpOwogIH0KICAmOmFjdGl2ZSB7CiAgICBjb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjUpOwogIH0KfQo="},{"version":3,"sources":["ShelfGroupDialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiMA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ShelfGroupDialog.vue","sourceRoot":"src/components/shelf","sourcesContent":["<template>\r\n  <ebook-dialog :title=\"title\" ref=\"dialog\">\r\n    <!--插槽/slot-->\r\n    <div class=\"dialog-list-wrapper\" v-if=\"!ifNewGroup\">\r\n      <div\r\n        class=\"dialog-list-item\"\r\n        :class=\"{'is-add': item.edit  ? item.edit === 1 : false}\"\r\n        v-for=\"(item, index) in categoryList\"\r\n        :key=\"index\"\r\n        @click=\"onGroupClick(item)\"\r\n        v-show=\"(item.edit === 2 && isInGroup) || item.edit !== 2 || !item.edit\"\r\n      >\r\n        <div class=\"dialog-list-item-text\">{{item.title}}</div>\r\n        <div\r\n          class=\"dialog-list-icon-wrapper\"\r\n          v-if=\"isInGroup && shelfCategory.id === item.id\"\r\n        >\r\n          <span class=\"icon-check\"></span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"dialog-new-group-wrapper\" v-else>\r\n      <div class=\"dialog-input-title-wrapper\">\r\n        <span class=\"dialog-input-title\">{{$t('shelf.groupName')}}</span>\r\n      </div>\r\n      <div class=\"dialog-input-wrapper\">\r\n        <div class=\"dialog-input-inner-wrapper\">\r\n          <input\r\n            type=\"text\"\r\n            class=\"dialog-input\"\r\n            v-model=\"newGroupName\"\r\n            ref=\"dialogInput\"\r\n          />\r\n          <div\r\n            class=\"dialog-input-clear-wrapper\"\r\n            @click=\"clear\"\r\n            v-show=\"newGroupName && newGroupName.length > 0\"\r\n          >\r\n            <span class=\"icon-close-circle-fill\"></span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div slot=\"btn\" class=\"group-dialog-btn-wrapper\">\r\n      <div class=\"dialog-btn\" @click=\"hide\">{{$t('shelf.cancel')}}</div>\r\n      <div\r\n        class=\"dialog-btn\"\r\n        @click=\"createNewGroup\"\r\n        :class=\"{'is-empty': newGroupName && newGroupName.length === 0}\"\r\n        v-if=\"ifNewGroup\"\r\n      >{{$t('shelf.confirm')}}</div>\r\n    </div>\r\n  </ebook-dialog>\r\n</template>\r\n\r\n<script>\r\n  import EbookDialog from '../common/Dialog'\r\n  import { storeShelfMixin } from '../../utils/mixin'\r\n  import { removeAddFromShelf, appendAddToShelf } from '../../utils/store'\r\n  import { saveBookShelf } from '../../utils/localStorage'\r\n\r\n  export default {\r\n    name: 'group-dialog',\r\n    mixins: [storeShelfMixin],\r\n    components: {\r\n      EbookDialog\r\n    },\r\n    props: {\r\n      showNewGroup: {\r\n        type: Boolean,\r\n        default: false\r\n      },\r\n      groupName: String\r\n    },\r\n    computed: {\r\n      isInGroup() {\r\n        return this.currentType === 2\r\n      },\r\n      defaultCategory() {\r\n        return [\r\n          {\r\n            title: this.$t('shelf.newGroup'),\r\n            edit: 1\r\n          },\r\n          {\r\n            title: this.$t('shelf.groupOut'),\r\n            edit: 2\r\n          }\r\n        ]\r\n      },\r\n      category() {\r\n        return this.shelfList.filter(item => item.type === 2)\r\n      },\r\n      categoryList() {\r\n        return [...this.defaultCategory, ...this.category]\r\n      },\r\n      title() {\r\n        return !this.ifNewGroup\r\n          ? this.$t('shelf.moveBook')\r\n          : this.$t('shelf.newGroup')\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        ifNewGroup: false,\r\n        newGroupName: ''\r\n      }\r\n    },\r\n    methods: {\r\n      show() {\r\n        this.ifNewGroup = this.showNewGroup\r\n        this.newGroupName = this.groupName\r\n        this.$refs.dialog.show()\r\n      },\r\n      hide() {\r\n        this.$refs.dialog.hide()\r\n        setTimeout(() => {\r\n          this.ifNewGroup = false\r\n        }, 200)\r\n      },\r\n      onGroupClick(item) {\r\n        if (item.edit && item.edit === 1) {\r\n          //新建分组\r\n          this.ifNewGroup = true\r\n        } else if (item.edit && item.edit === 2) {\r\n          //移除分组\r\n          this.moveOutFromGroup(item)\r\n        } else {\r\n          this.moveToGroup(item)\r\n        }\r\n      },\r\n      clear() {\r\n        this.newGroupName = ''\r\n      },\r\n      moveToGroup(group) {\r\n        this.setShelfList(\r\n          this.shelfList.filter(book => {\r\n            if (book.itemList) {\r\n              book.itemList = book.itemList.filter(\r\n                subBook => this.shelfSelected.indexOf(subBook) < 0\r\n              )\r\n            }\r\n            return this.shelfSelected.indexOf(book) < 0\r\n          })\r\n        ).then(() => {\r\n          if (group && group.itemList) {\r\n            group.itemList = [...group.itemList, ...this.shelfSelected]\r\n          }\r\n          group.itemList.forEach((item, index) => {\r\n            item.id = index + 1\r\n          })\r\n          this.simpleToast(\r\n            this.$t('shelf.moveBookInSuccess').replace('$1', group.title)\r\n          )\r\n          this.onComplete()\r\n        })\r\n      },\r\n      moveOutFromGroup() {\r\n        this.moveOutOfGroup(this.onComplete)\r\n      },\r\n      createNewGroup() {\r\n        if (!this.newGroupName || this.newGroupName.length === 0) {\r\n          return\r\n        }\r\n        if (this.showNewGroup) {\r\n          this.shelfCategory.title = this.newGroupName\r\n          this.onComplete()\r\n        } else {\r\n          const group = {\r\n            id: this.shelfList[this.shelfList.length - 2].id + 1,\r\n            itemList: [],\r\n            selected: false,\r\n            title: this.newGroupName,\r\n            type: 2\r\n          }\r\n          let list = removeAddFromShelf(this.shelfList)\r\n          list.push(group)\r\n          list = appendAddToShelf(list)\r\n          this.setShelfList(list).then(() => {\r\n            this.moveToGroup(group)\r\n          })\r\n        }\r\n      },\r\n      onComplete() {\r\n        saveBookShelf(this.shelfList)\r\n        this.hide()\r\n        this.setIsEditMode(false)\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\" rel=\"stylesheet/scss\" scoped>\r\n  @import '../../assets/styles/global';\r\n\r\n  .dialog-list-wrapper {\r\n    width: 100%;\r\n    padding: 0 px2rem(20);\r\n    box-sizing: border-box;\r\n    font-size: px2rem(14);\r\n    @include scroll;\r\n    .dialog-list-item {\r\n      display: flex;\r\n      padding: px2rem(15) 0;\r\n      box-sizing: border-box;\r\n      color: #666;\r\n      position: relative;\r\n      &.is-add {\r\n        color: $color-blue;\r\n        &:active {\r\n          color: $color-blue-transparent;\r\n        }\r\n      }\r\n      &:active {\r\n        color: rgba(102, 102, 102, 0.5);\r\n      }\r\n      .dialog-list-item-text {\r\n        flex: 1;\r\n      }\r\n      .dialog-list-icon-wrapper {\r\n        //flex: 0 0 px2rem(30);\r\n        color: $color-blue;\r\n        //@include right;\r\n        position: absolute;\r\n        right: px2rem(5);\r\n      }\r\n    }\r\n  }\r\n\r\n  .dialog-new-group-wrapper {\r\n    width: 100%;\r\n    padding: 0 px2rem(20);\r\n    box-sizing: border-box;\r\n    .dialog-input-title-wrapper {\r\n      font-size: px2rem(10);\r\n      margin-top: px2rem(20);\r\n    }\r\n    .dialog-input-wrapper {\r\n      width: 100%;\r\n      padding: 0 0 px2rem(30) 0;\r\n      box-sizing: border-box;\r\n      .dialog-input-inner-wrapper {\r\n        display: flex;\r\n        width: 100%;\r\n        padding: px2rem(10) 0;\r\n        box-sizing: border-box;\r\n        border-bottom: px2rem(1) solid #eee;\r\n        font-size: px2rem(14);\r\n        color: #666;\r\n        .dialog-input {\r\n          flex: 1;\r\n          border: none;\r\n          &:focus {\r\n            outline: none;\r\n          }\r\n        }\r\n        .dialog-input-clear-wrapper {\r\n          flex: 0 0 px2rem(30);\r\n          color: #ccc;\r\n          @include center;\r\n          &:active {\r\n            color: #999;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  .group-dialog-btn-wrapper {\r\n    width: 100%;\r\n    @include center;\r\n  }\r\n\r\n  .dialog-btn {\r\n    flex: 1;\r\n    &.is-empty {\r\n      color: rgba(255, 255, 255, 0.5);\r\n    }\r\n    &:active {\r\n      color: rgba(255, 255, 255, 0.5);\r\n    }\r\n  }\r\n</style>\r\n"]}]}