{"remainingRequest":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\src\\components\\home\\FlapCard.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\src\\components\\home\\FlapCard.vue","mtime":1588929733829},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBob21lTWl4aW4gfSBmcm9tICIuLi8uLi91dGlscy9taXhpbiI7DQppbXBvcnQgeyBmbGFwQ2FyZExpc3QsIGNhdGVnb3J5VGV4dCB9IGZyb20gIi4uLy4uL3V0aWxzL3N0b3JlIjsNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbWl4aW5zOiBbaG9tZU1peGluXSwNCiAgcHJvcHM6IHsNCiAgICBkYXRhOiBPYmplY3QNCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgZmxhcENhcmRMaXN0LA0KICAgICAgZnJvbnQ6IDAsDQogICAgICBiYWNrOiAxLA0KICAgICAgaW50ZXJ2YWw6IDMwLA0KICAgICAgcnVuRmxhcENhcmRBbmltYXRpb246IGZhbHNlLA0KICAgICAgcnVuUG9pbnRBbmltYXRpb246IGZhbHNlLA0KICAgICAgcnVuQm9va0NhcmRBbmltYXRpb246IGZhbHNlLA0KICAgICAgcG9pbnRMaXN0OiBbXQ0KICAgIH07DQogIH0sDQogIHdhdGNoOiB7DQogICAgZmxhcENhcmRWaXNpYmxlKHYpIHsNCiAgICAgIGlmICh2KSB7DQogICAgICAgIHRoaXMucnVuQW5pbWF0aW9uKCk7DQogICAgICB9DQogICAgfQ0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTg7IGkrKykgew0KICAgICAgdGhpcy5wb2ludExpc3QucHVzaChgcG9pbnQke2l9YCk7DQogICAgfQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgcnVuQW5pbWF0aW9uKCkgew0KICAgICAgdGhpcy5ydW5GbGFwQ2FyZEFuaW1hdGlvbiA9IHRydWU7DQogICAgICB0aGlzLnN0YXJ0ID0gc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgIHRoaXMuc3RyYXJ0RmxhcENhcmRBbmltYXRpb24oKTsNCiAgICAgICAgdGhpcy5zdGFydFBvaW50QW5pbWF0aW9uKCk7DQogICAgICB9LCAzMDApOw0KICAgICAgdGhpcy5zdG9wID0gc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgIHRoaXMuc3RvcEFuaW1hdGlvbigpOw0KICAgICAgICB0aGlzLnJ1bkJvb2tDYXJkQW5pbWF0aW9uID0gdHJ1ZTsNCiAgICAgIH0sIDI1MDApOw0KICAgIH0sDQogICAgc3RhcnRQb2ludEFuaW1hdGlvbigpIHsNCiAgICAgIHRoaXMucnVuUG9pbnRBbmltYXRpb24gPSB0cnVlOw0KICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgIHRoaXMucnVuUG9pbnRBbmltYXRpb24gPSBmYWxzZTsNCiAgICAgIH0sIDc1MCk7DQogICAgfSwNCiAgICBjbG9zZSgpIHsNCiAgICAgIHRoaXMuc2V0RmxhcENhcmRWaXNpYmxlKGZhbHNlKTsNCiAgICAgIHRoaXMuc3RvcEFuaW1hdGlvbigpOw0KICAgICAgaWYgKHRoaXMuc3RhcnQpIHsNCiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnN0YXJ0KTsNCiAgICAgIH0NCiAgICAgIGlmICh0aGlzLnN0b3ApIHsNCiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnN0b3ApOw0KICAgICAgfQ0KICAgIH0sDQogICAgc2VtaUNpcmNsZVN0eWxlKGl0ZW0sIGlzbGVmdCkgew0KICAgICAgcmV0dXJuIHsNCiAgICAgICAgYmFja2dyb3VuZENvbG9yOiBgcmdiKCR7aXRlbS5yfSwke2l0ZW0uZ30sJHtpdGVtLmJ9KWAsDQogICAgICAgIGJhY2tncm91bmRTaXplOiBpdGVtLmJhY2tncm91bmRTaXplLA0KICAgICAgICBiYWNrZ3JvdW5kSW1hZ2U6IGlzbGVmdCA9PT0gImxlZnQiID8gaXRlbS5pbWdMZWZ0IDogaXRlbS5pbWdSaWdodA0KICAgICAgfTsNCiAgICB9LA0KICAgIHJvdGF0ZShpbmRleCwgdHlwZSkgew0KICAgICAgLy90eXBlOuato+mdoueahOWchm9y5Y+N6Z2i55qE5ZyGDQogICAgICBjb25zdCBpdGVtID0gdGhpcy5mbGFwQ2FyZExpc3RbaW5kZXhdOw0KICAgICAgbGV0IGRvbTsNCiAgICAgIGlmICh0eXBlID09PSAiZnJvbnQiKSB7DQogICAgICAgIGRvbSA9IHRoaXMuJHJlZnMucmlnaHRbaW5kZXhdOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgZG9tID0gdGhpcy4kcmVmcy5sZWZ0W2luZGV4XTsNCiAgICAgIH0NCiAgICAgIGRvbS5zdHlsZS50cmFuc2Zvcm0gPSBgcm90YXRlWSgke2l0ZW0ucm90YXRlRGVncmVlfWRlZylgOw0KICAgICAgZG9tLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGByZ2IoJHtpdGVtLnJ9LCR7aXRlbS5fZ30sJHtpdGVtLmJ9KWA7DQogICAgICAvL19n55So5p2l5pS55Y+Y6aKc6Imy77yMZ+eUqOadpei/mOWOn+minOiJsg0KICAgIH0sDQogICAgbmV4dCgpIHsNCiAgICAgIGNvbnN0IGZyb250RmxhcENhcmQgPSB0aGlzLmZsYXBDYXJkTGlzdFt0aGlzLmZyb250XTsNCiAgICAgIGNvbnN0IGJhY2tGbGFwQ2FyZCA9IHRoaXMuZmxhcENhcmRMaXN0W3RoaXMuYmFja107DQogICAgICBmcm9udEZsYXBDYXJkLnJvdGF0ZURlZ3JlZSA9IDA7DQogICAgICBiYWNrRmxhcENhcmQucm90YXRlRGVncmVlID0gMDsNCiAgICAgIGZyb250RmxhcENhcmQuX2cgPSBmcm9udEZsYXBDYXJkLmc7DQogICAgICBiYWNrRmxhcENhcmQuX2cgPSBiYWNrRmxhcENhcmQuZzsNCiAgICAgIHRoaXMucm90YXRlKHRoaXMuZnJvbnQsICJmcm9udCIpOw0KICAgICAgdGhpcy5yb3RhdGUodGhpcy5iYWNrLCAiYmFjayIpOw0KICAgICAgdGhpcy5mcm9udCsrOw0KICAgICAgdGhpcy5iYWNrKys7DQogICAgICBjb25zdCBsZW4gPSB0aGlzLmZsYXBDYXJkTGlzdC5sZW5ndGg7DQogICAgICBpZiAodGhpcy5mcm9udCA+PSBsZW4pIHsNCiAgICAgICAgdGhpcy5mcm9udCA9IDA7DQogICAgICB9DQogICAgICBpZiAodGhpcy5iYWNrID49IGxlbikgew0KICAgICAgICB0aGlzLmJhY2sgPSAwOw0KICAgICAgfQ0KICAgICAgLy8g5Yqo5oCB6K6+572uekluZGV4DQogICAgICAvLyAxMDAgLT4gOTYNCiAgICAgIC8vIDk5IC0+IDEwMA0KICAgICAgLy8gOTggLT4gOTkNCiAgICAgIC8vIDk3IC0+IDk4DQogICAgICAvLyA5NiAtPiA5Nw0KICAgICAgLy8gKDAgLSAxICsgNSkgJSA1ID0gNA0KICAgICAgLy8gKDEgLSAxICsgNSkgJSA1ID0gMA0KICAgICAgdGhpcy5mbGFwQ2FyZExpc3QuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHsNCiAgICAgICAgaXRlbS56SW5kZXggPSAxMDAgLSAoKGluZGV4IC0gdGhpcy5mcm9udCArIGxlbikgJSBsZW4pOw0KICAgICAgfSk7DQogICAgICB0aGlzLnByZXBhcmUoKTsNCiAgICB9LA0KICAgIGZsYXBDYXJkUm90YXRlKCkgew0KICAgICAgY29uc3QgZnJvbnRGbGFwQ2FyZCA9IHRoaXMuZmxhcENhcmRMaXN0W3RoaXMuZnJvbnRdOw0KICAgICAgY29uc3QgYmFja0ZsYXBDYXJkID0gdGhpcy5mbGFwQ2FyZExpc3RbdGhpcy5iYWNrXTsNCiAgICAgIGZyb250RmxhcENhcmQucm90YXRlRGVncmVlICs9IDEwOw0KICAgICAgZnJvbnRGbGFwQ2FyZC5fZyAtPSA1Ow0KICAgICAgYmFja0ZsYXBDYXJkLnJvdGF0ZURlZ3JlZSAtPSAxMDsNCiAgICAgIGlmIChiYWNrRmxhcENhcmQucm90YXRlRGVncmVlIDw9IDkwKSB7DQogICAgICAgIGJhY2tGbGFwQ2FyZC5fZyArPSA1Ow0KICAgICAgfQ0KICAgICAgaWYgKA0KICAgICAgICBmcm9udEZsYXBDYXJkLnJvdGF0ZURlZ3JlZSA9PT0gOTAgJiYNCiAgICAgICAgYmFja0ZsYXBDYXJkLnJvdGF0ZURlZ3JlZSA9PT0gOTANCiAgICAgICkgew0KICAgICAgICBiYWNrRmxhcENhcmQuekluZGV4ICs9IDI7DQogICAgICB9DQogICAgICB0aGlzLnJvdGF0ZSh0aGlzLmZyb250LCAiZnJvbnQiKTsNCiAgICAgIHRoaXMucm90YXRlKHRoaXMuYmFjaywgImJhY2siKTsNCiAgICAgIGlmICgNCiAgICAgICAgZnJvbnRGbGFwQ2FyZC5yb3RhdGVEZWdyZWUgPT09IDE4MCAmJg0KICAgICAgICBiYWNrRmxhcENhcmQucm90YXRlRGVncmVlID09PSAwDQogICAgICApIHsNCiAgICAgICAgdGhpcy5uZXh0KCk7DQogICAgICB9DQogICAgfSwNCiAgICBwcmVwYXJlKCkgew0KICAgICAgY29uc3QgYmFja0ZsYXBDYXJkID0gdGhpcy5mbGFwQ2FyZExpc3RbdGhpcy5iYWNrXTsNCiAgICAgIGJhY2tGbGFwQ2FyZC5yb3RhdGVEZWdyZWUgPSAxODA7DQogICAgICBiYWNrRmxhcENhcmQuX2cgPSBiYWNrRmxhcENhcmQuZyAtIDUgKiA5Ow0KICAgICAgdGhpcy5yb3RhdGUodGhpcy5iYWNrLCAiYmFjayIpOw0KICAgIH0sDQogICAgc3RyYXJ0RmxhcENhcmRBbmltYXRpb24oKSB7DQogICAgICB0aGlzLnByZXBhcmUoKTsNCiAgICAgIHRoaXMudGFzayA9IHNldEludGVydmFsKCgpID0+IHsNCiAgICAgICAgdGhpcy5mbGFwQ2FyZFJvdGF0ZSgpOw0KICAgICAgfSwgdGhpcy5pbnRlcnZhbCk7DQogICAgfSwNCiAgICBzdG9wQW5pbWF0aW9uKCkgew0KICAgICAgdGhpcy5ydW5GbGFwQ2FyZEFuaW1hdGlvbiA9IGZhbHNlOw0KICAgICAgaWYgKHRoaXMudGFzaykgew0KICAgICAgICBjbGVhckludGVydmFsKHRoaXMudGFzayk7DQogICAgICB9DQogICAgICB0aGlzLnJlc2V0KCk7DQogICAgfSwNCiAgICByZXNldCgpIHsNCiAgICAgIHRoaXMuZnJvbnQgPSAwOw0KICAgICAgdGhpcy5iYWNrID0gMTsNCiAgICAgIHRoaXMuZmxhcENhcmRMaXN0LmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7DQogICAgICAgIGl0ZW0uekluZGV4ID0gMTAwIC0gaW5kZXg7DQogICAgICAgIGl0ZW0uX2cgPSBpdGVtLmc7DQogICAgICAgIGl0ZW0ucm90YXRlRGVncmVlID0gMDsNCiAgICAgICAgdGhpcy5yb3RhdGUoaW5kZXgsICJmcm9udCIpOw0KICAgICAgICB0aGlzLnJvdGF0ZShpbmRleCwgImJhY2siKTsNCiAgICAgIH0pOw0KICAgICAgdGhpcy5ydW5GbGFwQ2FyZEFuaW1hdGlvbiA9IGZhbHNlOw0KICAgICAgdGhpcy5ydW5Qb2ludEFuaW1hdGlvbiA9IGZhbHNlOw0KICAgICAgdGhpcy5ydW5Cb29rQ2FyZEFuaW1hdGlvbiA9IGZhbHNlOw0KICAgIH0sDQogICAgY2F0ZWdvcnlUZXh0KCkgew0KICAgICAgaWYgKHRoaXMuZGF0YSkgew0KICAgICAgICAvL2NvbnNvbGUubG9nKHRoaXMuZGF0YS5jb3ZlcikNCiAgICAgICAgY2F0ZWdvcnlUZXh0KHRoaXMuZGF0YS5jYXRlZ29yeSwgdGhpcyk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICByZXR1cm4gIiI7DQogICAgICB9DQogICAgfQ0KICB9LA0KICBtb3VudGVkKCkge30NCn07DQo="},{"version":3,"sources":["FlapCard.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"FlapCard.vue","sourceRoot":"src/components/home","sourcesContent":["<template>\r\n  <div class=\"flap-card-wrapper\" v-show=\"flapCardVisible\">\r\n    <div\r\n      class=\"flap-card-bg\"\r\n      :class=\"{ animation: runFlapCardAnimation }\"\r\n      v-show=\"runFlapCardAnimation\"\r\n    >\r\n      <div\r\n        class=\"flap-card\"\r\n        v-for=\"(item, index) in flapCardList\"\r\n        :key=\"index\"\r\n        :style=\"{ zIndex: item.zIndex }\"\r\n      >\r\n        <div class=\"flap-card-circle\">\r\n          <div\r\n            class=\"flap-card-semi-circle flap-card-semi-circle-left\"\r\n            :style=\"semiCircleStyle(item, 'left')\"\r\n            ref=\"left\"\r\n          ></div>\r\n          <div\r\n            class=\"flap-card-semi-circle flap-card-semi-circle-right\"\r\n            :style=\"semiCircleStyle(item, 'right')\"\r\n            ref=\"right\"\r\n          ></div>\r\n        </div>\r\n      </div>\r\n      <div class=\"point-wrapper\">\r\n        <div\r\n          class=\"point\"\r\n          v-for=\"(item, index) in pointList\"\r\n          :key=\"index\"\r\n          :class=\"{ animation: runPointAnimation }\"\r\n        ></div>\r\n      </div>\r\n    </div>\r\n    <div\r\n      class=\"book-card\"\r\n      :class=\"{ animation: runBookCardAnimation }\"\r\n      v-show=\"runBookCardAnimation\"\r\n    >\r\n      <div class=\"book-card-wrapper\">\r\n        <div class=\"img-wrapper\">\r\n          <img class=\"img\" :src=\"data ? data.cover : ''\" />\r\n        </div>\r\n        <div class=\"content-wrapper\">\r\n          <div class=\"content-title\">{{ data ? data.title : \"\" }}</div>\r\n          <div class=\"content-author sub-title-medium\">\r\n            {{ data ? data.author : \"\" }}\r\n          </div>\r\n          <div class=\"content-category\">{{ categoryText() }}</div>\r\n        </div>\r\n        <div class=\"read-btn\" @click.stop=\"showBookDetail(data)\">\r\n          {{ $t(\"home.readNow\") }}\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"close-button-wrapper\" @click=\"close\">\r\n      <span class=\"icon-close\"></span>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { homeMixin } from \"../../utils/mixin\";\r\nimport { flapCardList, categoryText } from \"../../utils/store\";\r\nexport default {\r\n  mixins: [homeMixin],\r\n  props: {\r\n    data: Object\r\n  },\r\n  data() {\r\n    return {\r\n      flapCardList,\r\n      front: 0,\r\n      back: 1,\r\n      interval: 30,\r\n      runFlapCardAnimation: false,\r\n      runPointAnimation: false,\r\n      runBookCardAnimation: false,\r\n      pointList: []\r\n    };\r\n  },\r\n  watch: {\r\n    flapCardVisible(v) {\r\n      if (v) {\r\n        this.runAnimation();\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    for (let i = 0; i < 18; i++) {\r\n      this.pointList.push(`point${i}`);\r\n    }\r\n  },\r\n  methods: {\r\n    runAnimation() {\r\n      this.runFlapCardAnimation = true;\r\n      this.start = setTimeout(() => {\r\n        this.strartFlapCardAnimation();\r\n        this.startPointAnimation();\r\n      }, 300);\r\n      this.stop = setTimeout(() => {\r\n        this.stopAnimation();\r\n        this.runBookCardAnimation = true;\r\n      }, 2500);\r\n    },\r\n    startPointAnimation() {\r\n      this.runPointAnimation = true;\r\n      setTimeout(() => {\r\n        this.runPointAnimation = false;\r\n      }, 750);\r\n    },\r\n    close() {\r\n      this.setFlapCardVisible(false);\r\n      this.stopAnimation();\r\n      if (this.start) {\r\n        clearInterval(this.start);\r\n      }\r\n      if (this.stop) {\r\n        clearInterval(this.stop);\r\n      }\r\n    },\r\n    semiCircleStyle(item, isleft) {\r\n      return {\r\n        backgroundColor: `rgb(${item.r},${item.g},${item.b})`,\r\n        backgroundSize: item.backgroundSize,\r\n        backgroundImage: isleft === \"left\" ? item.imgLeft : item.imgRight\r\n      };\r\n    },\r\n    rotate(index, type) {\r\n      //type:正面的圆or反面的圆\r\n      const item = this.flapCardList[index];\r\n      let dom;\r\n      if (type === \"front\") {\r\n        dom = this.$refs.right[index];\r\n      } else {\r\n        dom = this.$refs.left[index];\r\n      }\r\n      dom.style.transform = `rotateY(${item.rotateDegree}deg)`;\r\n      dom.style.backgroundColor = `rgb(${item.r},${item._g},${item.b})`;\r\n      //_g用来改变颜色，g用来还原颜色\r\n    },\r\n    next() {\r\n      const frontFlapCard = this.flapCardList[this.front];\r\n      const backFlapCard = this.flapCardList[this.back];\r\n      frontFlapCard.rotateDegree = 0;\r\n      backFlapCard.rotateDegree = 0;\r\n      frontFlapCard._g = frontFlapCard.g;\r\n      backFlapCard._g = backFlapCard.g;\r\n      this.rotate(this.front, \"front\");\r\n      this.rotate(this.back, \"back\");\r\n      this.front++;\r\n      this.back++;\r\n      const len = this.flapCardList.length;\r\n      if (this.front >= len) {\r\n        this.front = 0;\r\n      }\r\n      if (this.back >= len) {\r\n        this.back = 0;\r\n      }\r\n      // 动态设置zIndex\r\n      // 100 -> 96\r\n      // 99 -> 100\r\n      // 98 -> 99\r\n      // 97 -> 98\r\n      // 96 -> 97\r\n      // (0 - 1 + 5) % 5 = 4\r\n      // (1 - 1 + 5) % 5 = 0\r\n      this.flapCardList.forEach((item, index) => {\r\n        item.zIndex = 100 - ((index - this.front + len) % len);\r\n      });\r\n      this.prepare();\r\n    },\r\n    flapCardRotate() {\r\n      const frontFlapCard = this.flapCardList[this.front];\r\n      const backFlapCard = this.flapCardList[this.back];\r\n      frontFlapCard.rotateDegree += 10;\r\n      frontFlapCard._g -= 5;\r\n      backFlapCard.rotateDegree -= 10;\r\n      if (backFlapCard.rotateDegree <= 90) {\r\n        backFlapCard._g += 5;\r\n      }\r\n      if (\r\n        frontFlapCard.rotateDegree === 90 &&\r\n        backFlapCard.rotateDegree === 90\r\n      ) {\r\n        backFlapCard.zIndex += 2;\r\n      }\r\n      this.rotate(this.front, \"front\");\r\n      this.rotate(this.back, \"back\");\r\n      if (\r\n        frontFlapCard.rotateDegree === 180 &&\r\n        backFlapCard.rotateDegree === 0\r\n      ) {\r\n        this.next();\r\n      }\r\n    },\r\n    prepare() {\r\n      const backFlapCard = this.flapCardList[this.back];\r\n      backFlapCard.rotateDegree = 180;\r\n      backFlapCard._g = backFlapCard.g - 5 * 9;\r\n      this.rotate(this.back, \"back\");\r\n    },\r\n    strartFlapCardAnimation() {\r\n      this.prepare();\r\n      this.task = setInterval(() => {\r\n        this.flapCardRotate();\r\n      }, this.interval);\r\n    },\r\n    stopAnimation() {\r\n      this.runFlapCardAnimation = false;\r\n      if (this.task) {\r\n        clearInterval(this.task);\r\n      }\r\n      this.reset();\r\n    },\r\n    reset() {\r\n      this.front = 0;\r\n      this.back = 1;\r\n      this.flapCardList.forEach((item, index) => {\r\n        item.zIndex = 100 - index;\r\n        item._g = item.g;\r\n        item.rotateDegree = 0;\r\n        this.rotate(index, \"front\");\r\n        this.rotate(index, \"back\");\r\n      });\r\n      this.runFlapCardAnimation = false;\r\n      this.runPointAnimation = false;\r\n      this.runBookCardAnimation = false;\r\n    },\r\n    categoryText() {\r\n      if (this.data) {\r\n        //console.log(this.data.cover)\r\n        categoryText(this.data.category, this);\r\n      } else {\r\n        return \"\";\r\n      }\r\n    }\r\n  },\r\n  mounted() {}\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n@import \"../../assets/styles/global.scss\";\r\n@import \"../../assets/styles/flapCard.scss\";\r\n\r\n.flap-card-wrapper {\r\n  @include absCenter;\r\n  background: rgba(0, 0, 0, 0.6);\r\n  z-index: 300;\r\n  height: 100%;\r\n  width: 100%;\r\n  @include center;\r\n  .flap-card-bg {\r\n    width: px2rem(64);\r\n    height: px2rem(64);\r\n    border-radius: px2rem(5);\r\n    background: white;\r\n    position: relative;\r\n    transform: scale(0);\r\n    opacity: 0;\r\n    &.animation {\r\n      animation: flap-card-move 0.3s ease-in both;\r\n    }\r\n    @keyframes flap-card-move {\r\n      0% {\r\n        transform: scale(0);\r\n        opacity: 0;\r\n      }\r\n      50% {\r\n        transform: scale(1.2);\r\n        opacity: 1;\r\n      }\r\n      75% {\r\n        transform: scale(0.9);\r\n        opacity: 1;\r\n      }\r\n      100% {\r\n        transform: scale(1);\r\n        opacity: 1;\r\n      }\r\n    }\r\n    .point-wrapper {\r\n      @include absCenter;\r\n      z-index: 400;\r\n      .point {\r\n        border-radius: 50%;\r\n        @include absCenter;\r\n        &.animation {\r\n          @for $i from 1 to length($moves) {\r\n            &:nth-child(#{$i}) {\r\n              @include move($i);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    .flap-card {\r\n      width: px2rem(48);\r\n      height: px2rem(48);\r\n      @include absCenter;\r\n      .flap-card-circle {\r\n        height: 100%;\r\n        width: 100%;\r\n        display: flex;\r\n        .flap-card-semi-circle {\r\n          flex: 0 0 50%;\r\n          height: 100%;\r\n          width: 50%;\r\n          background-repeat: no-repeat;\r\n          backface-visibility: hidden;\r\n        }\r\n        .flap-card-semi-circle-left {\r\n          border-radius: px2rem(24) 0 0 px2rem(24);\r\n          background-position: center right;\r\n          transform-origin: right;\r\n        }\r\n        .flap-card-semi-circle-right {\r\n          border-radius: 0 px2rem(24) px2rem(24) 0;\r\n          background-position: center left;\r\n          transform-origin: left;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .book-card {\r\n    position: relative;\r\n    width: 65%;\r\n    max-width: px2rem(400);\r\n    box-sizing: border-box;\r\n    border-radius: px2rem(15);\r\n    background: white;\r\n    &.animation {\r\n      animation: scale 0.3s ease-in both;\r\n      @keyframes scale {\r\n        0% {\r\n          transform: scale(0);\r\n          opacity: 0;\r\n        }\r\n        100% {\r\n          transform: scale(1);\r\n          opacity: 1;\r\n        }\r\n      }\r\n    }\r\n    .book-card-wrapper {\r\n      width: 100%;\r\n      height: 100%;\r\n      margin-bottom: px2rem(35);\r\n      @include columnTop;\r\n      .img-wrapper {\r\n        width: 100%;\r\n        margin-top: px2rem(20);\r\n        @include center;\r\n        .img {\r\n          width: px2rem(90);\r\n          height: px2rem(130);\r\n        }\r\n      }\r\n      .content-wrapper {\r\n        padding: 0 px2rem(20);\r\n        margin-top: px2rem(20);\r\n        .content-title {\r\n          color: #333;\r\n          font-weight: bold;\r\n          font-size: px2rem(16);\r\n          line-height: px2rem(20);\r\n          max-height: px2rem(40);\r\n          text-align: center;\r\n          @include ellipsis2(2);\r\n        }\r\n        .content-author {\r\n          margin-top: px2rem(10);\r\n          font-size: px2rem(14);\r\n          text-align: center;\r\n        }\r\n        .content-category {\r\n          color: #999;\r\n          font-size: px2rem(14);\r\n          margin-top: px2rem(10);\r\n          text-align: center;\r\n        }\r\n      }\r\n      .read-btn {\r\n        position: absolute;\r\n        bottom: 0;\r\n        left: 0;\r\n        z-index: 1100;\r\n        width: 100%;\r\n        border-radius: 0 0 px2rem(15) px2rem(15);\r\n        padding: px2rem(12) 0;\r\n        text-align: center;\r\n        color: white;\r\n        font-size: px2rem(14);\r\n        background: $color-blue;\r\n      }\r\n    }\r\n  }\r\n  .close-button-wrapper {\r\n    position: absolute;\r\n    right: 0;\r\n    bottom: px2rem(30);\r\n    z-index: 320;\r\n    width: 100%;\r\n    @include center;\r\n    .icon-close {\r\n      width: px2rem(45);\r\n      height: px2rem(45);\r\n      font-size: px2rem(25);\r\n      border-radius: 50%;\r\n      background: #333;\r\n      color: white;\r\n      @include center;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}