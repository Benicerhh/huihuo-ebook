{"remainingRequest":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\src\\components\\speak\\SpeakBottom.vue?vue&type=style&index=0&id=0e2899e0&lang=scss&rel=stylesheet%2Fscss&scoped=true&","dependencies":[{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\src\\components\\speak\\SpeakBottom.vue","mtime":1588943258444},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKQGltcG9ydCAiLi4vLi4vYXNzZXRzL3N0eWxlcy9nbG9iYWwiOwoKLmJvdHRvbS13cmFwcGVyIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgYm90dG9tOiAwOwogIGxlZnQ6IDA7CiAgei1pbmRleDogMTEwOwogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogcHgycmVtKDExNik7CiAgYmFja2dyb3VuZDogd2hpdGU7CiAgYm94LXNoYWRvdzogMCBweDJyZW0oLTIpIHB4MnJlbSgyKSAwIHJnYmEoMCwgMCwgMCwgMC4xKTsKICAmLmhpZGUtcGxheSB7CiAgICBoZWlnaHQ6IHB4MnJlbSg1Mik7CiAgfQogIC5ib3R0b20tcGxheWluZy13cmFwcGVyIHsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICB3aWR0aDogMTAwJTsKICAgIGhlaWdodDogcHgycmVtKDY0KTsKICAgIC5ib3R0b20tcGxheWluZy1sZWZ0IHsKICAgICAgZmxleDogMCAwIHB4MnJlbSg3MCk7CiAgICAgIHdpZHRoOiBweDJyZW0oNzApOwogICAgICBAaW5jbHVkZSBjZW50ZXI7CiAgICAgIC5pY29uLXBsYXktd3JhcHBlciB7CiAgICAgICAgZmxleDogMCAwIHB4MnJlbSgxMDApOwogICAgICAgIEBpbmNsdWRlIGNlbnRlcjsKICAgICAgICAmOmFjdGl2ZSB7CiAgICAgICAgICBvcGFjaXR5OiAwLjU7CiAgICAgICAgfQogICAgICAgIC5pY29uLXBsYXlfZ28gewogICAgICAgICAgZm9udC1zaXplOiBweDJyZW0oNDApOwogICAgICAgICAgY29sb3I6ICRjb2xvci1ibHVlOwogICAgICAgIH0KICAgICAgICAuaWNvbi1wbGF5X3BhdXNlIHsKICAgICAgICAgIGZvbnQtc2l6ZTogcHgycmVtKDQwKTsKICAgICAgICAgIGNvbG9yOiAkY29sb3ItYmx1ZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC5ib3R0b20tcGxheWluZy1yaWdodCB7CiAgICAgIGZsZXg6IDE7CiAgICAgIHBhZGRpbmctcmlnaHQ6IHB4MnJlbSgxNSk7CiAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICAgIEBpbmNsdWRlIGNvbHVtbkxlZnQ7CiAgICAgIC5ib3R0b20tcGxheWluZy1jaGFwdGVyLXRleHQgewogICAgICAgIG1heC13aWR0aDogcHgycmVtKDMwNSk7CiAgICAgICAgY29sb3I6ICMzMzM7CiAgICAgICAgZm9udC1zaXplOiBweDJyZW0oMTYpOwogICAgICAgIGxpbmUtaGVpZ2h0OiBweDJyZW0oMTkpOwogICAgICAgIEBpbmNsdWRlIGVsbGlwc2lzOwogICAgICB9CiAgICAgIC5ib3R0b20tcGxheWluZy1wYWdlLXRleHQgewogICAgICAgIGNvbG9yOiAjNjY2OwogICAgICAgIGZvbnQtc2l6ZTogcHgycmVtKDEwKTsKICAgICAgICBtYXJnaW4tdG9wOiBweDJyZW0oNSk7CiAgICAgIH0KICAgIH0KICB9CiAgLmJvdHRvbS1idG4td3JhcHBlciB7CiAgICB3aWR0aDogMTAwJTsKICAgIGhlaWdodDogcHgycmVtKDUyKTsKICAgIGJvcmRlci10b3A6IHB4MnJlbSgxKSBzb2xpZCAjZWVlOwogICAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgIGNvbG9yOiAkY29sb3ItYmx1ZTsKICAgIEBpbmNsdWRlIGNlbnRlcjsKICAgIGZvbnQtc2l6ZTogcHgycmVtKDE0KTsKICAgIGZvbnQtd2VpZ2h0OiBib2xkOwogICAgLmljb24tY2hlY2sgewogICAgICBtYXJnaW4tcmlnaHQ6IHB4MnJlbSg1KTsKICAgIH0KICB9Cn0K"},{"version":3,"sources":["SpeakBottom.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SpeakBottom.vue","sourceRoot":"src/components/speak","sourcesContent":["<template>\n  <div class=\"bottom-wrapper\" :class=\"{ 'hide-play': !showPlay }\">\n    <div\n      class=\"bottom-playing-wrapper\"\n      @click.stop.prevent=\"onPlayingCardClick\"\n      v-if=\"showPlay\"\n    >\n      <div class=\"bottom-playing-left\">\n        <div class=\"icon-play-wrapper\" @click.stop.prevent=\"togglePlay\">\n          <span class=\"icon-play_go\" v-if=\"!isPlaying\"></span>\n          <span class=\"icon-play_pause\" v-else></span>\n        </div>\n      </div>\n      <div class=\"bottom-playing-right\">\n        <div class=\"bottom-playing-chapter-text\">\n          <span class=\"chapter-label\">{{ chapter ? chapter.label : \"\" }}</span>\n          <span\n            class=\"bottom-playing-page-text\"\n            v-if=\"currentSectionIndex && currentSectionTotal\"\n            >( {{ currentSectionIndex }} / {{ currentSectionTotal }} )</span\n          >\n        </div>\n        <div class=\"bottom-playing-page-text\">\n          {{ playInfo ? playInfo.currentMinute : \"00\" }}:{{\n            playInfo ? playInfo.currentSecond : \"00\"\n          }}\n          / {{ playInfo ? playInfo.totalMinute : \"00\" }}:{{\n            playInfo ? playInfo.totalSecond : \"00\"\n          }}\n        </div>\n      </div>\n    </div>\n    <div class=\"bottom-btn-wrapper\">\n      <span class=\"icon-check\" v-if=\"inBookShelf\"></span>\n      <span class=\"bottom-btn-text\" @click.stop.prevent=\"addOrRemoveShelf()\">{{\n        inBookShelf\n          ? $t(\"detail.isAddedToShelf\")\n          : $t(\"detail.addOrRemoveShelf\")\n      }}</span>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { storeShelfMixin } from \"../../utils/mixin\";\nimport { removeFromBookShelf, addToShelf } from \"../../utils/store\";\nimport { getBookShelf, saveBookShelf } from \"../../utils/localStorage\";\n\nexport default {\n  mixins: [storeShelfMixin],\n  props: {\n    chapter: Object,\n    currentSectionIndex: Number,\n    currentSectionTotal: Number,\n    showPlay: Boolean,\n    isPlaying: Boolean,\n    playInfo: Object,\n    bookItem: Object\n  },\n  computed: {\n    // 判断当前的电子书是否存在于书架\n    inBookShelf() {\n      if (this.bookItem && this.shelfList) {\n        // 定义一个自执行函数，将书架转为一维数组结构，并且只保留type为1的数据（type=1的为电子书）\n        const flatShelf = (function flatten(arr) {\n          return [].concat(\n            ...arr.map(v => (v.itemList ? [v, ...flatten(v.itemList)] : v))\n          );\n        })(this.shelfList).filter(item => item.type === 1);\n        // 查找当前电子书是否存在于书架\n        const book = flatShelf.filter(\n          item => item.fileName === this.bookItem.fileName\n        );\n        return book && book.length > 0;\n      } else {\n        return false;\n      }\n    }\n  },\n  methods: {\n    togglePlay() {\n      this.$parent.togglePlay();\n    },\n    onPlayingCardClick() {\n      this.$emit(\"onPlayingCardClick\");\n    },\n    addOrRemoveShelf() {\n      // 如果电子书存在于书架，则从书架中移除电子书\n      if (this.inBookShelf) {\n        this.setShelfList(removeFromBookShelf(this.bookItem)).then(() => {\n          // 将书架数据保存到LocalStorage\n          saveBookShelf(this.shelfList);\n        });\n      } else {\n        // 如果电子书不存在于书架，则添加电子书到书架\n        addToShelf(this.bookItem);\n        this.setShelfList(getBookShelf());\n      }\n      this.isInBookShelf = !this.isInBookShelf;\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" rel=\"stylesheet/scss\" scoped>\n@import \"../../assets/styles/global\";\n\n.bottom-wrapper {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  z-index: 110;\n  width: 100%;\n  height: px2rem(116);\n  background: white;\n  box-shadow: 0 px2rem(-2) px2rem(2) 0 rgba(0, 0, 0, 0.1);\n  &.hide-play {\n    height: px2rem(52);\n  }\n  .bottom-playing-wrapper {\n    display: flex;\n    width: 100%;\n    height: px2rem(64);\n    .bottom-playing-left {\n      flex: 0 0 px2rem(70);\n      width: px2rem(70);\n      @include center;\n      .icon-play-wrapper {\n        flex: 0 0 px2rem(100);\n        @include center;\n        &:active {\n          opacity: 0.5;\n        }\n        .icon-play_go {\n          font-size: px2rem(40);\n          color: $color-blue;\n        }\n        .icon-play_pause {\n          font-size: px2rem(40);\n          color: $color-blue;\n        }\n      }\n    }\n    .bottom-playing-right {\n      flex: 1;\n      padding-right: px2rem(15);\n      box-sizing: border-box;\n      @include columnLeft;\n      .bottom-playing-chapter-text {\n        max-width: px2rem(305);\n        color: #333;\n        font-size: px2rem(16);\n        line-height: px2rem(19);\n        @include ellipsis;\n      }\n      .bottom-playing-page-text {\n        color: #666;\n        font-size: px2rem(10);\n        margin-top: px2rem(5);\n      }\n    }\n  }\n  .bottom-btn-wrapper {\n    width: 100%;\n    height: px2rem(52);\n    border-top: px2rem(1) solid #eee;\n    box-sizing: border-box;\n    color: $color-blue;\n    @include center;\n    font-size: px2rem(14);\n    font-weight: bold;\n    .icon-check {\n      margin-right: px2rem(5);\n    }\n  }\n}\n</style>\n"]}]}