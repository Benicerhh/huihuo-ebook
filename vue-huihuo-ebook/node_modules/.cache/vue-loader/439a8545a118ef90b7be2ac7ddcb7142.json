{"remainingRequest":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\src\\components\\Ebook\\EbookReader.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\src\\components\\Ebook\\EbookReader.vue","mtime":1587884816356},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JwppbXBvcnQgRXB1YiBmcm9tICdlcHVianMnCmdsb2JhbC5lUHViID0gRXB1YgpleHBvcnQgZGVmYXVsdCB7CiAgbWV0aG9kczogewogICAgcHJldlBhZ2UoKSB7CiAgICAgIC8v6LCD55SoUmVuZGl0aW9u55qEcHJlduaWueazlei/lOWbnuS4iuS4gOmhtQogICAgICBpZiAodGhpcy5yZW5kaXRpb24pIHsKICAgICAgICB0aGlzLnJlbmRpdGlvbi5wcmV2KCkKICAgICAgfQogICAgfSwKICAgIG5leHRQYWdlKCkgewogICAgICAvL+iwg+eUqFJlbmRpdGlvbueahG5leHTmlrnms5Xov5Tlm57kuIrkuIDpobUKICAgICAgaWYgKHRoaXMucmVuZGl0aW9uKSB7CiAgICAgICAgdGhpcy5yZW5kaXRpb24ubmV4dCgpCiAgICAgIH0KICAgIH0sCiAgICB0b2dnbGVUaXRsZUFuZE1lbnUoKSB7CiAgICAgIHRoaXMuaWZUaXRsZUFuZE1lbnVTaG93ID0gIXRoaXMuaWZUaXRsZUFuZE1lbnVTaG93CiAgICAgIGlmICghdGhpcy5pZlRpdGxlQW5kTWVudVNob3cpIHsKICAgICAgICB0aGlzLiRyZWZzLm1lbnVCYXIuaGlkZVNldHRpbmcoKQogICAgICB9CiAgICB9LAogICAgaW5pdEVwdWIoKSB7CiAgICAgIGNvbnN0IHVybCA9ICdodHRwOi8vbG9jYWxob3N0OjgwODEvZXB1Yi8nICsgdGhpcy5maWxlbmFtZSArICcuZXB1YicKICAgICAgLy/nlLXlrZDkuabnmoTop6PmnpDlkozmuLLmn5MKICAgICAgLy/nlJ/miJBFYm9va+WvueixoQogICAgICB0aGlzLmJvb2sgPSBuZXcgRXB1Yih1cmwpCiAgICAgIC8v55Sf5oiQUmVuZGl0aW9u5a+56LGhCiAgICAgIHRoaXMucmVuZGl0aW9uID0gdGhpcy5ib29rLnJlbmRlclRvKCdyZWFkJywgewogICAgICAgIHdpZHRoOiB3aW5kb3cuaW5uZXJXaWR0aCwKICAgICAgICBoZWlnaHQ6IHdpbmRvdy5pbm5lckhlaWdodCwKICAgICAgICBtZXRob2Q6ICdkZWZhdWx0JwogICAgICB9KQogICAgICAvL+mAmui/h1JlbmRpdGlvbuWvueixoeeahGRpc3BsYXnmlrnms5XmuLLmn5PnlLXlrZDkuaYKICAgICAgdGhpcy5yZW5kaXRpb24uZGlzcGxheSgpCiAgICAgIC8v6YCa6L+Hb27mlrnms5Xnu5Hlrprkuovku7YKICAgICAgdGhpcy5yZW5kaXRpb24ub24oJ3RvdWNoc3RhcnQnLCBldmVudCA9PiB7CiAgICAgICAgdGhpcy50b3VjaFN0YXJ0WCA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFgKICAgICAgICB0aGlzLnRvdWNoU3RhcnRUaW1lID0gZXZlbnQudGltZVN0YW1wCiAgICAgIH0pCiAgICAgIHRoaXMucmVuZGl0aW9uLm9uKCd0b3VjaGVuZCcsIGV2ZW50ID0+IHsKICAgICAgICBjb25zdCBvZmZzZXRYID0gZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WCAtIHRoaXMudG91Y2hTdGFydFgKICAgICAgICBjb25zdCB0aW1lID0gZXZlbnQudGltZVN0YW1wIC0gdGhpcy50b3VjaFN0YXJ0VGltZQogICAgICAgIGlmICh0aW1lIDwgNTAwICYmIG9mZnNldFggPiA0MCkgewogICAgICAgICAgdGhpcy5wcmV2UGFnZSgpCiAgICAgICAgfSBlbHNlIGlmICh0aW1lIDwgNTAwICYmIG9mZnNldFggPCAtNDApIHsKICAgICAgICAgIHRoaXMubmV4dFBhZ2UoKQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnNob3dUaXRsZUFuZE1lbnUoKQogICAgICAgIH0KICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpCiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCkKICAgICAgfSkKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBHZXR0ZXJzKFsnZmlsZW5hbWUnXSkKICB9LAogIG1vdW50ZWQoKSB7CiAgICBjb25zdCBmaWxlbmFtZSA9IHRoaXMuJHJvdXRlLnBhcmFtcy5maWxlbmFtZS5zcGxpdCgnfCcpLmpvaW4oJy8nKQogICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3NldEZpbGVuYW1lJywgZmlsZW5hbWUpLnRoZW4oKCkgPT4gewogICAgICB0aGlzLmluaXRFcHViKCkKICAgIH0pCiAgfQp9Cg=="},{"version":3,"sources":["EbookReader.vue"],"names":[],"mappings":";;;;;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EbookReader.vue","sourceRoot":"src/components/Ebook","sourcesContent":["<template>\r\n  <div class=\"ebook-reader\">\r\n    <div id=\"read\"></div>\r\n  </div>\r\n</template>\r\n<script>\r\n  import { mapGetters } from 'vuex'\r\n  import Epub from 'epubjs'\r\n  global.ePub = Epub\r\n  export default {\r\n    methods: {\r\n      prevPage() {\r\n        //调用Rendition的prev方法返回上一页\r\n        if (this.rendition) {\r\n          this.rendition.prev()\r\n        }\r\n      },\r\n      nextPage() {\r\n        //调用Rendition的next方法返回上一页\r\n        if (this.rendition) {\r\n          this.rendition.next()\r\n        }\r\n      },\r\n      toggleTitleAndMenu() {\r\n        this.ifTitleAndMenuShow = !this.ifTitleAndMenuShow\r\n        if (!this.ifTitleAndMenuShow) {\r\n          this.$refs.menuBar.hideSetting()\r\n        }\r\n      },\r\n      initEpub() {\r\n        const url = 'http://localhost:8081/epub/' + this.filename + '.epub'\r\n        //电子书的解析和渲染\r\n        //生成Ebook对象\r\n        this.book = new Epub(url)\r\n        //生成Rendition对象\r\n        this.rendition = this.book.renderTo('read', {\r\n          width: window.innerWidth,\r\n          height: window.innerHeight,\r\n          method: 'default'\r\n        })\r\n        //通过Rendition对象的display方法渲染电子书\r\n        this.rendition.display()\r\n        //通过on方法绑定事件\r\n        this.rendition.on('touchstart', event => {\r\n          this.touchStartX = event.changedTouches[0].clientX\r\n          this.touchStartTime = event.timeStamp\r\n        })\r\n        this.rendition.on('touchend', event => {\r\n          const offsetX = event.changedTouches[0].clientX - this.touchStartX\r\n          const time = event.timeStamp - this.touchStartTime\r\n          if (time < 500 && offsetX > 40) {\r\n            this.prevPage()\r\n          } else if (time < 500 && offsetX < -40) {\r\n            this.nextPage()\r\n          } else {\r\n            this.showTitleAndMenu()\r\n          }\r\n          event.preventDefault()\r\n          event.stopPropagation()\r\n        })\r\n      }\r\n    },\r\n    computed: {\r\n      ...mapGetters(['filename'])\r\n    },\r\n    mounted() {\r\n      const filename = this.$route.params.filename.split('|').join('/')\r\n      this.$store.dispatch('setFilename', filename).then(() => {\r\n        this.initEpub()\r\n      })\r\n    }\r\n  }\r\n</script>"]}]}