{"remainingRequest":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\src\\views\\Ebook\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\src\\views\\Ebook\\index.vue","mtime":1588149179916},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBFYm9va1JlYWRlciBmcm9tICcuLi8uLi9jb21wb25lbnRzL0Vib29rL0Vib29rUmVhZGVyJwppbXBvcnQgRWJvb2tUaXRsZSBmcm9tICcuLi8uLi9jb21wb25lbnRzL0Vib29rL0Vib29rVGl0bGUnCmltcG9ydCBFYm9va01lbnUgZnJvbSAnLi4vLi4vY29tcG9uZW50cy9FYm9vay9FYm9va01lbnUnCmltcG9ydCBFYm9va0Jvb2ttYXJrIGZyb20gJy4uLy4uL2NvbXBvbmVudHMvRWJvb2svRWJvb2tCb29rbWFyaycKaW1wb3J0IEVib29rSGVhZGVyIGZyb20gJy4uLy4uL2NvbXBvbmVudHMvRWJvb2svRWJvb2tIZWFkZXInCmltcG9ydCBFYm9va0Zvb3RlciBmcm9tICcuLi8uLi9jb21wb25lbnRzL0Vib29rL0Vib29rRm9vdGVyJwoKaW1wb3J0IHsgZ2V0UmVhZFRpbWUsIHNhdmVSZWFkVGltZSB9IGZyb20gJy4uLy4uL3V0aWxzL2xvY2FsU3RvcmFnZScKaW1wb3J0IHsgZWJvb2tNaXhpbiB9IGZyb20gJy4uLy4uL3V0aWxzL21peGluJwoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIEVib29rUmVhZGVyLAogICAgRWJvb2tUaXRsZSwKICAgIEVib29rTWVudSwKICAgIEVib29rQm9va21hcmssCiAgICBFYm9va0hlYWRlciwKICAgIEVib29rRm9vdGVyCiAgfSwKICBtaXhpbnM6IFtlYm9va01peGluXSwKICB3YXRjaDogewogICAgb2Zmc2V0WSh2KSB7CiAgICAgIGlmICghdGhpcy5tZW51VmlzaWJsZSAmJiB0aGlzLmJvb2tBdmFpbGFibGUpIHsKICAgICAgICBpZiAodiA+IDApIHsKICAgICAgICAgIHRoaXMubW92ZSh2KQogICAgICAgIH0gZWxzZSBpZiAodiA9PT0gMCkgewogICAgICAgICAgdGhpcy5yZXN0b3JlKCkKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHJlc3RvcmUoKSB7CiAgICAgIHRoaXMuJHJlZnMuZWJvb2suc3R5bGUudG9wID0gMAogICAgICB0aGlzLiRyZWZzLmVib29rLnN0eWxlLnRyYW5zaXRpb24gPSAnYWxsIC4ycyBsaW5lYXInCiAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIHRoaXMuJHJlZnMuZWJvb2suc3R5bGUudHJhbnNpdGlvbiA9ICcnCiAgICAgIH0sIDIwMCkKICAgIH0sCiAgICBtb3ZlKHYpIHsKICAgICAgdGhpcy4kcmVmcy5lYm9vay5zdHlsZS50b3AgPSB2ICsgJ3B4JwogICAgfSwKICAgIHN0YXJ0TG9vcFJlYWRUaW1lKCkgewogICAgICAvL+mYheivu+aXtumXtOiusOW9lQogICAgICBsZXQgcmVhZFRpbWUgPSBnZXRSZWFkVGltZSh0aGlzLmZpbGVuYW1lKQogICAgICBpZiAoIXJlYWRUaW1lKSB7CiAgICAgICAgcmVhZFRpbWUgPSAwCiAgICAgIH0KICAgICAgdGhpcy50YXNrID0gc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgICAgIHJlYWRUaW1lKysKICAgICAgICBpZiAocmVhZFRpbWUgJSAzMCA9PT0gMCkgewogICAgICAgICAgc2F2ZVJlYWRUaW1lKHRoaXMuZmlsZW5hbWUsIHJlYWRUaW1lKQogICAgICAgIH0KICAgICAgfSwgMTAwMCkKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLnN0YXJ0TG9vcFJlYWRUaW1lKCkKICB9LAogIGJlZm9yZURlc3Ryb3koKSB7CiAgICBpZiAodGhpcy50YXNrKSB7CiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy50YXNrKQogICAgfQogIH0KfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;AAWA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/Ebook","sourcesContent":["<template>\r\n  <div class=\"ebook\" ref=\"ebook\">\r\n    <ebook-title></ebook-title>\r\n    <ebook-header></ebook-header>\r\n    <ebook-menu></ebook-menu>\r\n    <ebook-reader></ebook-reader>\r\n    <ebook-bookmark></ebook-bookmark>\r\n    <ebook-footer></ebook-footer>\r\n  </div>\r\n</template>\r\n<script>\r\n  import EbookReader from '../../components/Ebook/EbookReader'\r\n  import EbookTitle from '../../components/Ebook/EbookTitle'\r\n  import EbookMenu from '../../components/Ebook/EbookMenu'\r\n  import EbookBookmark from '../../components/Ebook/EbookBookmark'\r\n  import EbookHeader from '../../components/Ebook/EbookHeader'\r\n  import EbookFooter from '../../components/Ebook/EbookFooter'\r\n\r\n  import { getReadTime, saveReadTime } from '../../utils/localStorage'\r\n  import { ebookMixin } from '../../utils/mixin'\r\n\r\n  export default {\r\n    components: {\r\n      EbookReader,\r\n      EbookTitle,\r\n      EbookMenu,\r\n      EbookBookmark,\r\n      EbookHeader,\r\n      EbookFooter\r\n    },\r\n    mixins: [ebookMixin],\r\n    watch: {\r\n      offsetY(v) {\r\n        if (!this.menuVisible && this.bookAvailable) {\r\n          if (v > 0) {\r\n            this.move(v)\r\n          } else if (v === 0) {\r\n            this.restore()\r\n          }\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      restore() {\r\n        this.$refs.ebook.style.top = 0\r\n        this.$refs.ebook.style.transition = 'all .2s linear'\r\n        setTimeout(() => {\r\n          this.$refs.ebook.style.transition = ''\r\n        }, 200)\r\n      },\r\n      move(v) {\r\n        this.$refs.ebook.style.top = v + 'px'\r\n      },\r\n      startLoopReadTime() {\r\n        //阅读时间记录\r\n        let readTime = getReadTime(this.filename)\r\n        if (!readTime) {\r\n          readTime = 0\r\n        }\r\n        this.task = setInterval(() => {\r\n          readTime++\r\n          if (readTime % 30 === 0) {\r\n            saveReadTime(this.filename, readTime)\r\n          }\r\n        }, 1000)\r\n      }\r\n    },\r\n    mounted() {\r\n      this.startLoopReadTime()\r\n    },\r\n    beforeDestroy() {\r\n      if (this.task) {\r\n        clearInterval(this.task)\r\n      }\r\n    }\r\n  }\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n  @import '../../assets/styles/global.scss';\r\n  .ebook {\r\n    position: absolute;\r\n    width: 100%;\r\n    height: 100%;\r\n    top: 0;\r\n    left: 0;\r\n  }\r\n</style>\r\n"]}]}