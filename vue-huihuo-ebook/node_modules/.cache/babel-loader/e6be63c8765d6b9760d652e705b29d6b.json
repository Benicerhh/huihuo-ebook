{"remainingRequest":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\babel-loader\\lib\\index.js!E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\src\\components\\Ebook\\EbookReader.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\src\\components\\Ebook\\EbookReader.vue","mtime":1587897303924},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0IjsKLy8KLy8KLy8KLy8KLy8KaW1wb3J0IEVwdWIgZnJvbSAiZXB1YmpzIjsKaW1wb3J0IHsgZWJvb2tNaXhpbiB9IGZyb20gIi4uLy4uL3V0aWxzL21peGluIjsKZ2xvYmFsLmVQdWIgPSBFcHViOwpleHBvcnQgZGVmYXVsdCB7CiAgbWl4aW5zOiBbZWJvb2tNaXhpbl0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGlmVGl0bGVBbmRNZW51U2hvdzogZmFsc2UsCiAgICAgIGRlZmF1bHRUaGVtZTogMCwKICAgICAgYm9va0F2YWlsYWJsZTogZmFsc2UsCiAgICAgIC8v5Lmm5piv5ZCm5aSE5LqO5Y+v55So54q25oCBCiAgICAgIHRoZW1lTGlzdDogW3sKICAgICAgICBuYW1lOiAiZGVmYXVsdCIsCiAgICAgICAgc3R5bGU6IHsKICAgICAgICAgIGJvZHk6IHsKICAgICAgICAgICAgY29sb3I6ICIjMDAwIiwKICAgICAgICAgICAgYmFja2dyb3VuZDogIiNmZmYiCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAgbmFtZTogImV5ZSIsCiAgICAgICAgc3R5bGU6IHsKICAgICAgICAgIGJvZHk6IHsKICAgICAgICAgICAgY29sb3I6ICIjMDAwIiwKICAgICAgICAgICAgYmFja2dyb3VuZDogIiNjZWVhYmEiCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAgbmFtZTogIm5pZ2h0IiwKICAgICAgICBzdHlsZTogewogICAgICAgICAgYm9keTogewogICAgICAgICAgICBjb2xvcjogIiNmZmYiLAogICAgICAgICAgICBiYWNrZ3JvdW5kOiAiIzAwMCIKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBuYW1lOiAiZ29sZCIsCiAgICAgICAgc3R5bGU6IHsKICAgICAgICAgIGJvZHk6IHsKICAgICAgICAgICAgY29sb3I6ICIjMDAwIiwKICAgICAgICAgICAgYmFja2dyb3VuZDogInJnYigyNDEsMjM2LDIyNikiCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9XSwKICAgICAgbmF2aWdhdGlvbjoge30KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBwcmV2UGFnZTogZnVuY3Rpb24gcHJldlBhZ2UoKSB7CiAgICAgIC8v6LCD55SoUmVuZGl0aW9u55qEcHJlduaWueazlei/lOWbnuS4iuS4gOmhtQogICAgICBpZiAodGhpcy5yZW5kaXRpb24pIHsKICAgICAgICB0aGlzLnJlbmRpdGlvbi5wcmV2KCk7CiAgICAgICAgdGhpcy5oaWRlVGl0bGVBbmRNZW51KCk7CiAgICAgIH0KICAgIH0sCiAgICBuZXh0UGFnZTogZnVuY3Rpb24gbmV4dFBhZ2UoKSB7CiAgICAgIC8v6LCD55SoUmVuZGl0aW9u55qEbmV4dOaWueazlei/lOWbnuS4iuS4gOmhtQogICAgICBpZiAodGhpcy5yZW5kaXRpb24pIHsKICAgICAgICB0aGlzLnJlbmRpdGlvbi5uZXh0KCk7CiAgICAgICAgdGhpcy5oaWRlVGl0bGVBbmRNZW51KCk7CiAgICAgIH0KICAgIH0sCiAgICB0b2dnbGVUaXRsZUFuZE1lbnU6IGZ1bmN0aW9uIHRvZ2dsZVRpdGxlQW5kTWVudSgpIHsKICAgICAgdGhpcy5zZXRNZW51VmlzaWJsZSghdGhpcy5tZW51VmlzaWJsZSk7CiAgICB9LAogICAgaGlkZVRpdGxlQW5kTWVudTogZnVuY3Rpb24gaGlkZVRpdGxlQW5kTWVudSgpIHsKICAgICAgdGhpcy5zZXRNZW51VmlzaWJsZShmYWxzZSk7CiAgICB9LAogICAgaW5pdEVwdWI6IGZ1bmN0aW9uIGluaXRFcHViKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIHVybCA9ICJodHRwOi8vbG9jYWxob3N0OjgwODEvZXB1Yi8iICsgdGhpcy5maWxlbmFtZSArICIuZXB1YiI7IC8v55S15a2Q5Lmm55qE6Kej5p6Q5ZKM5riy5p+TCiAgICAgIC8v55Sf5oiQRWJvb2vlr7nosaEKCiAgICAgIHRoaXMuYm9vayA9IG5ldyBFcHViKHVybCk7IC8v55Sf5oiQUmVuZGl0aW9u5a+56LGhCgogICAgICB0aGlzLnJlbmRpdGlvbiA9IHRoaXMuYm9vay5yZW5kZXJUbygicmVhZCIsIHsKICAgICAgICB3aWR0aDogd2luZG93LmlubmVyV2lkdGgsCiAgICAgICAgaGVpZ2h0OiB3aW5kb3cuaW5uZXJIZWlnaHQsCiAgICAgICAgbWV0aG9kOiAiZGVmYXVsdCIKICAgICAgfSk7IC8v6YCa6L+HUmVuZGl0aW9u5a+56LGh55qEZGlzcGxheeaWueazlea4suafk+eUteWtkOS5pgoKICAgICAgdGhpcy5yZW5kaXRpb24uZGlzcGxheSgpOyAvL+mAmui/h29u5pa55rOV57uR5a6a5LqL5Lu2CgogICAgICB0aGlzLnJlbmRpdGlvbi5vbigidG91Y2hzdGFydCIsIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgIF90aGlzLnRvdWNoU3RhcnRYID0gZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WDsKICAgICAgICBfdGhpcy50b3VjaFN0YXJ0VGltZSA9IGV2ZW50LnRpbWVTdGFtcDsKICAgICAgfSk7CiAgICAgIHRoaXMucmVuZGl0aW9uLm9uKCJ0b3VjaGVuZCIsIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgIHZhciBvZmZzZXRYID0gZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WCAtIF90aGlzLnRvdWNoU3RhcnRYOwogICAgICAgIHZhciB0aW1lID0gZXZlbnQudGltZVN0YW1wIC0gX3RoaXMudG91Y2hTdGFydFRpbWU7IC8v5qC55o2u5omL5Yq/5LqL5Lu25a6e546w57+76aG15Yqf6IO9CgogICAgICAgIGlmICh0aW1lIDwgNTAwICYmIG9mZnNldFggPiA0MCkgewogICAgICAgICAgX3RoaXMucHJldlBhZ2UoKTsKICAgICAgICB9IGVsc2UgaWYgKHRpbWUgPCA1MDAgJiYgb2Zmc2V0WCA8IC00MCkgewogICAgICAgICAgX3RoaXMubmV4dFBhZ2UoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMudG9nZ2xlVGl0bGVBbmRNZW51KCk7CiAgICAgICAgfSAvL+e7hOe7h+m7mOiupOS6i+S7tuWSjOWGkuazoQoKCiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgfSk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgdmFyIGZpbGVuYW1lID0gdGhpcy4kcm91dGUucGFyYW1zLmZpbGVuYW1lLnNwbGl0KCJ8Iikuam9pbigiLyIpOyAvL+iOt+WPlumdmeaAgei1hOa6kOeahOi3r+W+hAoKICAgIHRoaXMuc2V0RmlsZW5hbWUoZmlsZW5hbWUpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICBfdGhpczIuaW5pdEVwdWIoKTsKICAgIH0pOwogIH0KfTs="},{"version":3,"sources":["EbookReader.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"ebook-reader\">\r\n    <div id=\"read\" @click=\"toggleTitleAndMenu\"></div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport Epub from \"epubjs\";\r\nimport { ebookMixin } from \"../../utils/mixin\";\r\nglobal.ePub = Epub;\r\nexport default {\r\n  mixins: [ebookMixin],\r\n  data() {\r\n    return {\r\n      ifTitleAndMenuShow: false,\r\n      defaultTheme: 0,\r\n      bookAvailable: false, //书是否处于可用状态\r\n      themeList: [\r\n        {\r\n          name: \"default\",\r\n          style: {\r\n            body: {\r\n              color: \"#000\",\r\n              background: \"#fff\"\r\n            }\r\n          }\r\n        },\r\n        {\r\n          name: \"eye\",\r\n          style: {\r\n            body: {\r\n              color: \"#000\",\r\n              background: \"#ceeaba\"\r\n            }\r\n          }\r\n        },\r\n        {\r\n          name: \"night\",\r\n          style: {\r\n            body: {\r\n              color: \"#fff\",\r\n              background: \"#000\"\r\n            }\r\n          }\r\n        },\r\n        {\r\n          name: \"gold\",\r\n          style: {\r\n            body: {\r\n              color: \"#000\",\r\n              background: \"rgb(241,236,226)\"\r\n            }\r\n          }\r\n        }\r\n      ],\r\n      navigation: {}\r\n    };\r\n  },\r\n  methods: {\r\n    prevPage() {\r\n      //调用Rendition的prev方法返回上一页\r\n      if (this.rendition) {\r\n        this.rendition.prev();\r\n        this.hideTitleAndMenu();\r\n      }\r\n    },\r\n    nextPage() {\r\n      //调用Rendition的next方法返回上一页\r\n      if (this.rendition) {\r\n        this.rendition.next();\r\n        this.hideTitleAndMenu();\r\n      }\r\n    },\r\n    toggleTitleAndMenu() {\r\n      this.setMenuVisible(!this.menuVisible);\r\n    },\r\n    hideTitleAndMenu() {\r\n      this.setMenuVisible(false);\r\n    },\r\n    initEpub() {\r\n      const url = \"http://localhost:8081/epub/\" + this.filename + \".epub\";\r\n      //电子书的解析和渲染\r\n      //生成Ebook对象\r\n      this.book = new Epub(url);\r\n      //生成Rendition对象\r\n      this.rendition = this.book.renderTo(\"read\", {\r\n        width: window.innerWidth,\r\n        height: window.innerHeight,\r\n        method: \"default\"\r\n      });\r\n      //通过Rendition对象的display方法渲染电子书\r\n      this.rendition.display();\r\n      //通过on方法绑定事件\r\n      this.rendition.on(\"touchstart\", event => {\r\n        this.touchStartX = event.changedTouches[0].clientX;\r\n        this.touchStartTime = event.timeStamp;\r\n      });\r\n      this.rendition.on(\"touchend\", event => {\r\n        const offsetX = event.changedTouches[0].clientX - this.touchStartX;\r\n        const time = event.timeStamp - this.touchStartTime;\r\n        //根据手势事件实现翻页功能\r\n        if (time < 500 && offsetX > 40) {\r\n          this.prevPage();\r\n        } else if (time < 500 && offsetX < -40) {\r\n          this.nextPage();\r\n        } else {\r\n          this.toggleTitleAndMenu();\r\n        }\r\n        //组织默认事件和冒泡\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n      });\r\n    }\r\n  },\r\n  mounted() {\r\n    const filename = this.$route.params.filename.split(\"|\").join(\"/\");\r\n    //获取静态资源的路径\r\n    this.setFilename(filename).then(() => {\r\n      this.initEpub();\r\n    });\r\n  }\r\n};\r\n</script>\r\n"],"sourceRoot":"src/components/Ebook"}]}