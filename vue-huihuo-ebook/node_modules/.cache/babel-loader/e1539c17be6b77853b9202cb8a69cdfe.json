{"remainingRequest":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\thread-loader\\dist\\cjs.js!E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\babel-loader\\lib\\index.js!E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\src\\views\\store\\StoreList.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\src\\views\\store\\StoreList.vue","mtime":1588733065196},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmRleC1vZiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgRGV0YWlsVGl0bGUgZnJvbSAnLi4vLi4vY29tcG9uZW50cy9kZXRhaWwvRGV0YWlsVGl0bGUnOwppbXBvcnQgU2Nyb2xsIGZyb20gJy4uLy4uL2NvbXBvbmVudHMvY29tbW9uL1Njcm9sbCc7CmltcG9ydCBGZWF0dXJlZCBmcm9tICcuLi8uLi9jb21wb25lbnRzL2hvbWUvRmVhdHVyZWQnOwppbXBvcnQgeyByZWFsUHggfSBmcm9tICcuLi8uLi91dGlscy91dGlscyc7CmltcG9ydCB7IGxpc3QgfSBmcm9tICcuLi8uLi9hcGkvc3RvcmUnOwppbXBvcnQgeyBjYXRlZ29yeUxpc3QsIGNhdGVnb3J5VGV4dCB9IGZyb20gJy4uLy4uL3V0aWxzL3N0b3JlJzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIERldGFpbFRpdGxlOiBEZXRhaWxUaXRsZSwKICAgIFNjcm9sbDogU2Nyb2xsLAogICAgRmVhdHVyZWQ6IEZlYXR1cmVkCiAgfSwKICBjb21wdXRlZDogewogICAgLy8g5Yqo5oCB55Sf5oiQ5qCH6aKY5pWw5o2uCiAgICB0aXRsZTogZnVuY3Rpb24gdGl0bGUoKSB7CiAgICAgIGlmICh0aGlzLmxpc3QpIHsKICAgICAgICByZXR1cm4gdGhpcy50b3RhbCAmJiB0aGlzLiR0KCdob21lLmFsbEJvb2snKS5yZXBsYWNlKCckMScsIHRoaXMudG90YWxOdW1iZXIpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICB9LAogICAgLy8g6I635Y+W5b2T5YmN5YiX6KGo5Lit55S15a2Q5Lmm5oC75pWwCiAgICB0b3RhbE51bWJlcjogZnVuY3Rpb24gdG90YWxOdW1iZXIoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgbnVtID0gMDsKICAgICAgT2JqZWN0LmtleXModGhpcy5saXN0KS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICBudW0gKz0gX3RoaXMubGlzdFtrZXldLmxlbmd0aDsKICAgICAgfSk7CiAgICAgIHJldHVybiBudW07CiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbGlzdDogbnVsbCwKICAgICAgdG90YWw6IG51bGwKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDojrflj5bliIbnsbvmlofmnKwKICAgIGdldENhdGVnb3J5VGV4dDogZnVuY3Rpb24gZ2V0Q2F0ZWdvcnlUZXh0KGtleSkgewogICAgICByZXR1cm4gIiIuY29uY2F0KGNhdGVnb3J5VGV4dChjYXRlZ29yeUxpc3Rba2V5XSwgdGhpcyksICIoIikuY29uY2F0KHRoaXMubGlzdFtrZXldLmxlbmd0aCwgIikiKTsKICAgIH0sCiAgICBiYWNrOiBmdW5jdGlvbiBiYWNrKCkgewogICAgICB0aGlzLiRyb3V0ZXIuZ28oLTEpOwogICAgfSwKICAgIC8vIOagh+mimOmYtOW9seeahOmakOiXj+eKtuaAgQogICAgb25TY3JvbGw6IGZ1bmN0aW9uIG9uU2Nyb2xsKG9mZnNldFkpIHsKICAgICAgaWYgKG9mZnNldFkgPiByZWFsUHgoNDIpKSB7CiAgICAgICAgdGhpcy4kcmVmcy50aXRsZS5zaG93U2hhZG93KCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kcmVmcy50aXRsZS5oaWRlU2hhZG93KCk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDpgJrov4dBUEnojrflj5bliIbnsbvliJfooagKICAgIGdldExpc3Q6IGZ1bmN0aW9uIGdldExpc3QoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgbGlzdCgpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMyLmxpc3QgPSByZXNwb25zZS5kYXRhLmRhdGE7CiAgICAgICAgX3RoaXMyLnRvdGFsID0gcmVzcG9uc2UuZGF0YS50b3RhbDsKICAgICAgICB2YXIgY2F0ZWdvcnkgPSBfdGhpczIuJHJvdXRlLnF1ZXJ5LmNhdGVnb3J5OwogICAgICAgIHZhciBrZXl3b3JkID0gX3RoaXMyLiRyb3V0ZS5xdWVyeS5rZXl3b3JkOwoKICAgICAgICBpZiAoY2F0ZWdvcnkpIHsKICAgICAgICAgIC8vIOWmguaenOeUqOaIt+S8oOWFpeS6huWIhuexu+aVsOaNru+8jOWImeS7jue7k+aenOS4reaQnOe0ouebuOW6lOeahOWIhuexu+aVsOaNruW5tui/m+ihjOWxleekugogICAgICAgICAgdmFyIGtleSA9IE9iamVjdC5rZXlzKF90aGlzMi5saXN0KS5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgcmV0dXJuIGl0ZW0gPT09IGNhdGVnb3J5OwogICAgICAgICAgfSlbMF07CiAgICAgICAgICB2YXIgZGF0YSA9IF90aGlzMi5saXN0W2tleV07CiAgICAgICAgICBfdGhpczIubGlzdCA9IHt9OwogICAgICAgICAgX3RoaXMyLmxpc3Rba2V5XSA9IGRhdGE7CiAgICAgICAgfSBlbHNlIGlmIChrZXl3b3JkKSB7CiAgICAgICAgICAvLyDlpoLmnpznlKjmiLfovpPlhaXkuoblhbPplK7lrZfvvIzliJnpgJrov4fkuablkI3ov5vooYzlhbPplK7lrZfljLnphY3vvIjmkJzntKLnrpfms5XvvIkKICAgICAgICAgIE9iamVjdC5rZXlzKF90aGlzMi5saXN0KS5maWx0ZXIoZnVuY3Rpb24gKGtleSkgewogICAgICAgICAgICBfdGhpczIubGlzdFtrZXldID0gX3RoaXMyLmxpc3Rba2V5XS5maWx0ZXIoZnVuY3Rpb24gKGJvb2spIHsKICAgICAgICAgICAgICByZXR1cm4gYm9vay5maWxlTmFtZS5pbmRleE9mKGtleXdvcmQpID49IDA7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gX3RoaXMyLmxpc3Rba2V5XS5sZW5ndGggPiAwOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldExpc3QoKTsKICAgIHRoaXMudGl0bGVUZXh0ID0gdGhpcy4kcm91dGUucXVlcnkuY2F0ZWdvcnlUZXh0OwogIH0KfTs="},{"version":3,"sources":["StoreList.vue"],"names":[],"mappings":"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","sourcesContent":["<!-- 书城列表组件 -->\r\n<template>\r\n  <div class=\"book-list-wrapper\">\r\n    <detail-title :title=\"title\" :showShelf=\"true\" @back=\"back\" ref=\"title\"></detail-title>\r\n    <scroll\r\n      class=\"book-list-scroll-wrapper\"\r\n      :top=\"42\"\r\n      @onScroll=\"onScroll\"\r\n      ref=\"scroll\"\r\n    >\r\n      <featured\r\n        :data=\"value\"\r\n        :titleText=\"titleText ? titleText : getCategoryText(key)\"\r\n        :btnText=\"''\"\r\n        v-for=\"(value, key, index) in list\"\r\n        :key=\"index\"\r\n      ></featured>\r\n    </scroll>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import DetailTitle from '../../components/detail/DetailTitle'\r\n  import Scroll from '../../components/common/Scroll'\r\n  import Featured from '../../components/home/Featured'\r\n  import { realPx } from '../../utils/utils'\r\n  import { list } from '../../api/store'\r\n  import { categoryList, categoryText } from '../../utils/store'\r\n\r\n  export default {\r\n    components: {\r\n      DetailTitle,\r\n      Scroll,\r\n      Featured\r\n    },\r\n    computed: {\r\n      // 动态生成标题数据\r\n      title() {\r\n        if (this.list) {\r\n          return (\r\n            this.total && this.$t('home.allBook').replace('$1', this.totalNumber)\r\n          )\r\n        } else {\r\n          return null\r\n        }\r\n      },\r\n      // 获取当前列表中电子书总数\r\n      totalNumber() {\r\n        let num = 0\r\n        Object.keys(this.list).forEach(key => {\r\n          num += this.list[key].length\r\n        })\r\n        return num\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        list: null,\r\n        total: null\r\n      }\r\n    },\r\n    methods: {\r\n      // 获取分类文本\r\n      getCategoryText(key) {\r\n        return `${categoryText(categoryList[key], this)}(${\r\n          this.list[key].length\r\n        })`\r\n      },\r\n      back() {\r\n        this.$router.go(-1)\r\n      },\r\n      // 标题阴影的隐藏状态\r\n      onScroll(offsetY) {\r\n        if (offsetY > realPx(42)) {\r\n          this.$refs.title.showShadow()\r\n        } else {\r\n          this.$refs.title.hideShadow()\r\n        }\r\n      },\r\n      // 通过API获取分类列表\r\n      getList() {\r\n        list().then(response => {\r\n          this.list = response.data.data\r\n          this.total = response.data.total\r\n          const category = this.$route.query.category\r\n          const keyword = this.$route.query.keyword\r\n          if (category) {\r\n            // 如果用户传入了分类数据，则从结果中搜索相应的分类数据并进行展示\r\n            const key = Object.keys(this.list).filter(\r\n              item => item === category\r\n            )[0]\r\n            const data = this.list[key]\r\n            this.list = {}\r\n            this.list[key] = data\r\n          } else if (keyword) {\r\n            // 如果用户输入了关键字，则通过书名进行关键字匹配（搜索算法）\r\n            Object.keys(this.list).filter(key => {\r\n              this.list[key] = this.list[key].filter(\r\n                book => book.fileName.indexOf(keyword) >= 0\r\n              )\r\n              return this.list[key].length > 0\r\n            })\r\n          }\r\n        })\r\n      }\r\n    },\r\n    created() {\r\n      this.getList()\r\n      this.titleText = this.$route.query.categoryText\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\" rel=\"stylesheet/scss\" scoped>\r\n  @import '../../assets/styles/global';\r\n\r\n  .book-list-wrapper {\r\n    width: 100%;\r\n    height: 100%;\r\n    background: white;\r\n  }\r\n</style>\r\n"],"sourceRoot":"src/views/store"}]}