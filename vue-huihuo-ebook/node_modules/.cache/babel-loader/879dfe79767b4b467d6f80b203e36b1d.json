{"remainingRequest":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\babel-loader\\lib\\index.js!E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\src\\components\\speak\\SpeakBottom.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\src\\components\\speak\\SpeakBottom.vue","mtime":1588943258444},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yIjsKaW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJFOlxcSm9kUHJlcGFyYXRpb25cXFByYWN0aWNlXFxcdTk4NzlcdTc2RUVcXGh1aWh1by1lYm9va1xcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBzdG9yZVNoZWxmTWl4aW4gfSBmcm9tICIuLi8uLi91dGlscy9taXhpbiI7CmltcG9ydCB7IHJlbW92ZUZyb21Cb29rU2hlbGYsIGFkZFRvU2hlbGYgfSBmcm9tICIuLi8uLi91dGlscy9zdG9yZSI7CmltcG9ydCB7IGdldEJvb2tTaGVsZiwgc2F2ZUJvb2tTaGVsZiB9IGZyb20gIi4uLy4uL3V0aWxzL2xvY2FsU3RvcmFnZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBtaXhpbnM6IFtzdG9yZVNoZWxmTWl4aW5dLAogIHByb3BzOiB7CiAgICBjaGFwdGVyOiBPYmplY3QsCiAgICBjdXJyZW50U2VjdGlvbkluZGV4OiBOdW1iZXIsCiAgICBjdXJyZW50U2VjdGlvblRvdGFsOiBOdW1iZXIsCiAgICBzaG93UGxheTogQm9vbGVhbiwKICAgIGlzUGxheWluZzogQm9vbGVhbiwKICAgIHBsYXlJbmZvOiBPYmplY3QsCiAgICBib29rSXRlbTogT2JqZWN0CiAgfSwKICBjb21wdXRlZDogewogICAgLy8g5Yik5pat5b2T5YmN55qE55S15a2Q5Lmm5piv5ZCm5a2Y5Zyo5LqO5Lmm5p62CiAgICBpbkJvb2tTaGVsZjogZnVuY3Rpb24gaW5Cb29rU2hlbGYoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAodGhpcy5ib29rSXRlbSAmJiB0aGlzLnNoZWxmTGlzdCkgewogICAgICAgIC8vIOWumuS5ieS4gOS4quiHquaJp+ihjOWHveaVsO+8jOWwhuS5puaetui9rOS4uuS4gOe7tOaVsOe7hOe7k+aehO+8jOW5tuS4lOWPquS/neeVmXR5cGXkuLox55qE5pWw5o2u77yIdHlwZT0x55qE5Li655S15a2Q5Lmm77yJCiAgICAgICAgdmFyIGZsYXRTaGVsZiA9IGZ1bmN0aW9uIGZsYXR0ZW4oYXJyKSB7CiAgICAgICAgICB2YXIgX3JlZjsKCiAgICAgICAgICByZXR1cm4gKF9yZWYgPSBbXSkuY29uY2F0LmFwcGx5KF9yZWYsIF90b0NvbnN1bWFibGVBcnJheShhcnIubWFwKGZ1bmN0aW9uICh2KSB7CiAgICAgICAgICAgIHJldHVybiB2Lml0ZW1MaXN0ID8gW3ZdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoZmxhdHRlbih2Lml0ZW1MaXN0KSkpIDogdjsKICAgICAgICAgIH0pKSk7CiAgICAgICAgfSh0aGlzLnNoZWxmTGlzdCkuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICByZXR1cm4gaXRlbS50eXBlID09PSAxOwogICAgICAgIH0pOyAvLyDmn6Xmib7lvZPliY3nlLXlrZDkuabmmK/lkKblrZjlnKjkuo7kuabmnrYKCgogICAgICAgIHZhciBib29rID0gZmxhdFNoZWxmLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgcmV0dXJuIGl0ZW0uZmlsZU5hbWUgPT09IF90aGlzLmJvb2tJdGVtLmZpbGVOYW1lOwogICAgICAgIH0pOwogICAgICAgIHJldHVybiBib29rICYmIGJvb2subGVuZ3RoID4gMDsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHRvZ2dsZVBsYXk6IGZ1bmN0aW9uIHRvZ2dsZVBsYXkoKSB7CiAgICAgIHRoaXMuJHBhcmVudC50b2dnbGVQbGF5KCk7CiAgICB9LAogICAgb25QbGF5aW5nQ2FyZENsaWNrOiBmdW5jdGlvbiBvblBsYXlpbmdDYXJkQ2xpY2soKSB7CiAgICAgIHRoaXMuJGVtaXQoIm9uUGxheWluZ0NhcmRDbGljayIpOwogICAgfSwKICAgIGFkZE9yUmVtb3ZlU2hlbGY6IGZ1bmN0aW9uIGFkZE9yUmVtb3ZlU2hlbGYoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgLy8g5aaC5p6c55S15a2Q5Lmm5a2Y5Zyo5LqO5Lmm5p6277yM5YiZ5LuO5Lmm5p625Lit56e76Zmk55S15a2Q5LmmCiAgICAgIGlmICh0aGlzLmluQm9va1NoZWxmKSB7CiAgICAgICAgdGhpcy5zZXRTaGVsZkxpc3QocmVtb3ZlRnJvbUJvb2tTaGVsZih0aGlzLmJvb2tJdGVtKSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAvLyDlsIbkuabmnrbmlbDmja7kv53lrZjliLBMb2NhbFN0b3JhZ2UKICAgICAgICAgIHNhdmVCb29rU2hlbGYoX3RoaXMyLnNoZWxmTGlzdCk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8g5aaC5p6c55S15a2Q5Lmm5LiN5a2Y5Zyo5LqO5Lmm5p6277yM5YiZ5re75Yqg55S15a2Q5Lmm5Yiw5Lmm5p62CiAgICAgICAgYWRkVG9TaGVsZih0aGlzLmJvb2tJdGVtKTsKICAgICAgICB0aGlzLnNldFNoZWxmTGlzdChnZXRCb29rU2hlbGYoKSk7CiAgICAgIH0KCiAgICAgIHRoaXMuaXNJbkJvb2tTaGVsZiA9ICF0aGlzLmlzSW5Cb29rU2hlbGY7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["SpeakBottom.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4CA,SAAA,eAAA,QAAA,mBAAA;AACA,SAAA,mBAAA,EAAA,UAAA,QAAA,mBAAA;AACA,SAAA,YAAA,EAAA,aAAA,QAAA,0BAAA;AAEA,eAAA;AACA,EAAA,MAAA,EAAA,CAAA,eAAA,CADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,OAAA,EAAA,MADA;AAEA,IAAA,mBAAA,EAAA,MAFA;AAGA,IAAA,mBAAA,EAAA,MAHA;AAIA,IAAA,QAAA,EAAA,OAJA;AAKA,IAAA,SAAA,EAAA,OALA;AAMA,IAAA,QAAA,EAAA,MANA;AAOA,IAAA,QAAA,EAAA;AAPA,GAFA;AAWA,EAAA,QAAA,EAAA;AACA;AACA,IAAA,WAFA,yBAEA;AAAA;;AACA,UAAA,KAAA,QAAA,IAAA,KAAA,SAAA,EAAA;AACA;AACA,YAAA,SAAA,GAAA,SAAA,OAAA,CAAA,GAAA,EAAA;AAAA;;AACA,iBAAA,YAAA,MAAA,gCACA,GAAA,CAAA,GAAA,CAAA,UAAA,CAAA;AAAA,mBAAA,CAAA,CAAA,QAAA,IAAA,CAAA,4BAAA,OAAA,CAAA,CAAA,CAAA,QAAA,CAAA,KAAA,CAAA;AAAA,WAAA,CADA,EAAA;AAGA,SAJA,CAIA,KAAA,SAJA,EAIA,MAJA,CAIA,UAAA,IAAA;AAAA,iBAAA,IAAA,CAAA,IAAA,KAAA,CAAA;AAAA,SAJA,CAAA,CAFA,CAOA;;;AACA,YAAA,IAAA,GAAA,SAAA,CAAA,MAAA,CACA,UAAA,IAAA;AAAA,iBAAA,IAAA,CAAA,QAAA,KAAA,KAAA,CAAA,QAAA,CAAA,QAAA;AAAA,SADA,CAAA;AAGA,eAAA,IAAA,IAAA,IAAA,CAAA,MAAA,GAAA,CAAA;AACA,OAZA,MAYA;AACA,eAAA,KAAA;AACA;AACA;AAlBA,GAXA;AA+BA,EAAA,OAAA,EAAA;AACA,IAAA,UADA,wBACA;AACA,WAAA,OAAA,CAAA,UAAA;AACA,KAHA;AAIA,IAAA,kBAJA,gCAIA;AACA,WAAA,KAAA,CAAA,oBAAA;AACA,KANA;AAOA,IAAA,gBAPA,8BAOA;AAAA;;AACA;AACA,UAAA,KAAA,WAAA,EAAA;AACA,aAAA,YAAA,CAAA,mBAAA,CAAA,KAAA,QAAA,CAAA,EAAA,IAAA,CAAA,YAAA;AACA;AACA,UAAA,aAAA,CAAA,MAAA,CAAA,SAAA,CAAA;AACA,SAHA;AAIA,OALA,MAKA;AACA;AACA,QAAA,UAAA,CAAA,KAAA,QAAA,CAAA;AACA,aAAA,YAAA,CAAA,YAAA,EAAA;AACA;;AACA,WAAA,aAAA,GAAA,CAAA,KAAA,aAAA;AACA;AApBA;AA/BA,CAAA","sourcesContent":["<template>\n  <div class=\"bottom-wrapper\" :class=\"{ 'hide-play': !showPlay }\">\n    <div\n      class=\"bottom-playing-wrapper\"\n      @click.stop.prevent=\"onPlayingCardClick\"\n      v-if=\"showPlay\"\n    >\n      <div class=\"bottom-playing-left\">\n        <div class=\"icon-play-wrapper\" @click.stop.prevent=\"togglePlay\">\n          <span class=\"icon-play_go\" v-if=\"!isPlaying\"></span>\n          <span class=\"icon-play_pause\" v-else></span>\n        </div>\n      </div>\n      <div class=\"bottom-playing-right\">\n        <div class=\"bottom-playing-chapter-text\">\n          <span class=\"chapter-label\">{{ chapter ? chapter.label : \"\" }}</span>\n          <span\n            class=\"bottom-playing-page-text\"\n            v-if=\"currentSectionIndex && currentSectionTotal\"\n            >( {{ currentSectionIndex }} / {{ currentSectionTotal }} )</span\n          >\n        </div>\n        <div class=\"bottom-playing-page-text\">\n          {{ playInfo ? playInfo.currentMinute : \"00\" }}:{{\n            playInfo ? playInfo.currentSecond : \"00\"\n          }}\n          / {{ playInfo ? playInfo.totalMinute : \"00\" }}:{{\n            playInfo ? playInfo.totalSecond : \"00\"\n          }}\n        </div>\n      </div>\n    </div>\n    <div class=\"bottom-btn-wrapper\">\n      <span class=\"icon-check\" v-if=\"inBookShelf\"></span>\n      <span class=\"bottom-btn-text\" @click.stop.prevent=\"addOrRemoveShelf()\">{{\n        inBookShelf\n          ? $t(\"detail.isAddedToShelf\")\n          : $t(\"detail.addOrRemoveShelf\")\n      }}</span>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { storeShelfMixin } from \"../../utils/mixin\";\nimport { removeFromBookShelf, addToShelf } from \"../../utils/store\";\nimport { getBookShelf, saveBookShelf } from \"../../utils/localStorage\";\n\nexport default {\n  mixins: [storeShelfMixin],\n  props: {\n    chapter: Object,\n    currentSectionIndex: Number,\n    currentSectionTotal: Number,\n    showPlay: Boolean,\n    isPlaying: Boolean,\n    playInfo: Object,\n    bookItem: Object\n  },\n  computed: {\n    // 判断当前的电子书是否存在于书架\n    inBookShelf() {\n      if (this.bookItem && this.shelfList) {\n        // 定义一个自执行函数，将书架转为一维数组结构，并且只保留type为1的数据（type=1的为电子书）\n        const flatShelf = (function flatten(arr) {\n          return [].concat(\n            ...arr.map(v => (v.itemList ? [v, ...flatten(v.itemList)] : v))\n          );\n        })(this.shelfList).filter(item => item.type === 1);\n        // 查找当前电子书是否存在于书架\n        const book = flatShelf.filter(\n          item => item.fileName === this.bookItem.fileName\n        );\n        return book && book.length > 0;\n      } else {\n        return false;\n      }\n    }\n  },\n  methods: {\n    togglePlay() {\n      this.$parent.togglePlay();\n    },\n    onPlayingCardClick() {\n      this.$emit(\"onPlayingCardClick\");\n    },\n    addOrRemoveShelf() {\n      // 如果电子书存在于书架，则从书架中移除电子书\n      if (this.inBookShelf) {\n        this.setShelfList(removeFromBookShelf(this.bookItem)).then(() => {\n          // 将书架数据保存到LocalStorage\n          saveBookShelf(this.shelfList);\n        });\n      } else {\n        // 如果电子书不存在于书架，则添加电子书到书架\n        addToShelf(this.bookItem);\n        this.setShelfList(getBookShelf());\n      }\n      this.isInBookShelf = !this.isInBookShelf;\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" rel=\"stylesheet/scss\" scoped>\n@import \"../../assets/styles/global\";\n\n.bottom-wrapper {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  z-index: 110;\n  width: 100%;\n  height: px2rem(116);\n  background: white;\n  box-shadow: 0 px2rem(-2) px2rem(2) 0 rgba(0, 0, 0, 0.1);\n  &.hide-play {\n    height: px2rem(52);\n  }\n  .bottom-playing-wrapper {\n    display: flex;\n    width: 100%;\n    height: px2rem(64);\n    .bottom-playing-left {\n      flex: 0 0 px2rem(70);\n      width: px2rem(70);\n      @include center;\n      .icon-play-wrapper {\n        flex: 0 0 px2rem(100);\n        @include center;\n        &:active {\n          opacity: 0.5;\n        }\n        .icon-play_go {\n          font-size: px2rem(40);\n          color: $color-blue;\n        }\n        .icon-play_pause {\n          font-size: px2rem(40);\n          color: $color-blue;\n        }\n      }\n    }\n    .bottom-playing-right {\n      flex: 1;\n      padding-right: px2rem(15);\n      box-sizing: border-box;\n      @include columnLeft;\n      .bottom-playing-chapter-text {\n        max-width: px2rem(305);\n        color: #333;\n        font-size: px2rem(16);\n        line-height: px2rem(19);\n        @include ellipsis;\n      }\n      .bottom-playing-page-text {\n        color: #666;\n        font-size: px2rem(10);\n        margin-top: px2rem(5);\n      }\n    }\n  }\n  .bottom-btn-wrapper {\n    width: 100%;\n    height: px2rem(52);\n    border-top: px2rem(1) solid #eee;\n    box-sizing: border-box;\n    color: $color-blue;\n    @include center;\n    font-size: px2rem(14);\n    font-weight: bold;\n    .icon-check {\n      margin-right: px2rem(5);\n    }\n  }\n}\n</style>\n"],"sourceRoot":"src/components/speak"}]}