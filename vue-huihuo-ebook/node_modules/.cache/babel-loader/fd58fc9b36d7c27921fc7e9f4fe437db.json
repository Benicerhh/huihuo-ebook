{"remainingRequest":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\babel-loader\\lib\\index.js!E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\src\\utils\\localForage.js","dependencies":[{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\src\\utils\\localForage.js","mtime":1588674978127},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGxvY2FsRm9yYWdlIGZyb20gJ2xvY2FsZm9yYWdlJzsgLy9sb2NhbGZvcmFnZemHh+eUqOW8guatpeeahOaWueW8jwoKZXhwb3J0IGZ1bmN0aW9uIHNldExvY2FsRm9yYWdlKGtleSwgZGF0YSwgY2IsIGNiMikgewogIGxvY2FsRm9yYWdlLnNldEl0ZW0oa2V5LCBkYXRhKS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkgewogICAgaWYgKGNiKSBjYih2YWx1ZSk7CiAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgaWYgKGNiMikgY2IyKGVycik7CiAgfSk7Cn0KZXhwb3J0IGZ1bmN0aW9uIGdldExvY2FsRm9yYWdlKGtleSwgY2IpIHsKICBsb2NhbEZvcmFnZS5nZXRJdGVtKGtleSwgZnVuY3Rpb24gKGVyciwgdmFsdWUpIHsKICAgIGNiKGVyciwgdmFsdWUpOwogIH0pOwp9CmV4cG9ydCBmdW5jdGlvbiByZW1vdmVMb2NhbEZvcmFnZShrZXksIGNiLCBjYjIpIHsKICBsb2NhbEZvcmFnZS5yZW1vdmVJdGVtKGtleSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICBpZiAoY2IpIGNiKCk7CiAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgaWYgKGNiMikgY2IyKGVycik7CiAgfSk7Cn0KZXhwb3J0IGZ1bmN0aW9uIGNsZWFyTG9jYWxGb3JhZ2UoY2IsIGNiMikgewogIGxvY2FsRm9yYWdlLmNsZWFyKCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICBpZiAoY2IpIGNiKCk7CiAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgaWYgKGNiMikgY2IyKGVycik7CiAgfSk7Cn0KZXhwb3J0IGZ1bmN0aW9uIGxlbmd0aExvY2FsRm9yYWdlKGNiKSB7CiAgbG9jYWxGb3JhZ2UubGVuZ3RoKCkudGhlbihmdW5jdGlvbiAobnVtYmVyT2ZLZXlzKSB7CiAgICBpZiAoY2IpIGNiKG51bWJlck9mS2V5cyk7IC8vIGNvbnNvbGUubG9nKG51bWJlck9mS2V5cykKICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICBpZiAoZXJyKSB7fSAvLyBjb25zb2xlLmxvZyhlcnIpCgogIH0pOwp9CmV4cG9ydCBmdW5jdGlvbiBpdGVyYXRvckxvY2FsRm9yYWdlKCkgewogIGxvY2FsRm9yYWdlLml0ZXJhdGUoZnVuY3Rpb24gKHZhbHVlLCBrZXksIGl0ZXJhdGlvbk51bWJlcikgey8vIGNvbnNvbGUubG9nKFtrZXksIHZhbHVlXSkKICB9KS50aGVuKGZ1bmN0aW9uICgpIHsvLyBjb25zb2xlLmxvZygnSXRlcmF0aW9uIGhhcyBjb21wbGV0ZWQnKQogIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgIGlmIChlcnIpIHt9IC8vIGNvbnNvbGUubG9nKGVycikKCiAgfSk7Cn0KZXhwb3J0IGZ1bmN0aW9uIHN1cHBvcnQoKSB7CiAgdmFyIGluZGV4ZWREQiA9IHdpbmRvdy5pbmRleGVkREIgfHwgd2luZG93LndlYmtpdEluZGV4ZWREQiB8fCB3aW5kb3cubW96SW5kZXhlZERCIHx8IG51bGw7CgogIGlmIChpbmRleGVkREIpIHsKICAgIHJldHVybiB0cnVlOwogIH0gZWxzZSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQp9"},{"version":3,"sources":["E:/JodPreparation/Practice/项目/huihuo-ebook/src/utils/localForage.js"],"names":["localForage","setLocalForage","key","data","cb","cb2","setItem","then","value","catch","err","getLocalForage","getItem","removeLocalForage","removeItem","clearLocalForage","clear","lengthLocalForage","length","numberOfKeys","iteratorLocalForage","iterate","iterationNumber","support","indexedDB","window","webkitIndexedDB","mozIndexedDB"],"mappings":"AAAA,OAAOA,WAAP,MAAwB,aAAxB,C,CACA;;AACA,OAAO,SAASC,cAAT,CAAwBC,GAAxB,EAA6BC,IAA7B,EAAmCC,EAAnC,EAAuCC,GAAvC,EAA4C;AACjDL,EAAAA,WAAW,CAACM,OAAZ,CAAoBJ,GAApB,EAAyBC,IAAzB,EAA+BI,IAA/B,CAAoC,UAACC,KAAD,EAAW;AAC7C,QAAIJ,EAAJ,EAAQA,EAAE,CAACI,KAAD,CAAF;AACT,GAFD,EAEGC,KAFH,CAES,UAAUC,GAAV,EAAe;AACtB,QAAIL,GAAJ,EAASA,GAAG,CAACK,GAAD,CAAH;AACV,GAJD;AAKD;AAED,OAAO,SAASC,cAAT,CAAwBT,GAAxB,EAA6BE,EAA7B,EAAiC;AACtCJ,EAAAA,WAAW,CAACY,OAAZ,CAAoBV,GAApB,EAAyB,UAACQ,GAAD,EAAMF,KAAN,EAAgB;AACvCJ,IAAAA,EAAE,CAACM,GAAD,EAAMF,KAAN,CAAF;AACD,GAFD;AAGD;AAED,OAAO,SAASK,iBAAT,CAA2BX,GAA3B,EAAgCE,EAAhC,EAAoCC,GAApC,EAAyC;AAC9CL,EAAAA,WAAW,CAACc,UAAZ,CAAuBZ,GAAvB,EAA4BK,IAA5B,CAAiC,YAAY;AAC3C,QAAIH,EAAJ,EAAQA,EAAE;AACX,GAFD,EAEGK,KAFH,CAES,UAAUC,GAAV,EAAe;AACtB,QAAIL,GAAJ,EAASA,GAAG,CAACK,GAAD,CAAH;AACV,GAJD;AAKD;AAED,OAAO,SAASK,gBAAT,CAA0BX,EAA1B,EAA8BC,GAA9B,EAAmC;AACxCL,EAAAA,WAAW,CAACgB,KAAZ,GAAoBT,IAApB,CAAyB,YAAY;AACnC,QAAIH,EAAJ,EAAQA,EAAE;AACX,GAFD,EAEGK,KAFH,CAES,UAAUC,GAAV,EAAe;AACtB,QAAIL,GAAJ,EAASA,GAAG,CAACK,GAAD,CAAH;AACV,GAJD;AAKD;AAED,OAAO,SAASO,iBAAT,CAA2Bb,EAA3B,EAA+B;AACpCJ,EAAAA,WAAW,CAACkB,MAAZ,GAAqBX,IAArB,CACE,UAAAY,YAAY,EAAI;AACd,QAAIf,EAAJ,EAAQA,EAAE,CAACe,YAAD,CAAF,CADM,CAEd;AACD,GAJH,EAIKV,KAJL,CAIW,UAAUC,GAAV,EAAe;AACxB,QAAIA,GAAJ,EAAS,CAAE,CADa,CAExB;;AACD,GAPD;AAQD;AAED,OAAO,SAASU,mBAAT,GAA+B;AACpCpB,EAAAA,WAAW,CAACqB,OAAZ,CAAoB,UAAUb,KAAV,EAAiBN,GAAjB,EAAsBoB,eAAtB,EAAuC,CACzD;AACD,GAFD,EAEGf,IAFH,CAEQ,YAAY,CAClB;AACD,GAJD,EAIGE,KAJH,CAIS,UAAUC,GAAV,EAAe;AACtB,QAAIA,GAAJ,EAAS,CAAE,CADW,CAEtB;;AACD,GAPD;AAQD;AAED,OAAO,SAASa,OAAT,GAAmB;AACxB,MAAMC,SAAS,GAAGC,MAAM,CAACD,SAAP,IAAoBC,MAAM,CAACC,eAA3B,IAA8CD,MAAM,CAACE,YAArD,IAAqE,IAAvF;;AACA,MAAIH,SAAJ,EAAe;AACb,WAAO,IAAP;AACD,GAFD,MAEO;AACL,WAAO,KAAP;AACD;AACF","sourcesContent":["import localForage from 'localforage'\r\n//localforage采用异步的方式\r\nexport function setLocalForage(key, data, cb, cb2) {\r\n  localForage.setItem(key, data).then((value) => {\r\n    if (cb) cb(value)\r\n  }).catch(function (err) {\r\n    if (cb2) cb2(err)\r\n  })\r\n}\r\n\r\nexport function getLocalForage(key, cb) {\r\n  localForage.getItem(key, (err, value) => {\r\n    cb(err, value)\r\n  })\r\n}\r\n\r\nexport function removeLocalForage(key, cb, cb2) {\r\n  localForage.removeItem(key).then(function () {\r\n    if (cb) cb()\r\n  }).catch(function (err) {\r\n    if (cb2) cb2(err)\r\n  })\r\n}\r\n\r\nexport function clearLocalForage(cb, cb2) {\r\n  localForage.clear().then(function () {\r\n    if (cb) cb()\r\n  }).catch(function (err) {\r\n    if (cb2) cb2(err)\r\n  })\r\n}\r\n\r\nexport function lengthLocalForage(cb) {\r\n  localForage.length().then(\r\n    numberOfKeys => {\r\n      if (cb) cb(numberOfKeys)\r\n      // console.log(numberOfKeys)\r\n    }).catch(function (err) {\r\n    if (err) {}\r\n    // console.log(err)\r\n  })\r\n}\r\n\r\nexport function iteratorLocalForage() {\r\n  localForage.iterate(function (value, key, iterationNumber) {\r\n    // console.log([key, value])\r\n  }).then(function () {\r\n    // console.log('Iteration has completed')\r\n  }).catch(function (err) {\r\n    if (err) {}\r\n    // console.log(err)\r\n  })\r\n}\r\n\r\nexport function support() {\r\n  const indexedDB = window.indexedDB || window.webkitIndexedDB || window.mozIndexedDB || null\r\n  if (indexedDB) {\r\n    return true\r\n  } else {\r\n    return false\r\n  }\r\n}\r\n"]}]}