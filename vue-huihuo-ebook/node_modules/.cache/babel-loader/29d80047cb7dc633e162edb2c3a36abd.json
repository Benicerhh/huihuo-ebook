{"remainingRequest":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\babel-loader\\lib\\index.js!E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\src\\components\\speak\\SpeakMask.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\src\\components\\speak\\SpeakMask.vue","mtime":1540735191000},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgcmVhbFB4IH0gZnJvbSAnQC91dGlscy91dGlscyc7CmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgdGl0bGU6IFN0cmluZywKICAgIGJvb2s6IE9iamVjdCwKICAgIHNlY3Rpb246IE9iamVjdCwKICAgIGN1cnJlbnRTZWN0aW9uSW5kZXg6IE51bWJlciwKICAgIGN1cnJlbnRTZWN0aW9uVG90YWw6IE51bWJlciwKICAgIGlzUGxheWluZzogQm9vbGVhbiwKICAgIHBsYXlJbmZvOiBPYmplY3QKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB2aXNpYmxlOiBmYWxzZSwKICAgICAgc3BlYWtDYXJkVmlzaWJsZTogZmFsc2UsCiAgICAgIHByb2dyZXNzOiAwLAogICAgICByZWFkSGVpZ2h0OiAwCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgcmVmcmVzaFByb2dyZXNzOiBmdW5jdGlvbiByZWZyZXNoUHJvZ3Jlc3MocCkgewogICAgICB0aGlzLnByb2dyZXNzID0gcDsKICAgICAgdGhpcy4kcmVmcy5wcm9ncmVzcy5zdHlsZS5iYWNrZ3JvdW5kU2l6ZSA9ICIiLmNvbmNhdCh0aGlzLnByb2dyZXNzLCAiJSAxMDAlIik7CiAgICB9LAogICAgdXBkYXRlVGV4dDogZnVuY3Rpb24gdXBkYXRlVGV4dChwcm9taXNlKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBjdXJyZW50UGFnZSA9IF90aGlzLnJlbmRpdGlvbi5jdXJyZW50TG9jYXRpb24oKTsKCiAgICAgICAgdmFyIGNmaWJhc2UgPSBfdGhpcy5zZWN0aW9uLmNmaUJhc2U7CiAgICAgICAgdmFyIGNmaXN0YXJ0ID0gY3VycmVudFBhZ2Uuc3RhcnQuY2ZpLnJlcGxhY2UoLy4qIS8sICcnKS5yZXBsYWNlKC9cKS8sICcnKTsKICAgICAgICB2YXIgY2ZpZW5kID0gY3VycmVudFBhZ2UuZW5kLmNmaS5yZXBsYWNlKC8uKiEvLCAnJykucmVwbGFjZSgvXCkvLCAnJyk7CgogICAgICAgIF90aGlzLmJvb2suZ2V0UmFuZ2UoImVwdWJjZmkoIi5jb25jYXQoY2ZpYmFzZSwgIiEsIikuY29uY2F0KGNmaXN0YXJ0LCAiLCIpLmNvbmNhdChjZmllbmQsICIpIikpLnRoZW4oZnVuY3Rpb24gKHJhbmdlKSB7CiAgICAgICAgICB2YXIgdGV4dCA9IHJhbmdlLnRvU3RyaW5nKCk7CiAgICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC9ccygyLCkvZywgJycpOwogICAgICAgICAgdGV4dCA9IHRleHQucmVwbGFjZSgvXHIvZywgJycpOwogICAgICAgICAgdGV4dCA9IHRleHQucmVwbGFjZSgvXG4vZywgJycpOwogICAgICAgICAgdGV4dCA9IHRleHQucmVwbGFjZSgvXHQvZywgJycpOwogICAgICAgICAgdGV4dCA9IHRleHQucmVwbGFjZSgvXGYvZywgJycpOwoKICAgICAgICAgIF90aGlzLiRlbWl0KCd1cGRhdGVUZXh0JywgdGV4dCk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIHRvZ2dsZVBsYXk6IGZ1bmN0aW9uIHRvZ2dsZVBsYXkoKSB7CiAgICAgIHRoaXMuJHBhcmVudC50b2dnbGVQbGF5KCk7CiAgICB9LAogICAgcHJldjogZnVuY3Rpb24gcHJldigpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBpZiAodGhpcy5jdXJyZW50U2VjdGlvbkluZGV4ID4gMSkgewogICAgICAgIHRoaXMudXBkYXRlVGV4dCh0aGlzLnJlbmRpdGlvbi5wcmV2KCkpOwogICAgICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZTpjdXJyZW50U2VjdGlvbkluZGV4JywgdGhpcy5jdXJyZW50U2VjdGlvbkluZGV4IC0gMSk7CiAgICAgICAgdGhpcy4kcGFyZW50LnJlc2V0UGxheSgpOwogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMyLiRwYXJlbnQudG9nZ2xlUGxheSgpOwogICAgICAgIH0sIDUwMCk7CiAgICAgIH0KICAgIH0sCiAgICBuZXh0OiBmdW5jdGlvbiBuZXh0KCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIGlmICh0aGlzLmN1cnJlbnRTZWN0aW9uSW5kZXggPCB0aGlzLmN1cnJlbnRTZWN0aW9uVG90YWwpIHsKICAgICAgICB0aGlzLnVwZGF0ZVRleHQodGhpcy5yZW5kaXRpb24ubmV4dCgpKTsKICAgICAgICB0aGlzLiRlbWl0KCd1cGRhdGU6Y3VycmVudFNlY3Rpb25JbmRleCcsIHRoaXMuY3VycmVudFNlY3Rpb25JbmRleCArIDEpOwogICAgICAgIHRoaXMuJHBhcmVudC5yZXNldFBsYXkoKTsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzMy4kcGFyZW50LnRvZ2dsZVBsYXkoKTsKICAgICAgICB9LCA1MDApOwogICAgICB9CiAgICB9LAogICAgZGlzcGxheTogZnVuY3Rpb24gZGlzcGxheSgpIHsKICAgICAgaWYgKCF0aGlzLnJlbmRpdGlvbikgewogICAgICAgIHRoaXMucmVuZGl0aW9uID0gdGhpcy5ib29rLnJlbmRlclRvKCdib29rLXJlYWQnLCB7CiAgICAgICAgICB3aWR0aDogd2luZG93LmlubmVyV2lkdGggPiA2NDAgPyA2NDAgOiB3aW5kb3cuaW5uZXJXaWR0aCwKICAgICAgICAgIGhlaWdodDogdGhpcy5yZWFkSGVpZ2h0LAogICAgICAgICAgbWV0aG9kOiAnZGVmYXVsdCcKICAgICAgICB9KTsKICAgICAgICB0aGlzLmRpc3BsYXllZCA9IHRoaXMucmVuZGl0aW9uLmRpc3BsYXkodGhpcy5zZWN0aW9uLmhyZWYpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZGlzcGxheWVkID0gdGhpcy5yZW5kaXRpb24uZGlzcGxheSh0aGlzLnNlY3Rpb24uaHJlZik7CiAgICAgIH0KICAgIH0sCiAgICBvblByb2dyZXNzQ2hhbmdlOiBmdW5jdGlvbiBvblByb2dyZXNzQ2hhbmdlKHByb2dyZXNzKSB7fSwKICAgIG9uUHJvZ3Jlc3NJbnB1dDogZnVuY3Rpb24gb25Qcm9ncmVzc0lucHV0KHByb2dyZXNzKSB7CiAgICAgIHRoaXMucHJvZ3Jlc3MgPSBwcm9ncmVzczsKICAgICAgdGhpcy4kcmVmcy5wcm9ncmVzcy5zdHlsZS5iYWNrZ3JvdW5kU2l6ZSA9ICIiLmNvbmNhdCh0aGlzLnByb2dyZXNzLCAiJSAxMDAlIik7CiAgICB9LAogICAgaGlkZTogZnVuY3Rpb24gaGlkZSgpIHsKICAgICAgdGhpcy5zcGVha0NhcmRWaXNpYmxlID0gZmFsc2U7CiAgICAgIHRoaXMudmlzaWJsZSA9IGZhbHNlOwogICAgfSwKICAgIHNob3c6IGZ1bmN0aW9uIHNob3coKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgdGhpcy52aXNpYmxlID0gdHJ1ZTsKICAgICAgdGhpcy5zcGVha0NhcmRWaXNpYmxlID0gdHJ1ZTsKICAgICAgdGhpcy5yZWZyZXNoKCk7CiAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczQuZGlzcGxheSgpOwogICAgICB9KTsKICAgIH0sCiAgICByZWZyZXNoOiBmdW5jdGlvbiByZWZyZXNoKCkgewogICAgICB0aGlzLnJlYWRIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQgKiAwLjkgLSByZWFsUHgoNDApIC0gcmVhbFB4KDU0KSAtIHJlYWxQeCg0NikgLSByZWFsUHgoNDgpIC0gcmVhbFB4KDYwKSAtIHJlYWxQeCg0NCk7IC8vIGNvbnNvbGUubG9nKHRoaXMucmVhZEhlaWdodCkKCiAgICAgIHRoaXMuJHJlZnMuYm9va1dyYXBwZXIuc3R5bGUuaGVpZ2h0ID0gdGhpcy5yZWFkSGVpZ2h0ICsgJ3B4JzsKICAgIH0KICB9Cn07"},{"version":3,"sources":["SpeakMask.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <transition name=\"fade\">\n    <div class=\"book-speak-mask-wrapper\" @click.stop.prevent=\"hide\" v-show=\"visible\">\n      <transition name=\"popup-slide-up\">\n        <div class=\"book-speak-mask-card-wrapper\" v-show=\"speakCardVisible\" @click.stop.prevent=\"hide\">\n          <div class=\"pulldown-icon-wrapper\" @click=\"hide\">\n            <span class=\"icon-pull_down\"></span>\n          </div>\n          <div class=\"card-title-wrapper\">\n            <div class=\"icon-speak-wrapper\">\n              <span class=\"icon-speak\"></span>\n            </div>\n            <div class=\"speak-title-wrapper\">\n              <span class=\"speak-title\">{{$t('speak.voice')}}</span>\n            </div>\n            <div class=\"read-fulltext-wrapper\">\n              <span class=\"read-fulltext\">{{$t('speak.read')}}</span>\n            </div>\n          </div>\n          <div class=\"card-section-title-wrapper\">\n            <div class=\"card-section-title-text\">{{title}}</div>\n            <div class=\"card-section-sub-title-text\" v-if=\"currentSectionIndex\">{{currentSectionIndex}} /\n              {{currentSectionTotal}}\n            </div>\n          </div>\n          <div class=\"setting-progress\">\n            <div class=\"progress-wrapper\">\n              <input class=\"progress\" type=\"range\"\n                     max=\"100\"\n                     min=\"0\"\n                     step=\"1\"\n                     @change=\"onProgressChange($event.target.value)\"\n                     @input=\"onProgressInput($event.target.value)\"\n                     :value=\"progress\"\n                     ref=\"progress\">\n            </div>\n            <div class=\"progress-text\">\n              <div class=\"progress-text-current\">{{playInfo ? playInfo.currentMinute : '00'}}:{{playInfo ?\n                playInfo.currentSecond : '00'}}\n              </div>\n              <div class=\"progress-text-left\">-{{playInfo ? playInfo.leftMinute : '00'}}:{{playInfo ?\n                playInfo.leftSecond : '00'}}\n              </div>\n            </div>\n          </div>\n          <div class=\"playing-wrapper\">\n            <div class=\"icon-settings-wrapper\">\n              <span class=\"icon-settings\"></span>\n              <div class=\"settings-text\">{{$t('speak.settings')}}</div>\n            </div>\n            <span class=\"icon-play_backward\" :class=\"{'not-use': currentSectionIndex <= 1}\" @click.stop.prevent=\"prev\"></span>\n            <div class=\"icon-play-wrapper\" @click.stop.prevent=\"togglePlay\">\n              <span class=\"icon-play_go\" v-if=\"!isPlaying\"></span>\n              <span class=\"icon-play_pause\" v-else></span>\n            </div>\n            <span class=\"icon-play_forward\" :class=\"{'not-use': currentSectionIndex >= currentSectionTotal}\"\n                  @click.stop.prevent=\"next\"></span>\n            <div class=\"icon-clock-wrapper\">\n              <span class=\"icon-clock\"></span>\n              <div class=\"clock-text\">{{$t('speak.timing')}}</div>\n            </div>\n          </div>\n          <div class=\"read-apply-wrapper\">\n            {{$t('speak.apply')}}\n          </div>\n          <div class=\"read-title-wrapper\">\n            <span class=\"line\"></span>\n            <div class=\"read-title-text\">{{$t('speak.current')}}</div>\n            <span class=\"line\"></span>\n          </div>\n          <div class=\"book-wrapper\" ref=\"bookWrapper\">\n            <div id=\"book-read\"></div>\n          </div>\n        </div>\n      </transition>\n    </div>\n  </transition>\n</template>\n\n<script>\n  import { realPx } from '@/utils/utils'\n\n  export default {\n    props: {\n      title: String,\n      book: Object,\n      section: Object,\n      currentSectionIndex: Number,\n      currentSectionTotal: Number,\n      isPlaying: Boolean,\n      playInfo: Object\n    },\n    data() {\n      return {\n        visible: false,\n        speakCardVisible: false,\n        progress: 0,\n        readHeight: 0\n      }\n    },\n    methods: {\n      refreshProgress(p) {\n        this.progress = p\n        this.$refs.progress.style.backgroundSize = `${this.progress}% 100%`\n      },\n      updateText(promise) {\n        promise.then(() => {\n          const currentPage = this.rendition.currentLocation()\n          const cfibase = this.section.cfiBase\n          const cfistart = currentPage.start.cfi.replace(/.*!/, '').replace(/\\)/, '')\n          const cfiend = currentPage.end.cfi.replace(/.*!/, '').replace(/\\)/, '')\n          this.book.getRange(`epubcfi(${cfibase}!,${cfistart},${cfiend})`).then(range => {\n            let text = range.toString()\n            text = text.replace(/\\s(2,)/g, '')\n            text = text.replace(/\\r/g, '')\n            text = text.replace(/\\n/g, '')\n            text = text.replace(/\\t/g, '')\n            text = text.replace(/\\f/g, '')\n            this.$emit('updateText', text)\n          })\n        })\n      },\n      togglePlay() {\n        this.$parent.togglePlay()\n      },\n      prev() {\n        if (this.currentSectionIndex > 1) {\n          this.updateText(this.rendition.prev())\n          this.$emit('update:currentSectionIndex', this.currentSectionIndex - 1)\n          this.$parent.resetPlay()\n          setTimeout(() => {\n            this.$parent.togglePlay()\n          }, 500)\n        }\n      },\n      next() {\n        if (this.currentSectionIndex < this.currentSectionTotal) {\n          this.updateText(this.rendition.next())\n          this.$emit('update:currentSectionIndex', this.currentSectionIndex + 1)\n          this.$parent.resetPlay()\n          setTimeout(() => {\n            this.$parent.togglePlay()\n          }, 500)\n        }\n      },\n      display() {\n        if (!this.rendition) {\n          this.rendition = this.book.renderTo('book-read', {\n            width: window.innerWidth > 640 ? 640 : window.innerWidth,\n            height: this.readHeight,\n            method: 'default'\n          })\n          this.displayed = this.rendition.display(this.section.href)\n        } else {\n          this.displayed = this.rendition.display(this.section.href)\n        }\n      },\n      onProgressChange(progress) {\n      },\n      onProgressInput(progress) {\n        this.progress = progress\n        this.$refs.progress.style.backgroundSize = `${this.progress}% 100%`\n      },\n      hide() {\n        this.speakCardVisible = false\n        this.visible = false\n      },\n      show() {\n        this.visible = true\n        this.speakCardVisible = true\n        this.refresh()\n        this.$nextTick(() => {\n          this.display()\n        })\n      },\n      refresh() {\n        this.readHeight = window.innerHeight * 0.9 - realPx(40) - realPx(54) - realPx(46) - realPx(48) - realPx(60) - realPx(44)\n        // console.log(this.readHeight)\n        this.$refs.bookWrapper.style.height = this.readHeight + 'px'\n      }\n    }\n  }\n</script>\n\n<style lang=\"scss\" rel=\"stylesheet/scss\" scoped>\n  @import \"../../assets/styles/global\";\n\n  .book-speak-mask-wrapper {\n    position: fixed;\n    left: 0;\n    top: 0;\n    z-index: 120;\n    width: 100%;\n    height: 100%;\n    background: rgba(0, 0, 0, .5);\n    .book-speak-mask-card-wrapper {\n      position: absolute;\n      bottom: 0;\n      left: 0;\n      z-index: 120;\n      width: 100%;\n      height: 90%;\n      background: white;\n      border-radius: px2rem(10) px2rem(10) 0 0;\n      .pulldown-icon-wrapper {\n        width: 100%;\n        height: px2rem(40);\n        color: #ccc;\n        font-size: px2rem(40);\n        @include center;\n      }\n      .card-title-wrapper {\n        width: 100%;\n        height: px2rem(54);\n        display: flex;\n        padding: 0 px2rem(15);\n        box-sizing: border-box;\n        .icon-speak-wrapper {\n          flex: 0 0 px2rem(40);\n          @include left;\n          .icon-speak {\n            font-size: px2rem(24);\n            color: #999;\n          }\n        }\n        .speak-title-wrapper {\n          flex: 1;\n          @include left;\n          .speak-title {\n            font-size: px2rem(16);\n            font-weight: bold;\n            color: #666;\n          }\n        }\n        .read-fulltext-wrapper {\n          flex: 1;\n          @include right;\n          .read-fulltext {\n            font-size: px2rem(12);\n            font-weight: bold;\n            color: $color-blue;\n            background: rgba(74, 171, 255, .2);\n            padding: px2rem(5) px2rem(10);\n            box-sizing: border-box;\n            border-radius: px2rem(20);\n          }\n        }\n      }\n      .card-section-title-wrapper {\n        width: 100%;\n        height: px2rem(46);\n        padding: 0 px2rem(15);\n        box-sizing: border-box;\n        @include columnCenter;\n        .card-section-title-text {\n          font-size: px2rem(16);\n          color: #333;\n          font-weight: bold;\n        }\n        .card-section-sub-title-text {\n          font-size: px2rem(12);\n          color: #666;\n          margin-top: px2rem(5);\n        }\n      }\n      .setting-progress {\n        width: 100%;\n        height: px2rem(48);\n        @include columnTop;\n        .progress-wrapper {\n          flex: 1;\n          width: 100%;\n          @include center;\n          padding: 0 px2rem(30);\n          box-sizing: border-box;\n          .progress {\n            width: 100%;\n            -webkit-appearance: none;\n            height: px2rem(2);\n            background: -webkit-linear-gradient($color-blue, $color-blue) no-repeat, rgba(74, 171, 255, .2);\n            background-size: 0 100%;\n            &:focus {\n              outline: none;\n            }\n            &::-webkit-slider-thumb {\n              -webkit-appearance: none;\n              height: px2rem(20);\n              width: px2rem(20);\n              border-radius: 50%;\n              background: $color-blue;\n              border: none;\n              box-shadow: 0 4px 4px 0 rgba(0, 0, 0, .15);\n            }\n          }\n        }\n        .progress-text {\n          display: flex;\n          width: 100%;\n          padding: 0 px2rem(30);\n          box-sizing: border-box;\n          .progress-text-current {\n            flex: 1;\n            text-align: left;\n            font-size: px2rem(10);\n            color: #666;\n          }\n          .progress-text-left {\n            flex: 1;\n            text-align: right;\n            font-size: px2rem(10);\n            color: #666;\n          }\n        }\n      }\n      .playing-wrapper {\n        width: 100%;\n        height: px2rem(60);\n        @include center;\n        .icon-settings-wrapper {\n          flex: 1;\n          @include columnCenter;\n          .icon-settings {\n            font-size: px2rem(18);\n            color: #666;\n          }\n          .settings-text {\n            margin-top: px2rem(5);\n            font-size: px2rem(10);\n            color: #666;\n          }\n        }\n        .icon-play_backward {\n          font-size: px2rem(30);\n          color: $color-blue;\n          &:active {\n            opacity: .5;\n          }\n          &.not-use {\n            color: $color-blue-transparent;\n          }\n        }\n        .icon-play-wrapper {\n          flex: 0 0 px2rem(100);\n          @include center;\n          &:active {\n            opacity: .5;\n          }\n          .icon-play_go {\n            font-size: px2rem(50);\n            color: $color-blue;\n          }\n          .icon-play_pause {\n            font-size: px2rem(50);\n            color: $color-blue;\n          }\n        }\n        .icon-play_forward {\n          font-size: px2rem(30);\n          color: $color-blue;\n          &:active {\n            opacity: .5;\n          }\n          &.not-use {\n            color: $color-blue-transparent;\n          }\n        }\n        .icon-clock-wrapper {\n          flex: 1;\n          @include columnCenter;\n          .icon-clock2 {\n            font-size: px2rem(18);\n            color: #666;\n          }\n          .clock-text {\n            margin-top: px2rem(5);\n            font-size: px2rem(10);\n            color: #666;\n          }\n        }\n      }\n      .read-apply-wrapper {\n        width: 100%;\n        height: px2rem(20);\n        font-size: px2rem(10);\n        color: $color-green;\n        @include center;\n      }\n      .read-title-wrapper {\n        width: 100%;\n        height: px2rem(24);\n        box-sizing: border-box;\n        @include center;\n        .line {\n          flex: 1;\n          border-top: px2rem(1) solid #eee;\n          height: 0;\n        }\n        .read-title-text {\n          flex: 0 0 px2rem(130);\n          font-size: px2rem(14);\n          color: #666;\n          text-align: center;\n        }\n      }\n      .book-wrapper {\n        #read {\n          width: 100%;\n          height: 100%;\n        }\n      }\n    }\n  }\n</style>\n"],"sourceRoot":"src/components/speak"}]}