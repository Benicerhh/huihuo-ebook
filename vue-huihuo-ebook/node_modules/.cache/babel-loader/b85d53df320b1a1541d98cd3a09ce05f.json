{"remainingRequest":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\thread-loader\\dist\\cjs.js!E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\babel-loader\\lib\\index.js!E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\src\\components\\Ebook\\EbookReader.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\src\\components\\Ebook\\EbookReader.vue","mtime":1588930847435},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5tYXRjaCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yIjsKaW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJFOlxcSm9kUHJlcGFyYXRpb25cXFByYWN0aWNlXFxcdTk4NzlcdTc2RUVcXGh1aWh1by1lYm9va1xcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgRXB1YiBmcm9tICJlcHVianMiOwppbXBvcnQgeyBlYm9va01peGluIH0gZnJvbSAiLi4vLi4vdXRpbHMvbWl4aW4iOwppbXBvcnQgeyBnZXRGb250RmFtaWx5LCBzYXZlRm9udEZhbWlseSwgZ2V0Rm9udFNpemUsIHNhdmVGb250U2l6ZSwgZ2V0VGhlbWUsIHNhdmVUaGVtZSwgZ2V0TG9jYXRpb24gfSBmcm9tICIuLi8uLi91dGlscy9sb2NhbFN0b3JhZ2UiOwppbXBvcnQgeyBnZXRMb2NhbEZvcmFnZSB9IGZyb20gIi4uLy4uL3V0aWxzL2xvY2FsRm9yYWdlIjsKZ2xvYmFsLmVQdWIgPSBFcHViOwpleHBvcnQgZGVmYXVsdCB7CiAgbWl4aW5zOiBbZWJvb2tNaXhpbl0sCiAgbWV0aG9kczogewogICAgbW92ZTogZnVuY3Rpb24gbW92ZShlKSB7CiAgICAgIHZhciBvZmZzZXRZID0gMDsKCiAgICAgIGlmICh0aGlzLmZpcnN0T2Zmc2V0WSkgewogICAgICAgIG9mZnNldFkgPSBlLmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFkgLSB0aGlzLmZpcnN0T2Zmc2V0WTsKICAgICAgICB0aGlzLnNldE9mZnNldFkob2Zmc2V0WSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5maXJzdE9mZnNldFkgPSBlLmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFk7CiAgICAgIH0KCiAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgIH0sCiAgICBtb3ZlRW5kOiBmdW5jdGlvbiBtb3ZlRW5kKGUpIHsKICAgICAgdGhpcy5zZXRPZmZzZXRZKDApOwogICAgICB0aGlzLmZpcnN0T2Zmc2V0WSA9IDA7CiAgICB9LAogICAgb25Nb3VzZUVudGVyOiBmdW5jdGlvbiBvbk1vdXNlRW50ZXIoZSkgewogICAgICB0aGlzLm1vdXNlTW92ZSA9IDE7CiAgICAgIHRoaXMubW91c2VTdGFydFRpbWUgPSBlLnRpbWVTdGFtcDsKICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgfSwKICAgIG9uTW91c2VNb3ZlOiBmdW5jdGlvbiBvbk1vdXNlTW92ZShlKSB7CiAgICAgIGlmICh0aGlzLm1vdXNlTW92ZSA9PT0gMSkgewogICAgICAgIHRoaXMubW91c2VNb3ZlID0gMjsKICAgICAgfSBlbHNlIGlmICh0aGlzLm1vdXNlTW92ZSA9PT0gMikgewogICAgICAgIHZhciBvZmZzZXRZID0gMDsKCiAgICAgICAgaWYgKHRoaXMuZmlyc3RPZmZzZXRZKSB7CiAgICAgICAgICBvZmZzZXRZID0gZS5jbGllbnRZIC0gdGhpcy5maXJzdE9mZnNldFk7CiAgICAgICAgICB0aGlzLnNldE9mZnNldFkob2Zmc2V0WSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuZmlyc3RPZmZzZXRZID0gZS5jbGllbnRZOwogICAgICAgIH0KICAgICAgfQoKICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgfSwKICAgIG9uTW91c2VFbmQ6IGZ1bmN0aW9uIG9uTW91c2VFbmQoZSkgewogICAgICBpZiAodGhpcy5tb3VzZU1vdmUgPT09IDIpIHsKICAgICAgICB0aGlzLnNldE9mZnNldFkoMCk7CiAgICAgICAgdGhpcy5maXJzdE9mZnNldFkgPSAwOwogICAgICAgIHRoaXMubW91c2VNb3ZlID0gMzsKICAgICAgfQoKICAgICAgdGhpcy5tb3VzZUVuZFRpbWUgPSBlLnRpbWVTdGFtcDsKICAgICAgdmFyIHRpbWUgPSB0aGlzLm1vdXNlRW5kVGltZSAtIHRoaXMubW91c2VTdGFydFRpbWU7CgogICAgICBpZiAodGltZSA8IDIwMCkgewogICAgICAgIHRoaXMubW91c2VNb3ZlID0gMTsKICAgICAgfQoKICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgfSwKICAgIG9uTWFza0NsaWNrOiBmdW5jdGlvbiBvbk1hc2tDbGljayhlKSB7CiAgICAgIHZhciBvZmZzZXRYID0gZS5vZmZzZXRYOwogICAgICB2YXIgd2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDsKCiAgICAgIGlmIChvZmZzZXRYID4gMCAmJiBvZmZzZXRYIDwgd2lkdGggKiAwLjMpIHsKICAgICAgICB0aGlzLnByZXZQYWdlKCk7CiAgICAgIH0gZWxzZSBpZiAob2Zmc2V0WCA+IDAgJiYgb2Zmc2V0WCA+IHdpZHRoICogMC43KSB7CiAgICAgICAgdGhpcy5uZXh0UGFnZSgpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMudG9nZ2xlVGl0bGVBbmRNZW51KCk7CiAgICAgIH0KICAgIH0sCiAgICBwcmV2UGFnZTogZnVuY3Rpb24gcHJldlBhZ2UoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvL+iwg+eUqFJlbmRpdGlvbueahHByZXbmlrnms5Xov5Tlm57kuIrkuIDpobUKICAgICAgaWYgKHRoaXMucmVuZGl0aW9uKSB7CiAgICAgICAgdGhpcy5yZW5kaXRpb24ucHJldigpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMucmVmcmVzaExvY2F0aW9uKCk7CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHRoaXMuaGlkZVRpdGxlQW5kTWVudSgpOwogICAgfSwKICAgIG5leHRQYWdlOiBmdW5jdGlvbiBuZXh0UGFnZSgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICAvL+iwg+eUqFJlbmRpdGlvbueahG5leHTmlrnms5Xov5Tlm57kuIrkuIDpobUKICAgICAgaWYgKHRoaXMucmVuZGl0aW9uKSB7CiAgICAgICAgdGhpcy5yZW5kaXRpb24ubmV4dCgpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMyLnJlZnJlc2hMb2NhdGlvbigpOwogICAgICAgIH0pOwogICAgICB9CgogICAgICB0aGlzLmhpZGVUaXRsZUFuZE1lbnUoKTsKICAgIH0sCiAgICB0b2dnbGVUaXRsZUFuZE1lbnU6IGZ1bmN0aW9uIHRvZ2dsZVRpdGxlQW5kTWVudSgpIHsKICAgICAgaWYgKHRoaXMubWVudVZpc2libGUpIHsKICAgICAgICB0aGlzLnNldFNldHRpbmdWaXNpYmxlKC0xKTsKICAgICAgICB0aGlzLnNldEZvbnRGYW1pbHlWaXNpYmxlKGZhbHNlKTsKICAgICAgfQoKICAgICAgdGhpcy5zZXRNZW51VmlzaWJsZSghdGhpcy5tZW51VmlzaWJsZSk7CiAgICB9LAogICAgaW5pdEZvbnRTaXplOiBmdW5jdGlvbiBpbml0Rm9udFNpemUoKSB7CiAgICAgIC8v6K+75Y+WbG9jYWxTdG9yYWdl5Lit55qERm9udFNpemUKICAgICAgdmFyIGZvbnRTaXplID0gZ2V0Rm9udFNpemUodGhpcy5maWxlTmFtZSk7CgogICAgICBpZiAoZm9udFNpemUpIHsKICAgICAgICB0aGlzLnJlbmRpdGlvbi50aGVtZXMuZm9udFNpemUoZm9udFNpemUpOwogICAgICAgIHRoaXMuc2V0RGVmYXVsdEZvbnRTaXplKGZvbnRTaXplKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBzYXZlRm9udFNpemUodGhpcy5maWxlTmFtZSwgdGhpcy5kZWZhdWx0Rm9udFNpemUpOwogICAgICB9CiAgICB9LAogICAgaW5pdEZvbnRGYW1pbHk6IGZ1bmN0aW9uIGluaXRGb250RmFtaWx5KCkgewogICAgICAvL+ivu+WPlmxvY2FsU3RvcmFnZeS4reeahEZvbnQKICAgICAgdmFyIGZvbnQgPSBnZXRGb250RmFtaWx5KHRoaXMuZmlsZU5hbWUpOwoKICAgICAgaWYgKGZvbnQpIHsKICAgICAgICB0aGlzLnJlbmRpdGlvbi50aGVtZXMuZm9udChmb250KTsKICAgICAgICB0aGlzLnNldERlZmF1bHRGb250RmFtaWx5KGZvbnQpOwogICAgICB9IGVsc2UgewogICAgICAgIHNhdmVGb250RmFtaWx5KHRoaXMuZmlsZU5hbWUsIHRoaXMuZGVmYXVsdEZvbnRGYW1pbHkpOwogICAgICB9CiAgICB9LAogICAgaW5pdFRoZW1lOiBmdW5jdGlvbiBpbml0VGhlbWUoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgLy/liJ3lp4vljJbkuLvpopgKICAgICAgdmFyIGRlZmF1bHRUaGVtZSA9IGdldFRoZW1lKHRoaXMuZmlsZU5hbWUpOwoKICAgICAgaWYgKCFkZWZhdWx0VGhlbWUpIHsKICAgICAgICBkZWZhdWx0VGhlbWUgPSB0aGlzLnRoZW1lTGlzdFswXS5uYW1lOwogICAgICAgIHNhdmVUaGVtZSh0aGlzLmZpbGVOYW1lLCBkZWZhdWx0VGhlbWUpOwogICAgICB9CgogICAgICB0aGlzLnNldERlZmF1bHRUaGVtZShkZWZhdWx0VGhlbWUpOwogICAgICB0aGlzLnRoZW1lTGlzdC5mb3JFYWNoKGZ1bmN0aW9uICh0aGVtZSkgewogICAgICAgIF90aGlzMy5yZW5kaXRpb24udGhlbWVzLnJlZ2lzdGVyKHRoZW1lLm5hbWUsIHRoZW1lLnN0eWxlKTsKICAgICAgfSk7CiAgICAgIHRoaXMucmVuZGl0aW9uLnRoZW1lcy5zZWxlY3QoZGVmYXVsdFRoZW1lKTsKICAgIH0sCiAgICBpbml0R2VzdHVyZTogZnVuY3Rpb24gaW5pdEdlc3R1cmUoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgdGhpcy5yZW5kaXRpb24ub24oInRvdWNoc3RhcnQiLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICBfdGhpczQudG91Y2hTdGFydFggPSBldmVudC5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRYOwogICAgICAgIF90aGlzNC50b3VjaFN0YXJ0VGltZSA9IGV2ZW50LnRpbWVTdGFtcDsKICAgICAgfSk7CiAgICAgIHRoaXMucmVuZGl0aW9uLm9uKCJ0b3VjaGVuZCIsIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgIHZhciBvZmZzZXRYID0gZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WCAtIF90aGlzNC50b3VjaFN0YXJ0WDsKICAgICAgICB2YXIgdGltZSA9IGV2ZW50LnRpbWVTdGFtcCAtIF90aGlzNC50b3VjaFN0YXJ0VGltZTsgLy/moLnmja7miYvlir/kuovku7blrp7njrDnv7vpobXlip/og70KCiAgICAgICAgaWYgKHRpbWUgPCA1MDAgJiYgb2Zmc2V0WCA+IDQwKSB7CiAgICAgICAgICBfdGhpczQucHJldlBhZ2UoKTsKICAgICAgICB9IGVsc2UgaWYgKHRpbWUgPCA1MDAgJiYgb2Zmc2V0WCA8IC00MCkgewogICAgICAgICAgX3RoaXM0Lm5leHRQYWdlKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzNC50b2dnbGVUaXRsZUFuZE1lbnUoKTsKICAgICAgICB9IC8v57uE57uH6buY6K6k5LqL5Lu25ZKM5YaS5rOhCgoKICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgICB9KTsKICAgIH0sCiAgICBpbml0UmVuZGl0aW9uOiBmdW5jdGlvbiBpbml0UmVuZGl0aW9uKCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIC8v55Sf5oiQUmVuZGl0aW9u5a+56LGhCiAgICAgIHRoaXMucmVuZGl0aW9uID0gdGhpcy5ib29rLnJlbmRlclRvKCJyZWFkIiwgewogICAgICAgIHdpZHRoOiB3aW5kb3cuaW5uZXJXaWR0aCwKICAgICAgICBoZWlnaHQ6IHdpbmRvdy5pbm5lckhlaWdodCwKICAgICAgICBtZXRob2Q6ICJkZWZhdWx0IgogICAgICB9KTsgLy/pgJrov4dSZW5kaXRpb27lr7nosaHnmoRkaXNwbGF55pa55rOV5riy5p+T55S15a2Q5LmmCgogICAgICB2YXIgbG9jYXRpb24gPSBnZXRMb2NhdGlvbih0aGlzLmZpbGVOYW1lKTsKICAgICAgdGhpcy5kaXNwbGF5KGxvY2F0aW9uLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXM1LmluaXRGb250U2l6ZSgpOwoKICAgICAgICBfdGhpczUuaW5pdEZvbnRGYW1pbHkoKTsKCiAgICAgICAgX3RoaXM1LmluaXRUaGVtZSgpOwoKICAgICAgICBfdGhpczUuaW5pdEdsb2JhbFN0eWxlKCk7CiAgICAgIH0pOwogICAgICB0aGlzLnJlbmRpdGlvbi5ob29rcy5jb250ZW50LnJlZ2lzdGVyKGZ1bmN0aW9uIChjb250ZW50cykgewogICAgICAgIFByb21pc2UuYWxsKFtjb250ZW50cy5hZGRTdHlsZXNoZWV0KCIiLmNvbmNhdChwcm9jZXNzLmVudi5WVUVfQVBQX1JFU19VUkwsICIvZm9udHMvY2FiaW4uY3NzIikpLCBjb250ZW50cy5hZGRTdHlsZXNoZWV0KCIiLmNvbmNhdChwcm9jZXNzLmVudi5WVUVfQVBQX1JFU19VUkwsICIvZm9udHMvbW9udHNlcnJhdC5jc3MiKSksIGNvbnRlbnRzLmFkZFN0eWxlc2hlZXQoIiIuY29uY2F0KHByb2Nlc3MuZW52LlZVRV9BUFBfUkVTX1VSTCwgIi9mb250cy90YW5nZXJpbmUuY3NzIikpLCBjb250ZW50cy5hZGRTdHlsZXNoZWV0KCIiLmNvbmNhdChwcm9jZXNzLmVudi5WVUVfQVBQX1JFU19VUkwsICIvZm9udHMvZGF5c09uZS5jc3MiKSldKS50aGVuKGZ1bmN0aW9uICgpIHt9KTsKICAgICAgfSk7CiAgICB9LAogICAgcGFyc2VCb29rOiBmdW5jdGlvbiBwYXJzZUJvb2soKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgLy/op6PmnpDnlLXlrZDkuabnmoTlsIHpnaIKICAgICAgdGhpcy5ib29rLmxvYWRlZC5jb3Zlci50aGVuKGZ1bmN0aW9uIChjb3ZlcikgewogICAgICAgIF90aGlzNi5ib29rLmFyY2hpdmUuY3JlYXRlVXJsKGNvdmVyKS50aGVuKGZ1bmN0aW9uICh1cmwpIHsKICAgICAgICAgIF90aGlzNi5zZXRDb3Zlcih1cmwpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgdGhpcy5ib29rLmxvYWRlZC5tZXRhZGF0YS50aGVuKGZ1bmN0aW9uIChtZXRhZGF0YSkgewogICAgICAgIF90aGlzNi5zZXRNZXRhZGF0YShtZXRhZGF0YSk7CiAgICAgIH0pOwogICAgICB0aGlzLmJvb2subG9hZGVkLm5hdmlnYXRpb24udGhlbihmdW5jdGlvbiAobmF2KSB7CiAgICAgICAgLy9jb25zb2xlLmxvZyhuYXYpCiAgICAgICAgLy/ojrflj5bnlLXlrZDkuabnmoTnm67lvZUKICAgICAgICB2YXIgbmF2SXRlbSA9IGZ1bmN0aW9uIGZsYXR0ZW4oYXJyKSB7CiAgICAgICAgICB2YXIgX3JlZjsKCiAgICAgICAgICByZXR1cm4gKF9yZWYgPSBbXSkuY29uY2F0LmFwcGx5KF9yZWYsIF90b0NvbnN1bWFibGVBcnJheShhcnIubWFwKGZ1bmN0aW9uICh2KSB7CiAgICAgICAgICAgIHJldHVybiBbdl0uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShmbGF0dGVuKHYuc3ViaXRlbXMpKSk7CiAgICAgICAgICB9KSkpOwogICAgICAgIH0obmF2LnRvYyk7IC8v5bCG5qCR54q255uu5b2V57uT5p6E6L2s5YyW5Li65LiA57u05pWw57uECgoKICAgICAgICBmdW5jdGlvbiBmaW5kKGl0ZW0pIHsKICAgICAgICAgIHZhciB2ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAwOwogICAgICAgICAgdmFyIHBhcmVudCA9IG5hdkl0ZW0uZmlsdGVyKGZ1bmN0aW9uIChpdCkgewogICAgICAgICAgICByZXR1cm4gaXQuaWQgPT09IGl0ZW0ucGFyZW50OwogICAgICAgICAgfSlbMF07CiAgICAgICAgICByZXR1cm4gIWl0ZW0ucGFyZW50ID8gdiA6IHBhcmVudCA/IGZpbmQocGFyZW50LCArK3YpIDogdjsKICAgICAgICB9CgogICAgICAgIG5hdkl0ZW0uZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgaXRlbS5sZXZlbCA9IGZpbmQoaXRlbSk7CiAgICAgICAgICBpdGVtLnRvdGFsID0gMDsKICAgICAgICAgIGl0ZW0ucGFnZWxpc3QgPSBbXTsKCiAgICAgICAgICBpZiAoaXRlbS5ocmVmLm1hdGNoKC9eKC4qKVwuaHRtbCQvKSkgewogICAgICAgICAgICBpdGVtLmlkaHJlZiA9IGl0ZW0uaHJlZi5tYXRjaCgvXiguKilcLmh0bWwkLylbMV07CiAgICAgICAgICB9IGVsc2UgaWYgKGl0ZW0uaHJlZi5tYXRjaCgvXiguKilcLnhodG1sJC8pKSB7CiAgICAgICAgICAgIGl0ZW0uaWRocmVmID0gaXRlbS5ocmVmLm1hdGNoKC9eKC4qKVwueGh0bWwkLylbMV07CiAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIF90aGlzNi5zZXROYXZpZ2F0aW9uKG5hdkl0ZW0pOwogICAgICB9KTsKICAgIH0sCiAgICBpbml0RXB1YjogZnVuY3Rpb24gaW5pdEVwdWIodXJsKSB7CiAgICAgIHZhciBfdGhpczcgPSB0aGlzOwoKICAgICAgLy9jb25zdCB1cmwgPXByb2Nlc3MuZW52LlZVRV9BUFBfUkVTX1VSTCArICIvZXB1Yi8iICsgdGhpcy5maWxlTmFtZSArICIuZXB1YiI7CiAgICAgIC8v55S15a2Q5Lmm55qE6Kej5p6Q5ZKM5riy5p+TCiAgICAgIC8v55Sf5oiQRWJvb2vlr7nosaEKICAgICAgdGhpcy5ib29rID0gbmV3IEVwdWIodXJsKTsKICAgICAgdGhpcy5zZXRDdXJyZW50Qm9vayh0aGlzLmJvb2spOwogICAgICB0aGlzLmluaXRSZW5kaXRpb24oKTsKICAgICAgdGhpcy5pbml0R2VzdHVyZSgpOwogICAgICB0aGlzLnBhcnNlQm9vaygpOwogICAgICB0aGlzLmJvb2sucmVhZHkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgLy/liIbpobUKICAgICAgICByZXR1cm4gX3RoaXM3LmJvb2subG9jYXRpb25zLmdlbmVyYXRlKDc1MCAqICh3aW5kb3cuaW5uZXJXaWR0aCAvIDM3NSkgKiAoZ2V0Rm9udFNpemUoX3RoaXM3LmZpbGVOYW1lKSAvIDE2KSk7CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGxvY2F0aW9ucykgewogICAgICAgIC8vY29uc29sZS5sb2cobG9jYXRpb25zKTsKICAgICAgICBfdGhpczcuc2V0Qm9va0F2YWlsYWJsZSh0cnVlKTsKCiAgICAgICAgX3RoaXM3LnJlZnJlc2hMb2NhdGlvbigpOwogICAgICB9KTsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXM4ID0gdGhpczsKCiAgICB2YXIgYm9va3MgPSB0aGlzLiRyb3V0ZS5wYXJhbXMuZmlsZU5hbWUuc3BsaXQoInwiKTsKICAgIHZhciBmaWxlTmFtZSA9IGJvb2tzWzFdOyAvL+ivu+WPluemu+e6v+e8k+WtmAoKICAgIGdldExvY2FsRm9yYWdlKGZpbGVOYW1lLCBmdW5jdGlvbiAoZXJyLCBibG9iKSB7CiAgICAgIGlmICghZXJyICYmIGJsb2IpIHsKICAgICAgICAvL+eUteWtkOS5puacieemu+e6v+e8k+WtmAogICAgICAgIC8vY29uc29sZS5sb2coIuaJvuWIsOemu+e6v+i1hOa6kCIpOwogICAgICAgIF90aGlzOC5zZXRmaWxlTmFtZShib29rcy5qb2luKCIvIikpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXM4LmluaXRFcHViKGJsb2IpOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIC8v6I635Y+W5Zyo57q/6Z2Z5oCB6LWE5rqQ55qE6Lev5b6ECiAgICAgICAgX3RoaXM4LnNldGZpbGVOYW1lKGJvb2tzLmpvaW4oIi8iKSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICB2YXIgdXJsID0gcHJvY2Vzcy5lbnYuVlVFX0FQUF9FUFVCX1VSTCArIF90aGlzOC5maWxlTmFtZSArICIuZXB1YiI7CgogICAgICAgICAgX3RoaXM4LmluaXRFcHViKHVybCk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwogIH0KfTs="},{"version":3,"sources":["EbookReader.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"ebook-reader\">\r\n    <div\r\n      class=\"ebook-reader-mask\"\r\n      @touchmove=\"move\"\r\n      @touchend=\"moveEnd\"\r\n      @mousedown.left=\"onMouseEnter\"\r\n      @mousemove.left=\"onMouseMove\"\r\n      @mouseup.left=\"onMouseEnd\"\r\n      @click=\"onMaskClick\"\r\n    ></div>\r\n    <div id=\"read\" @click=\"toggleTitleAndMenu\"></div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport Epub from \"epubjs\";\r\nimport { ebookMixin } from \"../../utils/mixin\";\r\nimport {\r\n  getFontFamily,\r\n  saveFontFamily,\r\n  getFontSize,\r\n  saveFontSize,\r\n  getTheme,\r\n  saveTheme,\r\n  getLocation\r\n} from \"../../utils/localStorage\";\r\nimport { getLocalForage } from \"../../utils/localForage\";\r\nglobal.ePub = Epub;\r\nexport default {\r\n  mixins: [ebookMixin],\r\n  methods: {\r\n    move(e) {\r\n      let offsetY = 0;\r\n      if (this.firstOffsetY) {\r\n        offsetY = e.changedTouches[0].clientY - this.firstOffsetY;\r\n        this.setOffsetY(offsetY);\r\n      } else {\r\n        this.firstOffsetY = e.changedTouches[0].clientY;\r\n      }\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n    },\r\n    moveEnd(e) {\r\n      this.setOffsetY(0);\r\n      this.firstOffsetY = 0;\r\n    },\r\n    onMouseEnter(e) {\r\n      this.mouseMove = 1;\r\n      this.mouseStartTime = e.timeStamp;\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n    },\r\n    onMouseMove(e) {\r\n      if (this.mouseMove === 1) {\r\n        this.mouseMove = 2;\r\n      } else if (this.mouseMove === 2) {\r\n        let offsetY = 0;\r\n        if (this.firstOffsetY) {\r\n          offsetY = e.clientY - this.firstOffsetY;\r\n          this.setOffsetY(offsetY);\r\n        } else {\r\n          this.firstOffsetY = e.clientY;\r\n        }\r\n      }\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n    },\r\n    onMouseEnd(e) {\r\n      if (this.mouseMove === 2) {\r\n        this.setOffsetY(0);\r\n        this.firstOffsetY = 0;\r\n        this.mouseMove = 3;\r\n      }\r\n      this.mouseEndTime = e.timeStamp;\r\n      const time = this.mouseEndTime - this.mouseStartTime;\r\n      if (time < 200) {\r\n        this.mouseMove = 1;\r\n      }\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n    },\r\n    onMaskClick(e) {\r\n      const offsetX = e.offsetX;\r\n      const width = window.innerWidth;\r\n      if (offsetX > 0 && offsetX < width * 0.3) {\r\n        this.prevPage();\r\n      } else if (offsetX > 0 && offsetX > width * 0.7) {\r\n        this.nextPage();\r\n      } else {\r\n        this.toggleTitleAndMenu();\r\n      }\r\n    },\r\n    prevPage() {\r\n      //调用Rendition的prev方法返回上一页\r\n      if (this.rendition) {\r\n        this.rendition.prev().then(() => {\r\n          this.refreshLocation();\r\n        });\r\n      }\r\n      this.hideTitleAndMenu();\r\n    },\r\n    nextPage() {\r\n      //调用Rendition的next方法返回上一页\r\n      if (this.rendition) {\r\n        this.rendition.next().then(() => {\r\n          this.refreshLocation();\r\n        });\r\n      }\r\n      this.hideTitleAndMenu();\r\n    },\r\n    toggleTitleAndMenu() {\r\n      if (this.menuVisible) {\r\n        this.setSettingVisible(-1);\r\n        this.setFontFamilyVisible(false);\r\n      }\r\n      this.setMenuVisible(!this.menuVisible);\r\n    },\r\n\r\n    initFontSize() {\r\n      //读取localStorage中的FontSize\r\n      let fontSize = getFontSize(this.fileName);\r\n      if (fontSize) {\r\n        this.rendition.themes.fontSize(fontSize);\r\n        this.setDefaultFontSize(fontSize);\r\n      } else {\r\n        saveFontSize(this.fileName, this.defaultFontSize);\r\n      }\r\n    },\r\n    initFontFamily() {\r\n      //读取localStorage中的Font\r\n      let font = getFontFamily(this.fileName);\r\n      if (font) {\r\n        this.rendition.themes.font(font);\r\n        this.setDefaultFontFamily(font);\r\n      } else {\r\n        saveFontFamily(this.fileName, this.defaultFontFamily);\r\n      }\r\n    },\r\n    initTheme() {\r\n      //初始化主题\r\n      let defaultTheme = getTheme(this.fileName);\r\n      if (!defaultTheme) {\r\n        defaultTheme = this.themeList[0].name;\r\n        saveTheme(this.fileName, defaultTheme);\r\n      }\r\n      this.setDefaultTheme(defaultTheme);\r\n      this.themeList.forEach(theme => {\r\n        this.rendition.themes.register(theme.name, theme.style);\r\n      });\r\n      this.rendition.themes.select(defaultTheme);\r\n    },\r\n    initGesture() {\r\n      this.rendition.on(\"touchstart\", event => {\r\n        this.touchStartX = event.changedTouches[0].clientX;\r\n        this.touchStartTime = event.timeStamp;\r\n      });\r\n      this.rendition.on(\"touchend\", event => {\r\n        const offsetX = event.changedTouches[0].clientX - this.touchStartX;\r\n        const time = event.timeStamp - this.touchStartTime;\r\n        //根据手势事件实现翻页功能\r\n        if (time < 500 && offsetX > 40) {\r\n          this.prevPage();\r\n        } else if (time < 500 && offsetX < -40) {\r\n          this.nextPage();\r\n        } else {\r\n          this.toggleTitleAndMenu();\r\n        }\r\n        //组织默认事件和冒泡\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n      });\r\n    },\r\n    initRendition() {\r\n      //生成Rendition对象\r\n      this.rendition = this.book.renderTo(\"read\", {\r\n        width: window.innerWidth,\r\n        height: window.innerHeight,\r\n        method: \"default\"\r\n      });\r\n      //通过Rendition对象的display方法渲染电子书\r\n      const location = getLocation(this.fileName);\r\n      this.display(location, () => {\r\n        this.initFontSize();\r\n        this.initFontFamily();\r\n        this.initTheme();\r\n        this.initGlobalStyle();\r\n      });\r\n      this.rendition.hooks.content.register(contents => {\r\n        Promise.all([\r\n          contents.addStylesheet(\r\n            `${process.env.VUE_APP_RES_URL}/fonts/cabin.css`\r\n          ),\r\n          contents.addStylesheet(\r\n            `${process.env.VUE_APP_RES_URL}/fonts/montserrat.css`\r\n          ),\r\n          contents.addStylesheet(\r\n            `${process.env.VUE_APP_RES_URL}/fonts/tangerine.css`\r\n          ),\r\n          contents.addStylesheet(\r\n            `${process.env.VUE_APP_RES_URL}/fonts/daysOne.css`\r\n          )\r\n        ]).then(() => {});\r\n      });\r\n    },\r\n    parseBook() {\r\n      //解析电子书的封面\r\n      this.book.loaded.cover.then(cover => {\r\n        this.book.archive.createUrl(cover).then(url => {\r\n          this.setCover(url);\r\n        });\r\n      });\r\n      this.book.loaded.metadata.then(metadata => {\r\n        this.setMetadata(metadata);\r\n      });\r\n      this.book.loaded.navigation.then(nav => {\r\n        //console.log(nav)\r\n        //获取电子书的目录\r\n        const navItem = (function flatten(arr) {\r\n          return [].concat(...arr.map(v => [v, ...flatten(v.subitems)]));\r\n        })(nav.toc);\r\n        //将树状目录结构转化为一维数组\r\n        function find(item, v = 0) {\r\n          const parent = navItem.filter(it => it.id === item.parent)[0];\r\n          return !item.parent ? v : parent ? find(parent, ++v) : v;\r\n        }\r\n\r\n        navItem.forEach(item => {\r\n          item.level = find(item);\r\n          item.total = 0;\r\n          item.pagelist = [];\r\n          if (item.href.match(/^(.*)\\.html$/)) {\r\n            item.idhref = item.href.match(/^(.*)\\.html$/)[1];\r\n          } else if (item.href.match(/^(.*)\\.xhtml$/)) {\r\n            item.idhref = item.href.match(/^(.*)\\.xhtml$/)[1];\r\n          }\r\n        });\r\n        this.setNavigation(navItem);\r\n      });\r\n    },\r\n    initEpub(url) {\r\n      //const url =process.env.VUE_APP_RES_URL + \"/epub/\" + this.fileName + \".epub\";\r\n      //电子书的解析和渲染\r\n      //生成Ebook对象\r\n      this.book = new Epub(url);\r\n      this.setCurrentBook(this.book);\r\n      this.initRendition();\r\n      this.initGesture();\r\n      this.parseBook();\r\n      this.book.ready\r\n        .then(() => {\r\n          //分页\r\n          return this.book.locations.generate(\r\n            750 * (window.innerWidth / 375) * (getFontSize(this.fileName) / 16)\r\n          );\r\n        })\r\n        .then(locations => {\r\n          //console.log(locations);\r\n          this.setBookAvailable(true);\r\n          this.refreshLocation();\r\n        });\r\n    }\r\n  },\r\n  mounted() {\r\n    const books = this.$route.params.fileName.split(\"|\");\r\n    const fileName = books[1];\r\n    //读取离线缓存\r\n    getLocalForage(fileName, (err, blob) => {\r\n      if (!err && blob) {\r\n        //电子书有离线缓存\r\n        //console.log(\"找到离线资源\");\r\n        this.setfileName(books.join(\"/\")).then(() => {\r\n          this.initEpub(blob);\r\n        });\r\n      } else {\r\n        //获取在线静态资源的路径\r\n        this.setfileName(books.join(\"/\")).then(() => {\r\n          const url = process.env.VUE_APP_EPUB_URL + this.fileName + \".epub\";\r\n          this.initEpub(url);\r\n        });\r\n      }\r\n    });\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" rel=\"stylesheet/scss\" scoped>\r\n@import \"../../assets/styles/global\";\r\n\r\n.ebook-reader {\r\n  width: 100%;\r\n  height: 100%;\r\n  overflow: hidden;\r\n  .ebook-reader-mask {\r\n    position: absolute;\r\n    z-index: 100;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n}\r\n</style>\r\n"],"sourceRoot":"src/components/Ebook"}]}