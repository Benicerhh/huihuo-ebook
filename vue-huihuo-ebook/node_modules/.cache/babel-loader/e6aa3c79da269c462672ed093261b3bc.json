{"remainingRequest":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\thread-loader\\dist\\cjs.js!E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\babel-loader\\lib\\index.js!E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\src\\components\\Ebook\\EbookReader.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\src\\components\\Ebook\\EbookReader.vue","mtime":1587884816356},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\JodPreparation\\Practice\\项目\\huihuo-ebook\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0IjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRTpcXEpvZFByZXBhcmF0aW9uXFxQcmFjdGljZVxcXHU5ODc5XHU3NkVFXFxodWlodW8tZWJvb2tcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwovLwovLwovLwovLwovLwppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCc7CmltcG9ydCBFcHViIGZyb20gJ2VwdWJqcyc7Cmdsb2JhbC5lUHViID0gRXB1YjsKZXhwb3J0IGRlZmF1bHQgewogIG1ldGhvZHM6IHsKICAgIHByZXZQYWdlOiBmdW5jdGlvbiBwcmV2UGFnZSgpIHsKICAgICAgLy/osIPnlKhSZW5kaXRpb27nmoRwcmV25pa55rOV6L+U5Zue5LiK5LiA6aG1CiAgICAgIGlmICh0aGlzLnJlbmRpdGlvbikgewogICAgICAgIHRoaXMucmVuZGl0aW9uLnByZXYoKTsKICAgICAgfQogICAgfSwKICAgIG5leHRQYWdlOiBmdW5jdGlvbiBuZXh0UGFnZSgpIHsKICAgICAgLy/osIPnlKhSZW5kaXRpb27nmoRuZXh05pa55rOV6L+U5Zue5LiK5LiA6aG1CiAgICAgIGlmICh0aGlzLnJlbmRpdGlvbikgewogICAgICAgIHRoaXMucmVuZGl0aW9uLm5leHQoKTsKICAgICAgfQogICAgfSwKICAgIHRvZ2dsZVRpdGxlQW5kTWVudTogZnVuY3Rpb24gdG9nZ2xlVGl0bGVBbmRNZW51KCkgewogICAgICB0aGlzLmlmVGl0bGVBbmRNZW51U2hvdyA9ICF0aGlzLmlmVGl0bGVBbmRNZW51U2hvdzsKCiAgICAgIGlmICghdGhpcy5pZlRpdGxlQW5kTWVudVNob3cpIHsKICAgICAgICB0aGlzLiRyZWZzLm1lbnVCYXIuaGlkZVNldHRpbmcoKTsKICAgICAgfQogICAgfSwKICAgIGluaXRFcHViOiBmdW5jdGlvbiBpbml0RXB1YigpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciB1cmwgPSAnaHR0cDovL2xvY2FsaG9zdDo4MDgxL2VwdWIvJyArIHRoaXMuZmlsZW5hbWUgKyAnLmVwdWInOyAvL+eUteWtkOS5pueahOino+aekOWSjOa4suafkwogICAgICAvL+eUn+aIkEVib29r5a+56LGhCgogICAgICB0aGlzLmJvb2sgPSBuZXcgRXB1Yih1cmwpOyAvL+eUn+aIkFJlbmRpdGlvbuWvueixoQoKICAgICAgdGhpcy5yZW5kaXRpb24gPSB0aGlzLmJvb2sucmVuZGVyVG8oJ3JlYWQnLCB7CiAgICAgICAgd2lkdGg6IHdpbmRvdy5pbm5lcldpZHRoLAogICAgICAgIGhlaWdodDogd2luZG93LmlubmVySGVpZ2h0LAogICAgICAgIG1ldGhvZDogJ2RlZmF1bHQnCiAgICAgIH0pOyAvL+mAmui/h1JlbmRpdGlvbuWvueixoeeahGRpc3BsYXnmlrnms5XmuLLmn5PnlLXlrZDkuaYKCiAgICAgIHRoaXMucmVuZGl0aW9uLmRpc3BsYXkoKTsgLy/pgJrov4dvbuaWueazlee7keWumuS6i+S7tgoKICAgICAgdGhpcy5yZW5kaXRpb24ub24oJ3RvdWNoc3RhcnQnLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICBfdGhpcy50b3VjaFN0YXJ0WCA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFg7CiAgICAgICAgX3RoaXMudG91Y2hTdGFydFRpbWUgPSBldmVudC50aW1lU3RhbXA7CiAgICAgIH0pOwogICAgICB0aGlzLnJlbmRpdGlvbi5vbigndG91Y2hlbmQnLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICB2YXIgb2Zmc2V0WCA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFggLSBfdGhpcy50b3VjaFN0YXJ0WDsKICAgICAgICB2YXIgdGltZSA9IGV2ZW50LnRpbWVTdGFtcCAtIF90aGlzLnRvdWNoU3RhcnRUaW1lOwoKICAgICAgICBpZiAodGltZSA8IDUwMCAmJiBvZmZzZXRYID4gNDApIHsKICAgICAgICAgIF90aGlzLnByZXZQYWdlKCk7CiAgICAgICAgfSBlbHNlIGlmICh0aW1lIDwgNTAwICYmIG9mZnNldFggPCAtNDApIHsKICAgICAgICAgIF90aGlzLm5leHRQYWdlKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzLnNob3dUaXRsZUFuZE1lbnUoKTsKICAgICAgICB9CgogICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgIH0pOwogICAgfQogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoe30sIG1hcEdldHRlcnMoWydmaWxlbmFtZSddKSksCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgIHZhciBmaWxlbmFtZSA9IHRoaXMuJHJvdXRlLnBhcmFtcy5maWxlbmFtZS5zcGxpdCgnfCcpLmpvaW4oJy8nKTsKICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdzZXRGaWxlbmFtZScsIGZpbGVuYW1lKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXMyLmluaXRFcHViKCk7CiAgICB9KTsKICB9Cn07"},{"version":3,"sources":["EbookReader.vue"],"names":[],"mappings":";;;;;;;;;AAMA,SAAA,UAAA,QAAA,MAAA;AACA,OAAA,IAAA,MAAA,QAAA;AACA,MAAA,CAAA,IAAA,GAAA,IAAA;AACA,eAAA;AACA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,sBACA;AACA;AACA,UAAA,KAAA,SAAA,EAAA;AACA,aAAA,SAAA,CAAA,IAAA;AACA;AACA,KANA;AAOA,IAAA,QAPA,sBAOA;AACA;AACA,UAAA,KAAA,SAAA,EAAA;AACA,aAAA,SAAA,CAAA,IAAA;AACA;AACA,KAZA;AAaA,IAAA,kBAbA,gCAaA;AACA,WAAA,kBAAA,GAAA,CAAA,KAAA,kBAAA;;AACA,UAAA,CAAA,KAAA,kBAAA,EAAA;AACA,aAAA,KAAA,CAAA,OAAA,CAAA,WAAA;AACA;AACA,KAlBA;AAmBA,IAAA,QAnBA,sBAmBA;AAAA;;AACA,UAAA,GAAA,GAAA,gCAAA,KAAA,QAAA,GAAA,OAAA,CADA,CAEA;AACA;;AACA,WAAA,IAAA,GAAA,IAAA,IAAA,CAAA,GAAA,CAAA,CAJA,CAKA;;AACA,WAAA,SAAA,GAAA,KAAA,IAAA,CAAA,QAAA,CAAA,MAAA,EAAA;AACA,QAAA,KAAA,EAAA,MAAA,CAAA,UADA;AAEA,QAAA,MAAA,EAAA,MAAA,CAAA,WAFA;AAGA,QAAA,MAAA,EAAA;AAHA,OAAA,CAAA,CANA,CAWA;;AACA,WAAA,SAAA,CAAA,OAAA,GAZA,CAaA;;AACA,WAAA,SAAA,CAAA,EAAA,CAAA,YAAA,EAAA,UAAA,KAAA,EAAA;AACA,QAAA,KAAA,CAAA,WAAA,GAAA,KAAA,CAAA,cAAA,CAAA,CAAA,EAAA,OAAA;AACA,QAAA,KAAA,CAAA,cAAA,GAAA,KAAA,CAAA,SAAA;AACA,OAHA;AAIA,WAAA,SAAA,CAAA,EAAA,CAAA,UAAA,EAAA,UAAA,KAAA,EAAA;AACA,YAAA,OAAA,GAAA,KAAA,CAAA,cAAA,CAAA,CAAA,EAAA,OAAA,GAAA,KAAA,CAAA,WAAA;AACA,YAAA,IAAA,GAAA,KAAA,CAAA,SAAA,GAAA,KAAA,CAAA,cAAA;;AACA,YAAA,IAAA,GAAA,GAAA,IAAA,OAAA,GAAA,EAAA,EAAA;AACA,UAAA,KAAA,CAAA,QAAA;AACA,SAFA,MAEA,IAAA,IAAA,GAAA,GAAA,IAAA,OAAA,GAAA,CAAA,EAAA,EAAA;AACA,UAAA,KAAA,CAAA,QAAA;AACA,SAFA,MAEA;AACA,UAAA,KAAA,CAAA,gBAAA;AACA;;AACA,QAAA,KAAA,CAAA,cAAA;AACA,QAAA,KAAA,CAAA,eAAA;AACA,OAZA;AAaA;AAlDA,GADA;AAqDA,EAAA,QAAA,oBACA,UAAA,CAAA,CAAA,UAAA,CAAA,CADA,CArDA;AAwDA,EAAA,OAxDA,qBAwDA;AAAA;;AACA,QAAA,QAAA,GAAA,KAAA,MAAA,CAAA,MAAA,CAAA,QAAA,CAAA,KAAA,CAAA,GAAA,EAAA,IAAA,CAAA,GAAA,CAAA;AACA,SAAA,MAAA,CAAA,QAAA,CAAA,aAAA,EAAA,QAAA,EAAA,IAAA,CAAA,YAAA;AACA,MAAA,MAAA,CAAA,QAAA;AACA,KAFA;AAGA;AA7DA,CAAA","sourcesContent":["<template>\r\n  <div class=\"ebook-reader\">\r\n    <div id=\"read\"></div>\r\n  </div>\r\n</template>\r\n<script>\r\n  import { mapGetters } from 'vuex'\r\n  import Epub from 'epubjs'\r\n  global.ePub = Epub\r\n  export default {\r\n    methods: {\r\n      prevPage() {\r\n        //调用Rendition的prev方法返回上一页\r\n        if (this.rendition) {\r\n          this.rendition.prev()\r\n        }\r\n      },\r\n      nextPage() {\r\n        //调用Rendition的next方法返回上一页\r\n        if (this.rendition) {\r\n          this.rendition.next()\r\n        }\r\n      },\r\n      toggleTitleAndMenu() {\r\n        this.ifTitleAndMenuShow = !this.ifTitleAndMenuShow\r\n        if (!this.ifTitleAndMenuShow) {\r\n          this.$refs.menuBar.hideSetting()\r\n        }\r\n      },\r\n      initEpub() {\r\n        const url = 'http://localhost:8081/epub/' + this.filename + '.epub'\r\n        //电子书的解析和渲染\r\n        //生成Ebook对象\r\n        this.book = new Epub(url)\r\n        //生成Rendition对象\r\n        this.rendition = this.book.renderTo('read', {\r\n          width: window.innerWidth,\r\n          height: window.innerHeight,\r\n          method: 'default'\r\n        })\r\n        //通过Rendition对象的display方法渲染电子书\r\n        this.rendition.display()\r\n        //通过on方法绑定事件\r\n        this.rendition.on('touchstart', event => {\r\n          this.touchStartX = event.changedTouches[0].clientX\r\n          this.touchStartTime = event.timeStamp\r\n        })\r\n        this.rendition.on('touchend', event => {\r\n          const offsetX = event.changedTouches[0].clientX - this.touchStartX\r\n          const time = event.timeStamp - this.touchStartTime\r\n          if (time < 500 && offsetX > 40) {\r\n            this.prevPage()\r\n          } else if (time < 500 && offsetX < -40) {\r\n            this.nextPage()\r\n          } else {\r\n            this.showTitleAndMenu()\r\n          }\r\n          event.preventDefault()\r\n          event.stopPropagation()\r\n        })\r\n      }\r\n    },\r\n    computed: {\r\n      ...mapGetters(['filename'])\r\n    },\r\n    mounted() {\r\n      const filename = this.$route.params.filename.split('|').join('/')\r\n      this.$store.dispatch('setFilename', filename).then(() => {\r\n        this.initEpub()\r\n      })\r\n    }\r\n  }\r\n</script>"],"sourceRoot":"src/components/Ebook"}]}